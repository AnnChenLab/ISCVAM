{"version":3,"sources":["hooks/dataPanels.js","components/ScHeatmap.js","utils.js","components/ScMarkersTable.js","components/PredictiveInput.js","components/SearchAndHighlight.js","hooks/remoteData.js","components/ScFeatureTable.js","hooks/plotting.js","hooks/brushedPlotting.js","hooks/brushing.js","components/ScPanel.js","components/ScDataViewer.js","ChooseData.js","versions.js","MainPage.js","App.js","serviceWorker.js","index.js"],"names":["_regeneratorRuntime","e","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","value","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","this","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","return","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","catch","delegateYield","useDataPanels","_ref","datasets","initialDatasetIdx","nPanels","initialCache","cache","useRef","console","log","initialState","_toConsumableArray","Array","map","data","_useReducer","useReducer","state","action","stateToUpdate","currentState","panelIdx","datasetIdx","current","store","rc","error","concat","_useReducer2","_slicedToArray","dispatch","loadDataLayer","res","layer","clusterings","layerData","covs","continuousCovs","discreteCovs","layersData","id","loadDataset","_x","_loadDataset","apply","arguments","_asyncToGenerator","_callee5","_datasets$datasetIdx","url","layers","modalities","zip","jobs","genesets","_context5","_ref3","_callee2","layerURL","response","j","clusteringsURL","_context2","fetch","json","_x4","_callee3","metares","_context3","meta","_callee4","_context4","all","dataAPI","t0","_loadDataPanel","_callee6","_context6","useEffect","_ref2","_callee","_context","loadInitialDataset","_x2","_x3","HeatmapComponent","clustering","heatmapAssayInEffect","usingFullMatrix","sNHControls","selectedHeatmapAssay","_useState","useState","_useState2","heatmapMode","setHeatmapMode","_useState3","_useState4","heatmapHeight","setHeatmapHeight","_useState5","_useState6","heatmapWidth","setHeatmapWidth","_useState7","_useState8","heatmapMarkers","setHeatmapMarkers","_useState9","_useState10","selectedMarkersTestInput","setSelectedMarkersTestInput","heatmapTitle","includes","heatmapData","useMemo","_data","_selectedMarkers","marker","toLowerCase","_clusterNames","selectedMarkersSet","Set","selectedMarkersIndex","fromEntries","index","labels","find","element","isArray","seenLabels","sorteredColumns","reduce","result","item","has","add","sort","b","heatmapLabels","column","filteredColumnsMatrix","_y","_z","height","width","x","z","normalizeData","React","createElement","Fragment","Box","style","ToggleButtonGroup","display","color","onChange","nv","newValue","exclusive","ToggleButton","data-test-id","key","TextField","sx","margin","placeholder","multiline","minRows","maxRows","event","target","onClick","split","minHeight","Plot","colorscale","config","displaylogo","modeBarButtonsToRemove","layout","xaxis","side","tickangle","showticklabels","automargin","yaxis","autotick","autorange","autoshift","MarkersTableComponent","clusteringData","markers","setData","initialRowsState","setInitialRowsState","headers","filter","m","columns","header","field","headerName","toUpperCase","unshift","columnsValues","rows","row","gene","DataGrid","assign","slots","toolbar","GridToolbarContainer","GridToolbarExport","printOptions","disableToolbarButton","Button","uniqueMarkers","allMarkers","hash","accumulator","diff","getUniqueMarkers","indexOf","pagination","paginationModel","pageSize","NoOptionsMessage","props","Typography","className","selectProps","classes","noOptionsMessage","innerProps","children","inputComponent","inputRef","_objectWithoutProperties","ref","Control","fullWidth","InputProps","inputProps","_objectSpread","input","innerRef","textFieldProps","Option","MenuItem","buttonRef","selected","isFocused","component","fontWeight","isSelected","Placeholder","SingleValue","singleValue","ValueContainer","valueContainer","MultiValue","Chip","tabIndex","label","classNames","chip","_defineProperty","chipFocused","onDelete","removeProps","deleteIcon","CancelIcon","Menu","Paper","square","paper","components","componentsNoDropdown","DropdownIndicator","IndicatorSeparator","PredictiveInput","NoSsr","ReactSelect","InputLabelProps","shrink","CreatablePredictiveInput","forwardRef","CreatableSelect","filterOption","query","onInputChange","SearchAndHighlight","brushing","loadRemoteData","features","search","setSearch","paintControlInputEl","searchTerms","options","cv","group","term","colorTerms","cterms","entries","assayName","assayFeatures","_changeColorBy","colorBy","category","setColorBy","FormControl","searchControl","variant","setFilter","isMulti","paintControl","formatCreateLabel","isClearable","useRemoteData","remoteData","setRemoteData","featureCat","feature","assay","resData","rd","replace","TablePaginationActions","count","page","rowsPerPage","onPageChange","isRtl","useTheme","direction","handleButtonClick","newPage","flexShrink","ml","IconButton","disabled","aria-label","Icon","Math","ceil","max","FeatureTable","setPage","setRowsPerPage","TableContainer","Table","maxWidth","marginTop","captionSide","size","TableBody","rowid","TableRow","TableCell","scope","colsPerRow","cidx","align","TableFooter","TablePagination","rowsPerPageOptions","colSpan","SelectProps","native","_","onRowsPerPageChange","parseInt","ActionsComponent","usePlotting","xys","contrast","zTransform","colorModifier","alpha","shadeAdjust","undefined","startsWith","hex","test","substring","join","hexToRgbA","newCol","_settings$plottingDef","settings","plottingDefaults","maxRowsInTooltip","backgroundOpacity","backgroundSize","highlightOpacity","highlightSize","highlightBorderWidth","backgroundBorderWidth","brushedHighlightSize","updateFigure","setLayout","colorsAndTraces","ret","colors","traceIdxes","isContinous","scale","d3","category20","vals","valsMap","_step","legend","_iterator","_createForOfIteratorHelper","val","err","cov","traces","idxes","linecolor","bgcolors","annos","covnames","idx","cn","opacity","lineopacity","linewidth","hovermode","showlegend","xanchor","showline","showgrid","zeroline","showticks","autosize","mode","colorbar","title","len","line","text","hoverlabel","bgcolor","hoverinfo","trace","frames","useResizeHandler","onInitialized","onUpdate","useBrushedPlotting","conf","_layersData$conf$laye","projection","UMAP_1","UMAP_2","tSNE_1","tSNE_2","setContrast","setZTransform","_c","some","_ref$value","selectSubpop","useBrushing","ScPanel","panelDataState","loadDataPanel","openChooseDataset","maximized","toggleMaximize","datasetTerms","ds","panelData","status","showSelectDataset","setShowSelectDataset","availableProjectionsAllLayers","getDefaultClustering","tcs","tcsDefault","tc","tcsCurated","tcsPrelim","tcsMain","panelDefault","modeAssay","assays","updateConfig","legendsOptions","icon","_useRemoteData","dataConfig","_useRemoteData2","_useBrushedPlotting","_useBrushedPlotting2","plot","_useSNHControls","controls","SNHControls","setSNHControls","useSNHControls","_useSNHControls2","toggleSNHControls","availableProjections","handleSelectedDatasetChange","handleClusteringChange","newConfig","setClusteringData","isLoading","setIsLoading","fetchData","toggleSelectedHeatmapAssay","updateSelectedHeatmapAssay","activeModes","DatasetControls","chooseDatasetControl","defaultMenuIsOpen","onMenuClose","HeatmapContainer","isActiveHeatmap","style3","top","marginLeft","isToggleGroupVisible","isClusteringDataValid","Grid","xs","gridItemSize","overflowY","floatingControls","fixedControls","parintControl","toggleHeatmapMode","heatmapAssay","justifyContent","CircularProgress","isInPlotMode","isInLegendsMode","isPlotOrHeatmap","PlotAndLayerControls","container","toggleProjection","toggleMode","toggleShowWhatEmbedding","toggleLayer","headerPanel","alignItems","plotMain","spacing","toggleModeAssay","overflow","footerPanel","renderSNHControlsToggleIcon","window","open","withStyles","theme","root","flexGrow","padding","unit","marginRight","marginBottom","wordWrap","card","textField","position","zIndex","controlArea","center","left","right","backgroundColor","bottom","footer","fontSize","whiteSpace","minWidth","paintGenesetControl","_useDataPanels","_useDataPanels2","dataPanels","maximizedPanelIdx","setMaximizedPanelIdx","toggleMax","fill","PaperComponent","Draggable","palette","background","subtitle","accent","tableRow","&:hover","cursor","buildInfo","float","fontStyle","stickyHeader","onClose","pristine","versions","onGroupClick","setCursor","sortedDatasets","dataset","organ","Dialog","disableBackdropClick","disableEscapeKeyDown","aria-labelledby","DialogTitle","DialogContent","TableHead","reference","isGroup","groupDatasets","expanded","hover","href","rel","subIndex","originalIndex","paddingLeft","Divider","version","revision","branch","geneToOrgan","Bladder","Blood","Bone","Brain","Breast","Colorectum","Esophagus","Eye","Head & Neck","Kidney","Liver","Lung","Lymph node","Nervous system","Pancreas","Pelvic cavity","Prostate","Skin","Soft tissue","Stomach","acc","fab","fab2","dragged","openChooseData","pristineChooseData","groupedDatasets","expandedGroups","setState","grouped","prefix","prevState","ChooseData","ScDataViewer","createMuiTheme","primary","indigo","secondary","pink","red","contrastThreshold","tonalOffset","typography","useNextVariants","App","MuiThemeProvider","MainPage","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"qSACAA,EAAA,kBAAAC,GAAA,IAAAC,EAAAD,EAAA,GAAAE,EAAAC,OAAAC,UAAAC,EAAAH,EAAAI,eAAAC,EAAAJ,OAAAK,gBAAA,SAAAP,EAAAD,EAAAE,GAAAD,EAAAD,GAAAE,EAAAO,OAAAC,EAAA,mBAAAC,cAAA,GAAAC,EAAAF,EAAAG,UAAA,aAAAC,EAAAJ,EAAAK,eAAA,kBAAAC,EAAAN,EAAAO,aAAA,yBAAAC,EAAAjB,EAAAD,EAAAE,GAAA,OAAAC,OAAAK,eAAAP,EAAAD,EAAA,CAAAS,MAAAP,EAAAiB,YAAA,EAAAC,cAAA,EAAAC,UAAA,IAAApB,EAAAD,GAAA,IAAAkB,EAAA,aAAAjB,GAAAiB,EAAA,SAAAjB,EAAAD,EAAAE,GAAA,OAAAD,EAAAD,GAAAE,GAAA,SAAAoB,EAAArB,EAAAD,EAAAE,EAAAG,GAAA,IAAAK,EAAAV,KAAAI,qBAAAmB,EAAAvB,EAAAuB,EAAAX,EAAAT,OAAAqB,OAAAd,EAAAN,WAAAU,EAAA,IAAAW,EAAApB,GAAA,WAAAE,EAAAK,EAAA,WAAAH,MAAAiB,EAAAzB,EAAAC,EAAAY,KAAAF,EAAA,SAAAe,EAAA1B,EAAAD,EAAAE,GAAA,WAAA0B,KAAA,SAAAC,IAAA5B,EAAA6B,KAAA9B,EAAAE,IAAA,MAAAD,GAAA,OAAA2B,KAAA,QAAAC,IAAA5B,IAAAD,EAAAsB,OAAA,IAAAS,EAAA,iBAAAC,EAAA,iBAAAC,EAAA,YAAAC,EAAA,YAAAC,EAAA,YAAAZ,KAAA,SAAAa,KAAA,SAAAC,KAAA,IAAAC,EAAA,GAAApB,EAAAoB,EAAA1B,EAAA,kBAAA2B,OAAA,IAAAC,EAAArC,OAAAsC,eAAAC,EAAAF,OAAAG,EAAA,MAAAD,OAAAxC,GAAAG,EAAAyB,KAAAY,EAAA9B,KAAA0B,EAAAI,GAAA,IAAAE,EAAAP,EAAAjC,UAAAmB,EAAAnB,UAAAD,OAAAqB,OAAAc,GAAA,SAAAO,EAAA5C,GAAA,0BAAA6C,QAAA,SAAA9C,GAAAkB,EAAAjB,EAAAD,EAAA,SAAAC,GAAA,OAAAsC,KAAAQ,QAAA/C,EAAAC,OAAA,SAAA+C,EAAA/C,EAAAD,GAAA,SAAAiD,EAAA/C,EAAAK,EAAAG,EAAAE,GAAA,IAAAE,EAAAa,EAAA1B,EAAAC,GAAAD,EAAAM,GAAA,aAAAO,EAAAc,KAAA,KAAAZ,EAAAF,EAAAe,IAAAE,EAAAf,EAAAP,MAAA,OAAAsB,GAAA,iBAAAA,GAAA1B,EAAAyB,KAAAC,EAAA,WAAA/B,EAAAkD,QAAAnB,EAAAoB,SAAAC,KAAA,SAAAnD,GAAAgD,EAAA,OAAAhD,EAAAS,EAAAE,IAAA,SAAAX,GAAAgD,EAAA,QAAAhD,EAAAS,EAAAE,KAAAZ,EAAAkD,QAAAnB,GAAAqB,KAAA,SAAAnD,GAAAe,EAAAP,MAAAR,EAAAS,EAAAM,IAAA,SAAAf,GAAA,OAAAgD,EAAA,QAAAhD,EAAAS,EAAAE,OAAAE,EAAAe,KAAA,IAAA3B,EAAAK,EAAAgC,KAAA,WAAA9B,MAAA,SAAAR,EAAAI,GAAA,SAAAgD,IAAA,WAAArD,EAAA,SAAAA,EAAAE,GAAA+C,EAAAhD,EAAAI,EAAAL,EAAAE,KAAA,OAAAA,MAAAkD,KAAAC,YAAA,SAAA3B,EAAA1B,EAAAE,EAAAG,GAAA,IAAAE,EAAAwB,EAAA,gBAAArB,EAAAE,GAAA,GAAAL,IAAA0B,EAAA,MAAAqB,MAAA,mCAAA/C,IAAA2B,EAAA,cAAAxB,EAAA,MAAAE,EAAA,OAAAH,MAAAR,EAAAsD,MAAA,OAAAlD,EAAAmD,OAAA9C,EAAAL,EAAAwB,IAAAjB,IAAA,KAAAE,EAAAT,EAAAoD,SAAA,GAAA3C,EAAA,KAAAE,EAAA0C,EAAA5C,EAAAT,GAAA,GAAAW,EAAA,IAAAA,IAAAmB,EAAA,gBAAAnB,GAAA,YAAAX,EAAAmD,OAAAnD,EAAAsD,KAAAtD,EAAAuD,MAAAvD,EAAAwB,SAAA,aAAAxB,EAAAmD,OAAA,IAAAjD,IAAAwB,EAAA,MAAAxB,EAAA2B,EAAA7B,EAAAwB,IAAAxB,EAAAwD,kBAAAxD,EAAAwB,SAAA,WAAAxB,EAAAmD,QAAAnD,EAAAyD,OAAA,SAAAzD,EAAAwB,KAAAtB,EAAA0B,EAAA,IAAAK,EAAAX,EAAA3B,EAAAE,EAAAG,GAAA,cAAAiC,EAAAV,KAAA,IAAArB,EAAAF,EAAAkD,KAAArB,EAAAF,EAAAM,EAAAT,MAAAM,EAAA,gBAAA1B,MAAA6B,EAAAT,IAAA0B,KAAAlD,EAAAkD,MAAA,UAAAjB,EAAAV,OAAArB,EAAA2B,EAAA7B,EAAAmD,OAAA,QAAAnD,EAAAwB,IAAAS,EAAAT,OAAA,SAAA6B,EAAA1D,EAAAE,GAAA,IAAAG,EAAAH,EAAAsD,OAAAjD,EAAAP,EAAAa,SAAAR,GAAA,GAAAE,IAAAN,EAAA,OAAAC,EAAAuD,SAAA,eAAApD,GAAAL,EAAAa,SAAAkD,SAAA7D,EAAAsD,OAAA,SAAAtD,EAAA2B,IAAA5B,EAAAyD,EAAA1D,EAAAE,GAAA,UAAAA,EAAAsD,SAAA,WAAAnD,IAAAH,EAAAsD,OAAA,QAAAtD,EAAA2B,IAAA,IAAAmC,UAAA,oCAAA3D,EAAA,aAAA8B,EAAA,IAAAzB,EAAAiB,EAAApB,EAAAP,EAAAa,SAAAX,EAAA2B,KAAA,aAAAnB,EAAAkB,KAAA,OAAA1B,EAAAsD,OAAA,QAAAtD,EAAA2B,IAAAnB,EAAAmB,IAAA3B,EAAAuD,SAAA,KAAAtB,EAAA,IAAAvB,EAAAF,EAAAmB,IAAA,OAAAjB,IAAA2C,MAAArD,EAAAF,EAAAiE,YAAArD,EAAAH,MAAAP,EAAAgE,KAAAlE,EAAAmE,QAAA,WAAAjE,EAAAsD,SAAAtD,EAAAsD,OAAA,OAAAtD,EAAA2B,IAAA5B,GAAAC,EAAAuD,SAAA,KAAAtB,GAAAvB,GAAAV,EAAAsD,OAAA,QAAAtD,EAAA2B,IAAA,IAAAmC,UAAA,oCAAA9D,EAAAuD,SAAA,KAAAtB,GAAA,SAAAiC,EAAAnE,GAAA,IAAAD,EAAA,CAAAqE,OAAApE,EAAA,SAAAA,IAAAD,EAAAsE,SAAArE,EAAA,SAAAA,IAAAD,EAAAuE,WAAAtE,EAAA,GAAAD,EAAAwE,SAAAvE,EAAA,IAAAsC,KAAAkC,WAAAC,KAAA1E,GAAA,SAAA2E,EAAA1E,GAAA,IAAAD,EAAAC,EAAA2E,YAAA,GAAA5E,EAAA4B,KAAA,gBAAA5B,EAAA6B,IAAA5B,EAAA2E,WAAA5E,EAAA,SAAAyB,EAAAxB,GAAAsC,KAAAkC,WAAA,EAAAJ,OAAA,SAAApE,EAAA6C,QAAAsB,EAAA7B,WAAAsC,OAAA,YAAAlC,EAAA3C,GAAA,GAAAA,GAAA,KAAAA,EAAA,KAAAE,EAAAF,EAAAY,GAAA,GAAAV,EAAA,OAAAA,EAAA4B,KAAA9B,GAAA,sBAAAA,EAAAkE,KAAA,OAAAlE,EAAA,IAAA8E,MAAA9E,EAAA+E,QAAA,KAAAxE,GAAA,EAAAG,EAAA,SAAAwD,IAAA,OAAA3D,EAAAP,EAAA+E,QAAA,GAAA1E,EAAAyB,KAAA9B,EAAAO,GAAA,OAAA2D,EAAAzD,MAAAT,EAAAO,GAAA2D,EAAAX,MAAA,EAAAW,EAAA,OAAAA,EAAAzD,MAAAR,EAAAiE,EAAAX,MAAA,EAAAW,GAAA,OAAAxD,EAAAwD,KAAAxD,GAAA,UAAAsD,iBAAAhE,EAAA,2BAAAoC,EAAAhC,UAAAiC,EAAA9B,EAAAqC,EAAA,eAAAnC,MAAA4B,EAAAjB,cAAA,IAAAb,EAAA8B,EAAA,eAAA5B,MAAA2B,EAAAhB,cAAA,IAAAgB,EAAA4C,YAAA9D,EAAAmB,EAAArB,EAAA,qBAAAhB,EAAAiF,oBAAA,SAAAhF,GAAA,IAAAD,EAAA,mBAAAC,KAAAiF,YAAA,QAAAlF,QAAAoC,GAAA,uBAAApC,EAAAgF,aAAAhF,EAAAmF,QAAAnF,EAAAoF,KAAA,SAAAnF,GAAA,OAAAE,OAAAkF,eAAAlF,OAAAkF,eAAApF,EAAAoC,IAAApC,EAAAqF,UAAAjD,EAAAnB,EAAAjB,EAAAe,EAAA,sBAAAf,EAAAG,UAAAD,OAAAqB,OAAAoB,GAAA3C,GAAAD,EAAAuF,MAAA,SAAAtF,GAAA,OAAAkD,QAAAlD,IAAA4C,EAAAG,EAAA5C,WAAAc,EAAA8B,EAAA5C,UAAAU,EAAA,kBAAAyB,OAAAvC,EAAAgD,gBAAAhD,EAAAwF,MAAA,SAAAvF,EAAAC,EAAAG,EAAAE,EAAAG,QAAA,IAAAA,MAAA+E,SAAA,IAAA7E,EAAA,IAAAoC,EAAA1B,EAAArB,EAAAC,EAAAG,EAAAE,GAAAG,GAAA,OAAAV,EAAAiF,oBAAA/E,GAAAU,IAAAsD,OAAAd,KAAA,SAAAnD,GAAA,OAAAA,EAAAsD,KAAAtD,EAAAQ,MAAAG,EAAAsD,UAAArB,EAAAD,GAAA1B,EAAA0B,EAAA5B,EAAA,aAAAE,EAAA0B,EAAAhC,EAAA,kBAAA2B,OAAArB,EAAA0B,EAAA,mDAAA5C,EAAA0F,KAAA,SAAAzF,GAAA,IAAAD,EAAAG,OAAAF,GAAAC,EAAA,WAAAG,KAAAL,EAAAE,EAAAwE,KAAArE,GAAA,OAAAH,EAAAyF,UAAA,SAAAzB,IAAA,KAAAhE,EAAA6E,QAAA,KAAA9E,EAAAC,EAAA0F,MAAA,GAAA3F,KAAAD,EAAA,OAAAkE,EAAAzD,MAAAR,EAAAiE,EAAAX,MAAA,EAAAW,EAAA,OAAAA,EAAAX,MAAA,EAAAW,IAAAlE,EAAA2C,SAAAlB,EAAArB,UAAA,CAAA8E,YAAAzD,EAAAoD,MAAA,SAAA7E,GAAA,GAAAuC,KAAAsD,KAAA,EAAAtD,KAAA2B,KAAA,EAAA3B,KAAAoB,KAAApB,KAAAqB,MAAA3D,EAAAsC,KAAAgB,MAAA,EAAAhB,KAAAkB,SAAA,KAAAlB,KAAAiB,OAAA,OAAAjB,KAAAV,IAAA5B,EAAAsC,KAAAkC,WAAA3B,QAAA6B,IAAA3E,EAAA,QAAAE,KAAAqC,KAAA,MAAArC,EAAA4F,OAAA,IAAAzF,EAAAyB,KAAAS,KAAArC,KAAA4E,OAAA5E,EAAA6F,MAAA,MAAAxD,KAAArC,GAAAD,IAAA+F,KAAA,WAAAzD,KAAAgB,MAAA,MAAAtD,EAAAsC,KAAAkC,WAAA,GAAAG,WAAA,aAAA3E,EAAA2B,KAAA,MAAA3B,EAAA4B,IAAA,OAAAU,KAAA0D,MAAApC,kBAAA,SAAA7D,GAAA,GAAAuC,KAAAgB,KAAA,MAAAvD,EAAA,IAAAE,EAAAqC,KAAA,SAAA2D,EAAA7F,EAAAE,GAAA,OAAAK,EAAAgB,KAAA,QAAAhB,EAAAiB,IAAA7B,EAAAE,EAAAgE,KAAA7D,EAAAE,IAAAL,EAAAsD,OAAA,OAAAtD,EAAA2B,IAAA5B,KAAAM,EAAA,QAAAA,EAAAgC,KAAAkC,WAAAM,OAAA,EAAAxE,GAAA,IAAAA,EAAA,KAAAG,EAAA6B,KAAAkC,WAAAlE,GAAAK,EAAAF,EAAAkE,WAAA,YAAAlE,EAAA2D,OAAA,OAAA6B,EAAA,UAAAxF,EAAA2D,QAAA9B,KAAAsD,KAAA,KAAA/E,EAAAT,EAAAyB,KAAApB,EAAA,YAAAM,EAAAX,EAAAyB,KAAApB,EAAA,iBAAAI,GAAAE,EAAA,IAAAuB,KAAAsD,KAAAnF,EAAA4D,SAAA,OAAA4B,EAAAxF,EAAA4D,UAAA,MAAA/B,KAAAsD,KAAAnF,EAAA6D,WAAA,OAAA2B,EAAAxF,EAAA6D,iBAAA,GAAAzD,GAAA,GAAAyB,KAAAsD,KAAAnF,EAAA4D,SAAA,OAAA4B,EAAAxF,EAAA4D,UAAA,YAAAtD,EAAA,MAAAsC,MAAA,6CAAAf,KAAAsD,KAAAnF,EAAA6D,WAAA,OAAA2B,EAAAxF,EAAA6D,gBAAAT,OAAA,SAAA7D,EAAAD,GAAA,QAAAE,EAAAqC,KAAAkC,WAAAM,OAAA,EAAA7E,GAAA,IAAAA,EAAA,KAAAK,EAAAgC,KAAAkC,WAAAvE,GAAA,GAAAK,EAAA8D,QAAA9B,KAAAsD,MAAAxF,EAAAyB,KAAAvB,EAAA,eAAAgC,KAAAsD,KAAAtF,EAAAgE,WAAA,KAAA7D,EAAAH,EAAA,OAAAG,IAAA,UAAAT,GAAA,aAAAA,IAAAS,EAAA2D,QAAArE,MAAAU,EAAA6D,aAAA7D,EAAA,UAAAE,EAAAF,IAAAkE,WAAA,UAAAhE,EAAAgB,KAAA3B,EAAAW,EAAAiB,IAAA7B,EAAAU,GAAA6B,KAAAiB,OAAA,OAAAjB,KAAA2B,KAAAxD,EAAA6D,WAAApC,GAAAI,KAAA4D,SAAAvF,IAAAuF,SAAA,SAAAlG,EAAAD,GAAA,aAAAC,EAAA2B,KAAA,MAAA3B,EAAA4B,IAAA,gBAAA5B,EAAA2B,MAAA,aAAA3B,EAAA2B,KAAAW,KAAA2B,KAAAjE,EAAA4B,IAAA,WAAA5B,EAAA2B,MAAAW,KAAA0D,KAAA1D,KAAAV,IAAA5B,EAAA4B,IAAAU,KAAAiB,OAAA,SAAAjB,KAAA2B,KAAA,kBAAAjE,EAAA2B,MAAA5B,IAAAuC,KAAA2B,KAAAlE,GAAAmC,GAAAiE,OAAA,SAAAnG,GAAA,QAAAD,EAAAuC,KAAAkC,WAAAM,OAAA,EAAA/E,GAAA,IAAAA,EAAA,KAAAE,EAAAqC,KAAAkC,WAAAzE,GAAA,GAAAE,EAAAqE,aAAAtE,EAAA,OAAAsC,KAAA4D,SAAAjG,EAAA0E,WAAA1E,EAAAsE,UAAAG,EAAAzE,GAAAiC,IAAAkE,MAAA,SAAApG,GAAA,QAAAD,EAAAuC,KAAAkC,WAAAM,OAAA,EAAA/E,GAAA,IAAAA,EAAA,KAAAE,EAAAqC,KAAAkC,WAAAzE,GAAA,GAAAE,EAAAmE,SAAApE,EAAA,KAAAI,EAAAH,EAAA0E,WAAA,aAAAvE,EAAAuB,KAAA,KAAArB,EAAAF,EAAAwB,IAAA8C,EAAAzE,GAAA,OAAAK,GAAA,MAAA+C,MAAA,0BAAAgD,cAAA,SAAAtG,EAAAE,EAAAG,GAAA,OAAAkC,KAAAkB,SAAA,CAAA5C,SAAA8B,EAAA3C,GAAAiE,WAAA/D,EAAAiE,QAAA9D,GAAA,SAAAkC,KAAAiB,SAAAjB,KAAAV,IAAA5B,GAAAkC,IAAAnC,EACO,SAASuG,EAAaC,GAAyC,IAAvCC,EAAQD,EAARC,SAAUC,EAAiBF,EAAjBE,kBAAmBC,EAAOH,EAAPG,QAClDC,EAAe,GACfC,EAAQC,iBAAOF,GACrBG,QAAQC,IAAI,kBAAmBJ,GAE/B,IAAMK,EACFC,YAAIC,MAAMR,IAAUS,IAAI,iBAAO,CAAEC,KAAM,QAC3CN,QAAQC,IAAI,kBAAmBJ,GAAa,IAAAU,EAElBC,qBAO1B,SAAiBC,EAAOC,GAAQ,IACrB7F,EAAQ6F,EAAR7F,KACD8F,EAAaR,YAAOM,GAEhC,OAAQ5F,GACP,IAAK,WACQ,IAAM+F,EAAeD,EAAcD,EAAOG,UACjB,OAAtBD,EAAaN,QAZHQ,EAaOF,EAAaN,KAAKQ,cAZ7BhB,EAAMiB,gBACZjB,EAAMiB,QAAQD,IAYjBF,EAAaN,KAAO,KACpB,MAEb,IAAK,UAGL,IAAK,cACQ,MAEJ,IAAK,aACDK,EAAcD,EAAOG,UAAUP,KAAOR,EAAMiB,QAAQL,EAAOI,YAAYE,MACvElB,EAAMiB,QAAQL,EAAOI,YAAYG,KACjC,MAEJ,IAAK,kBAIDjB,QAAQC,IAAI,qBAAsBS,EAAOI,YACzCd,QAAQC,IAAI,iBAAkBH,EAAMiB,SAEhCjB,EAAMiB,QAAQL,EAAOI,aACrBH,EAAc5E,QAAQ,SAAAR,GAAC,OAAIA,EAAE+E,KAAOR,EAAMiB,QAAQL,EAAOI,YAAYE,QACrElB,EAAMiB,QAAQL,EAAOI,YAAYG,GAAKN,EAAc3C,SAEpDgC,QAAQkB,MAAK,uBAAAC,OAAwBT,EAAOI,aAC5Cd,QAAQkB,MAAM,iBAAkBpB,EAAMiB,UAE1C,MAEb,QACa,MAAM,IAAIxE,MA7CtB,IAAyBuE,EAgDrB,OAAOH,GAlDmCT,GAAakB,EAAAC,YAAAd,EAAA,GAApDE,EAAKW,EAAA,GAAEE,EAAQF,EAAA,GAqDtB,SAASG,EAAcC,EAAKC,EAAOnB,EAAMoB,GACrC,IAAIC,EAAY,GAChBA,EAAUC,KAAOJ,EAAII,KACrBD,EAAUE,eAAiBL,EAAIK,eAC/BF,EAAUG,aAAeN,EAAIM,aAC7BH,EAAUD,YAAcA,EACxBpB,EAAKyB,WAAWN,EAAMO,IAAML,EAC/B,SAEcM,EAAWC,GAAA,OAAAC,EAAAC,MAAA5G,KAAA6G,WAAA,SAAAF,IAiDzB,OAjDyBA,EAAAG,YAAAtJ,IAAAqF,KAA1B,SAAAkE,EAA2BzB,GAAU,IAAA0B,EAAApE,EAAAqE,EAAAC,EAAAC,EAAAC,EAAAtC,EAAAuC,EAAAC,EAAA,OAAA9J,IAAAuB,KAAA,SAAAwI,GAAA,cAAAA,EAAAjE,KAAAiE,EAAA5F,MAAA,UAC7B2D,GAA6B,IAAfA,EAAgB,CAAAiC,EAAA5F,KAAA,eAAA4F,EAAAhG,OAAA,SAAS,MAAI,UAE1C+C,EAAMiB,QAAQD,GAAW,CAAAiC,EAAA5F,KAAA,SA2BpB,OA3BoB4F,EAAAjE,KAAA,EAAA0D,EAEuB9C,EAASoB,GAA/C1C,EAAIoE,EAAJpE,KAAMqE,EAAGD,EAAHC,IAAKC,EAAMF,EAANE,OAAQC,EAAUH,EAAVG,WAAYC,EAAGJ,EAAHI,IAChCtC,EAAO,CAACoC,SAAQC,aAAYvE,OAAMqE,MAAKG,MAAKb,WAAW,KAEvDc,EAAOH,EAAOrC,IAAG,eAAA2C,EAAAV,YAAAtJ,IAAAqF,KAAC,SAAA4E,EAAMxB,GAAK,IAAAyB,EAAAC,EAAAC,EAAAC,EAAA3B,EAAA,OAAA1I,IAAAuB,KAAA,SAAA+I,GAAA,cAAAA,EAAAxE,KAAAwE,EAAAnG,MAAA,OACiC,OAA1D+F,EAAWT,KAAOhB,EAAQA,EAAMgB,IAAG,GAAAtB,OAAMsB,EAAG,KAAAtB,OAAIM,EAAMO,IAAIsB,EAAAnG,KAAA,EACzCoG,MAAML,GAAS,OAAxB,OAARC,EAAQG,EAAA1G,KAAA0G,EAAAnG,KAAA,EACEgG,EAASK,OAAM,OACG,OAD5BJ,EAACE,EAAA1G,KACDyG,EAAc,GAAAlC,OAAM+B,EAAQ,gBAAAI,EAAAnG,KAAA,GACDoG,MAAMF,GAAe,eAAAC,EAAAnG,KAAA,GAAAmG,EAAA1G,KAAE4G,OAAI,QAAtD9B,EAAW4B,EAAA1G,KACjB2E,EAAc6B,EAAG3B,EAAOnB,EAAMoB,GAAa,yBAAA4B,EAAArE,SAAAgE,MAC9C,gBAAAQ,GAAA,OAAAT,EAAAZ,MAAA5G,KAAA6G,YAPsB,KAWlB1E,KACD2E,YAAAtJ,IAAAqF,KAAC,SAAAqF,IAAA,IAAAC,EAAA,OAAA3K,IAAAuB,KAAA,SAAAqJ,GAAA,cAAAA,EAAA9E,KAAA8E,EAAAzG,MAAA,cAAAyG,EAAAzG,KAAA,EACyBoG,MAAK,GAAApC,OAAIsB,EAAG,UAAQ,OAA7B,OAAPkB,EAAOC,EAAAhH,KAAAgH,EAAAzG,KAAA,EACKwG,EAAQH,OAAM,OAAhClD,EAAKuD,KAAID,EAAAhH,KAAA,wBAAAgH,EAAA3E,SAAAyE,KAFbpB,IAMJO,EAAKlF,KACD2E,YAAAtJ,IAAAqF,KAAC,SAAAyF,IAAA,OAAA9K,IAAAuB,KAAA,SAAAwJ,GAAA,cAAAA,EAAAjF,KAAAiF,EAAA5G,MAAA,cAAA4G,EAAA5G,KAAA,EAC2BoG,MAAK,GAAApC,OAAIsB,EAAG,cAAY,cAAAsB,EAAA5G,KAAA,EAAA4G,EAAAnH,KAAE4G,OAAI,OAAtDV,EAAQiB,EAAAnH,KAAA,wBAAAmH,EAAA9E,SAAA6E,KADZxB,IAGFS,EAAA5F,KAAA,GAEIuB,QAAQsF,IAAInB,GAAK,QAEvB/C,EAAMiB,QAAQD,GAAa,CACvBE,MAAM,CACFV,OACAlC,OACA0E,WACAmB,QAASxB,EACT3B,cAEJG,GAAI,GACN8B,EAAA5F,KAAA,wBAAA4F,EAAAjE,KAAA,GAAAiE,EAAAmB,GAAAnB,EAAA,SAAAA,EAAAhG,OAAA,SAGK,MAAI,yBAAAgG,EAAA9D,SAAAsD,EAAA,mBAGtBH,MAAA5G,KAAA6G,WAE2B,SAAA8B,IAI3B,OAJ2BA,EAAA7B,YAAAtJ,IAAAqF,KAA5B,SAAA+F,EAA6BtD,EAAYD,GAAQ,OAAA7H,IAAAuB,KAAA,SAAA8J,GAAA,cAAAA,EAAAvF,KAAAuF,EAAAlH,MAAA,OACJ,OAAzCmE,EAAS,CAAEzG,KAAM,WAAYgG,aAAYwD,EAAAlH,KAAA,EACnC8E,EAAYnB,GAAW,OAC7BQ,EAAS,CAAEzG,KAAM,aAAcgG,WAAUC,eAAc,wBAAAuD,EAAApF,SAAAmF,OAC1DhC,MAAA5G,KAAA6G,WAUD,OARAiC,oBAAU,YACkB,eAAAC,EAAAjC,YAAAtJ,IAAAqF,KAAG,SAAAmG,IAAA,OAAAxL,IAAAuB,KAAA,SAAAkK,GAAA,cAAAA,EAAA3F,KAAA2F,EAAAtH,MAAA,cAAAsH,EAAAtH,KAAA,EACjB8E,EAAYtC,GAAkB,OACpC2B,EAAS,CAAEzG,KAAM,kBAAmBiG,WAAYnB,IAAqB,wBAAA8E,EAAAxF,SAAAuF,MACxE,kBAHuB,OAAAD,EAAAnC,MAAA5G,KAAA6G,aAAA,EAIxBqC,IACD,CAAChF,EAAUC,EAAmBC,IAE1B,CAACa,EAhBP,SAE2BkE,EAAAC,GAAA,OAAAT,EAAA/B,MAAA5G,KAAA6G,2EClHhC,IA2OewC,EA3OW,SAAJpF,GAQhB,IAPJa,EAAIb,EAAJa,KACAwE,EAAUrF,EAAVqF,WACAC,EAAoBtF,EAApBsF,qBAEAC,EAAevF,EAAfuF,gBACAC,EAAWxF,EAAXwF,YACAxD,EAAKhC,EAALgC,MAIMyD,EAAuBH,EAI7BI,EAEsCC,mBAASJ,EAAkB,kBAAoB,gBAAeK,EAAAhE,YAAA8D,EAAA,GAA7FG,EAAWD,EAAA,GAAEE,EAAcF,EAAA,GAAAG,EACQJ,mBAAS,KAAKK,EAAApE,YAAAmE,EAAA,GAAjDE,EAAaD,EAAA,GAAEE,EAAgBF,EAAA,GAAAG,EACER,mBAAS,KAAKS,EAAAxE,YAAAuE,EAAA,GAA/CE,EAAYD,EAAA,GAAEE,EAAeF,EAAA,GAAAG,EACQZ,mBAAS,MAAKa,EAAA5E,YAAA2E,EAAA,GAAnDE,EAAcD,EAAA,GAAEE,EAAiBF,EAAA,GAAAG,EACwBhB,mBAAS,IAAGiB,EAAAhF,YAAA+E,EAAA,GAArEE,EAAwBD,EAAA,GAAEE,EAA2BF,EAAA,GAEtDG,EAAY,GAAArF,OAAMM,EAAK,OAAAN,OAAM2D,EAAU,OAAA3D,OAAM+D,EAAoB,MAAA/D,OAAKmE,EAAYmB,SAAS,YAAc,WAAa,WAgGtHC,EAAcC,kBAAQ,WAO1B,GAAIrG,GAAQgF,IAA2C,OAAzBJ,GAAkC9L,OAAOuF,KAAK2B,GAAMmG,SAAS,YACtC,OAAzBvB,GAAiC9L,OAAOuF,KAAK2B,GAAMmG,SAASvB,IACtF,OApFkB,WAKpB,IAAM0B,EACoB,MAAxB1B,EACI5E,EAAKgF,GACLhF,EAAK4E,GAAsBI,GAE7BuB,EACiB,OAAnBX,EACIA,EACyB,OAAzBhB,EACA5E,EAAK4E,GAAsC,eAC3C5E,EAAqB,eAE3BuG,EAAmBA,EAAiBxG,IAAI,SAACyG,GAAM,OAAKA,EAAOC,gBAE3D,IAAMC,EACqB,OAAzB9B,EACI5E,EAAK4E,GAAoC,aACzC5E,EAAmB,aAEnB2G,EAAqB,IAAIC,IAAIL,GAC7BM,EAAuB/N,OAAOgO,YAAYP,EAAiBxG,IAAI,SAACyG,EAAQO,GAAK,MAAK,CAACP,EAAQO,MAE3FC,EAASV,EAAMW,KAAK,SAACC,GAAO,OAAKpH,MAAMqH,QAAQD,KAE/CE,EAAa,IAAIR,IACjBS,EAAkBL,EACrBM,OAAO,SAACC,EAAQC,EAAMT,GAKrB,OAJKK,EAAWK,IAAID,IAASb,EAAmBc,IAAID,EAAKf,iBACvDc,EAAOlK,KAAK,CAAEmK,OAAMT,UACpBK,EAAWM,IAAIF,IAEVD,GACN,IACFI,KAAK,SAACpO,EAAGqO,GACR,OACEf,EAAqBtN,EAAEiO,KAAKf,eAC5BI,EAAqBe,EAAEJ,KAAKf,iBAI5BoB,EAAgBR,EAAgBtH,IAAI,SAAC+H,GAAM,OAAKA,EAAON,OAEvDO,EAAwBzB,EAAM5H,MAAM,GAAGqB,IAAK,SAACtG,EAAEJ,GAAC,OACpDgO,EAAgBtH,IAAI,SAACmH,GAAO,OAAKzN,EAAEyN,EAAQH,WAEvCnF,EAAK8E,EACLsB,EAAKH,EACLI,EAAeF,ECzGTT,OACZ,SAAC9I,EAAM3B,GAAI,OAAKA,EAAKkD,IAAI,SAACyH,EAAMnO,GAAC,OAAMmF,EAAKnF,IAAM,IAAIwH,OAAOhE,EAAKxD,OAClE,IDyGM6O,EACJD,EAAGvK,OAAS,GACRuK,EAAGvK,OAAS,EACE,IAAZuK,EAAGvK,OAAe,IACN,GAAZuK,EAAGvK,OAAc,IACP,GAAZuK,EAAGvK,OACHyK,EAKkB,KAJnBvG,EAAGlE,OAAS,GACTkE,EAAGlE,OAAS,EACE,IAAZkE,EAAGlE,OACS,GAAZkE,EAAGlE,OACO,GAAZkE,EAAGlE,QAOX,OALA2H,EAAiB6C,GACjBzC,EAAgB0C,GAIT,CAAEC,EAAGxG,EAAI9G,EAAGkN,EAAIK,EAAGJ,GAYjBK,IAER,CAACtD,EAAaJ,EAAsBgB,IAMvC,OACE2C,IAAAC,cAAAD,IAAAE,SAAA,KACGzI,GAAQoG,GACPmC,IAAAC,cAACE,IAAG,CAACC,MAAO,CAAER,MAAO,SACF,SAAhBxD,GACC4D,IAAAC,cAAAD,IAAAE,SAAA,KACEF,IAAAC,cAACI,IAAiB,CAChBD,MAAO,CAAEE,QAAS,SAClBC,MAAM,UACNC,SAAU,SAACpQ,EAAGqQ,GAxHT,IAACC,KAwH0BD,IAvH7BC,IAAajE,GAC1BC,EAAegE,IAuHL7P,MAAO4L,EACPkE,WAAS,GAETX,IAAAC,cAACW,IAAY,CAACC,eAAa,eAAeC,IAAI,uBAAuBjQ,MAAOsL,EAAkB,kBAAoB,gBAAgB,YAGlI6D,IAAAC,cAACW,IAAY,CAACC,eAAa,cAAcC,IAAI,4BAA4BjQ,MAAQsL,EAAkC,iBAAhB,eAAkC,YAKvI6D,IAAAC,cAACE,IAAG,KACFH,IAAAC,cAACc,IAAS,CACRC,GAAI,CAAEC,OAAQ,OAAQrB,MAAO,SAC7BsB,YAAY,uBACZC,WAAS,EACTC,QAAS,EACTC,QAAS,GACTb,SArIc,SAACc,GAC7B5D,EAA4B4D,EAAMC,OAAO1Q,QAqI3BA,MAAO4M,IAETuC,IAAAC,cAAA,WACAD,IAAAC,cAACI,IAAiB,CAACD,MAAO,CAAEE,QAAS,SAAWC,MAAM,WACpDP,IAAAC,cAACW,IAAY,CAACC,eAAa,oBAAoBW,QAtI1B,WACnClE,EAAkBG,EAAyBgE,MAAM,QAqImD5Q,MAAM,KAAI,gBAGhGmP,IAAAC,cAACW,IAAY,CAACC,eAAa,mBAAmBW,QArI1B,WAClClE,EAAkB,MAClBI,EAA4B,KAmIsE7M,MAAM,KAAI,YAQtGmP,IAAAC,cAACE,IAAG,CAACa,GAAI,CAAEC,OAAQ,SAAWtD,GAC9BqC,IAAAC,cAACE,IAAG,CAACa,GAAI,CAAEU,UAAW,SAAU9B,MAAO,SACrCI,IAAAC,cAAC0B,IAAI,CACHlK,KAAM,CACJ,CACEoI,EAAGhC,EAAYgC,EACftN,EAAGsL,EAAYtL,EACfuN,EAAGjC,EAAYiC,EACf9N,KAAM,UACN4P,WAAY,YAGhBC,OAAQ,CACNC,aAAa,EACbC,uBAAwB,CACtB,kBACA,wBACA,SACA,QACA,WACA,UACA,WACA,YACA,cACA,eACA,wBACA,qBAGJC,OAAQ,CACNrC,OAAQ9C,EACR+C,MAAO3C,EACPgE,OAAQ,OACRgB,MAAO,CACLC,KAAM,MACNC,UAAW,GACXC,gBAAgB,EAChBC,YAAY,GAEdC,MAAO,CACLC,UAAU,EACVC,UAAW,WACXH,YAAY,EACZI,WAAW,iDEhOd,SAASC,EAAqB9L,GAA2C,IAAxC+L,EAAc/L,EAAd+L,eAAgBtG,EAAoBzF,EAApByF,qBAAoBX,EACrB,OAAzBW,EAChCsG,EACAA,EAAetG,GAFXgB,EAAc3B,EAAd2B,eAAgBuF,EAAOlH,EAAPkH,QAAOtG,EAIPC,mBAAS,MAAKC,EAAAhE,YAAA8D,EAAA,GAA/B7E,EAAI+E,EAAA,GAAEqG,EAAOrG,EAAA,GAAAG,EAC4BJ,mBAAS,MAAKK,EAAApE,YAAAmE,EAAA,GAAvDmG,EAAgBlG,EAAA,GAAEmG,EAAmBnG,EAAA,GAwF5C,OAvCAnB,oBAAU,WACR,IAAMuH,EAAUzS,OAAOuF,KAAK8M,GAASK,OAAO,SAAAC,GAAC,MAAM,SAAJA,IAEzCC,EAAUH,EAAQxL,IAAI,SAAC4L,GAAM,MAAM,CACrCC,MAAOD,EACPE,WAAYF,EAAOG,cACnBvR,KAA+B,YAAzBoR,EAAOG,cAA8B,SAAW,SACtD3D,MAAgC,YAAzBwD,EAAOG,cAA8B,GAAK,OAGrDJ,EAAQK,QAAQ,CACdH,MAAO,OACPC,WAAY,OACZ1D,MAAO,MAGT,IAAM6D,EAAgBN,EAAQ3L,IAAI,SAAAtG,GAAC,OAAI0R,EAAQ1R,EAAEmS,SACjDI,EAAcvQ,QAAQ,SAAAhC,GAAC,cAAUA,EAAEqE,OACnC,IAEMmO,EAFwBD,ED3ElB1E,OACZ,SAAC9I,EAAM3B,GAAI,OAAK/D,OAAOwC,OAAOuB,GAAMkD,IAAI,SAACyH,EAAMnO,GAAC,OAAMmF,EAAKnF,IAAM,IAAIwH,OAAO2G,MAC5E,IC2EwBzH,IAAI,SAACmM,EAAKnF,GAChC,IAAMQ,EAAS,CACb7F,GAAIqF,EACJoF,KAAMD,EAAI,IAMZ,OAJAX,EAAQ9P,QAAQ,SAACkQ,EAAQ5E,GACvBQ,EAAOoE,GAAUO,EAAInF,EAAQ,KAGxBQ,IAGT+D,EAAoBW,GACpBb,EAAQ,CACNa,KAAMA,EACNP,QAASA,KAEV,CAAC9G,IAGF2D,IAAAC,cAAAD,IAAAE,SAAA,KACY,OAATzI,GAAoC,OAAnB4F,GAChB2C,IAAAC,cAAC4D,IAAQtT,OAAAuT,OAAA,CACP9C,GAAI,CAAEpB,MAAO,QACbmE,MAAO,CAAEC,QA7EK,WAwBpB,OACEhE,IAAAC,cAACgE,IAAoB,KACnBjE,IAAAC,cAACiE,IAAiB,CAACC,aAAc,CAAEC,sBAAsB,KACzDpE,IAAAC,cAACoE,IAAM,CAAC7C,QAVU,WACpBqB,EAAQ,CACNM,QAAS1L,EAAK0L,QACdO,KAAMZ,MAO0B,eAChC9C,IAAAC,cAACoE,IAAM,CAAC7C,QA3BW,WACrB,GAAKnE,EAAL,CAEA,IACMiH,EAnBe,SAACC,GACxB,IAAMC,EAAOjU,OAAOqB,OAAO,MAE3B,OAAO2S,EAAWxF,OAAO,SAAC0F,EAAad,GAOrC,OANMA,EAAIC,QAAQY,EAEPb,EAAIe,KAAOD,EAAYD,EAAKb,EAAIC,OAAOc,OAChDD,EAAYD,EAAKb,EAAIC,OAASD,GAF9Ba,EAAKb,EAAIC,MAAQa,EAAY3P,KAAK6O,GAAO,EAKpCc,GACN,IAQqBE,CADElN,EAAKiM,KAAKT,OAAO,SAACU,GAAG,OAAKtG,EAAeO,SAAS+F,EAAIC,SAG9EU,EAAclF,KACZ,SAACpO,EAAGqO,GAAC,OAAKhC,EAAeuH,QAAQ5T,EAAE4S,KAAK1F,eAAiBb,EAAeuH,QAAQvF,EAAEuE,KAAK1F,iBAGzF2E,EAAQ,CACNM,QAAS1L,EAAK0L,QACdO,KAAMY,OAe2B,uBAkD3B7M,EAAI,CACRoN,WAAY,CACVC,gBAAiB,CACfC,SAAU,6ECxGxB,SAASC,EAAiBC,GACtB,OACEjF,IAAAC,cAACiF,IAAU3U,OAAAuT,OAAA,CACTvD,MAAM,gBACN4E,UAAWF,EAAMG,YAAYC,QAAQC,kBACjCL,EAAMM,YAETN,EAAMO,UAKb,SAASC,EAAc7O,GAAyB,IAAtB8O,EAAQ9O,EAAR8O,SAAaT,EAAKU,YAAA/O,EAAA,cAC1C,OAAOoJ,IAAAC,cAAA,MAAA1P,OAAAuT,OAAA,CAAK8B,IAAKF,GAAcT,IAGnC,SAASY,EAAQZ,GACb,OACEjF,IAAAC,cAACc,IAASxQ,OAAAuT,OAAA,CACRgC,WAAS,EACTC,WAAY,CACVN,iBACAO,WAAUC,YAAA,CACRd,UAAWF,EAAMG,YAAYC,QAAQa,MACrCR,SAAUT,EAAMkB,SAChBX,SAAUP,EAAMO,UACbP,EAAMM,cAGTN,EAAMG,YAAYgB,iBAM5B,SAASC,EAAOpB,GACd,OACEjF,IAAAC,cAACqG,IAAQ/V,OAAAuT,OAAA,CACPyC,UAAWtB,EAAMkB,SACjBK,SAAUvB,EAAMwB,UAChBC,UAAU,MACVtG,MAAO,CACLuG,WAAY1B,EAAM2B,WAAa,IAAM,MAEnC3B,EAAMM,YAETN,EAAMO,UAKb,SAASqB,EAAY5B,GACnB,OACEjF,IAAAC,cAACiF,IAAU3U,OAAAuT,OAAA,CACTvD,MAAM,gBACN4E,UAAWF,EAAMG,YAAYC,QAAQnE,aACjC+D,EAAMM,YAETN,EAAMO,UAKb,SAASsB,EAAY7B,GACnB,OACEjF,IAAAC,cAACiF,IAAU3U,OAAAuT,OAAA,CAACqB,UAAWF,EAAMG,YAAYC,QAAQ0B,aAAiB9B,EAAMM,YACrEN,EAAMO,UAKb,SAASwB,EAAe/B,GACtB,OAAOjF,IAAAC,cAAA,OAAKkF,UAAWF,EAAMG,YAAYC,QAAQ4B,gBAAiBhC,EAAMO,UAG1E,SAAS0B,EAAWjC,GAClB,OACEjF,IAAAC,cAACkH,IAAI,CACHC,UAAW,EACXC,MAAOpC,EAAMO,SACbL,UAAWmC,IAAWrC,EAAMG,YAAYC,QAAQkC,KAAIC,YAAA,GACjDvC,EAAMG,YAAYC,QAAQoC,YAAcxC,EAAMwB,YAEjDiB,SAAUzC,EAAM0C,YAAYnG,QAC5BoG,WAAY5H,IAAAC,cAAC4H,IAAe5C,EAAM0C,eAKxC,SAASG,EAAK7C,GACZ,OACEjF,IAAAC,cAAC8H,IAAKxX,OAAAuT,OAAA,CAACkE,QAAM,EAAC7C,UAAWF,EAAMG,YAAYC,QAAQ4C,OAAWhD,EAAMM,YACjEN,EAAMO,UAIf,IAAM0C,EAAa,CACfrC,UACAiC,OACAZ,aACAlC,mBACAqB,SACAQ,cACAC,cACAE,kBAEImB,EAAuB,CAC3BtC,UACAiC,OACAZ,aACAlC,mBACAqB,SACAQ,cACAC,cACAE,iBACAoB,kBAAkB,kBAAM,MAAMC,mBAAmB,kBAAM,OAGlD,SAASC,EAAgBrD,GAC5B,OAAOjF,IAAAC,cAACsI,IAAK,KACXvI,IAAAC,cAACuI,IAAWjY,OAAAuT,OAAA,GACJmB,EAAK,CAETmB,eAAgB,CAEZqC,gBAAiB,CACbC,QAAQ,IAGhBR,WAAYA,MAMf,IAAMS,EAA2B3I,IAAM4I,WAAW,SAAC3D,EAAOW,GAE/D,IACI9U,EAAI,EACR,OAAOkP,IAAAC,cAACsI,IAAK,KACXvI,IAAAC,cAAC4I,IAAetY,OAAAuT,OAAA,CACZ8B,IAAKA,GACDX,EAAK,CACT6D,aAAc,SAAApN,EAAUqN,GAAH,OAAArN,EAAL2L,MAAwBnJ,cAAc0G,QAAQmE,EAAM7K,gBAAkB,GAAKpN,IAN7E,IAOdkY,cAAe,WAAQlY,EAAI,GAE3BsV,eAAgB,CAEZqC,gBAAiB,CACbC,QAAQ,IAGhBR,WAAYC,sBC/JtBhY,GAAA,kBAAAC,GAAA,IAAAC,EAAAD,EAAA,GAAAE,EAAAC,OAAAC,UAAAC,EAAAH,EAAAI,eAAAC,EAAAJ,OAAAK,gBAAA,SAAAP,EAAAD,EAAAE,GAAAD,EAAAD,GAAAE,EAAAO,OAAAC,EAAA,mBAAAC,cAAA,GAAAC,EAAAF,EAAAG,UAAA,aAAAC,EAAAJ,EAAAK,eAAA,kBAAAC,EAAAN,EAAAO,aAAA,yBAAAC,EAAAjB,EAAAD,EAAAE,GAAA,OAAAC,OAAAK,eAAAP,EAAAD,EAAA,CAAAS,MAAAP,EAAAiB,YAAA,EAAAC,cAAA,EAAAC,UAAA,IAAApB,EAAAD,GAAA,IAAAkB,EAAA,aAAAjB,GAAAiB,EAAA,SAAAjB,EAAAD,EAAAE,GAAA,OAAAD,EAAAD,GAAAE,GAAA,SAAAoB,EAAArB,EAAAD,EAAAE,EAAAG,GAAA,IAAAK,EAAAV,KAAAI,qBAAAmB,EAAAvB,EAAAuB,EAAAX,EAAAT,OAAAqB,OAAAd,EAAAN,WAAAU,EAAA,IAAAW,EAAApB,GAAA,WAAAE,EAAAK,EAAA,WAAAH,MAAAiB,EAAAzB,EAAAC,EAAAY,KAAAF,EAAA,SAAAe,EAAA1B,EAAAD,EAAAE,GAAA,WAAA0B,KAAA,SAAAC,IAAA5B,EAAA6B,KAAA9B,EAAAE,IAAA,MAAAD,GAAA,OAAA2B,KAAA,QAAAC,IAAA5B,IAAAD,EAAAsB,OAAA,IAAAS,EAAA,iBAAAC,EAAA,iBAAAC,EAAA,YAAAC,EAAA,YAAAC,EAAA,YAAAZ,KAAA,SAAAa,KAAA,SAAAC,KAAA,IAAAC,EAAA,GAAApB,EAAAoB,EAAA1B,EAAA,kBAAA2B,OAAA,IAAAC,EAAArC,OAAAsC,eAAAC,EAAAF,OAAAG,EAAA,MAAAD,OAAAxC,GAAAG,EAAAyB,KAAAY,EAAA9B,KAAA0B,EAAAI,GAAA,IAAAE,EAAAP,EAAAjC,UAAAmB,EAAAnB,UAAAD,OAAAqB,OAAAc,GAAA,SAAAO,EAAA5C,GAAA,0BAAA6C,QAAA,SAAA9C,GAAAkB,EAAAjB,EAAAD,EAAA,SAAAC,GAAA,OAAAsC,KAAAQ,QAAA/C,EAAAC,OAAA,SAAA+C,EAAA/C,EAAAD,GAAA,SAAAiD,EAAA/C,EAAAK,EAAAG,EAAAE,GAAA,IAAAE,EAAAa,EAAA1B,EAAAC,GAAAD,EAAAM,GAAA,aAAAO,EAAAc,KAAA,KAAAZ,EAAAF,EAAAe,IAAAE,EAAAf,EAAAP,MAAA,OAAAsB,GAAA,iBAAAA,GAAA1B,EAAAyB,KAAAC,EAAA,WAAA/B,EAAAkD,QAAAnB,EAAAoB,SAAAC,KAAA,SAAAnD,GAAAgD,EAAA,OAAAhD,EAAAS,EAAAE,IAAA,SAAAX,GAAAgD,EAAA,QAAAhD,EAAAS,EAAAE,KAAAZ,EAAAkD,QAAAnB,GAAAqB,KAAA,SAAAnD,GAAAe,EAAAP,MAAAR,EAAAS,EAAAM,IAAA,SAAAf,GAAA,OAAAgD,EAAA,QAAAhD,EAAAS,EAAAE,OAAAE,EAAAe,KAAA,IAAA3B,EAAAK,EAAAgC,KAAA,WAAA9B,MAAA,SAAAR,EAAAI,GAAA,SAAAgD,IAAA,WAAArD,EAAA,SAAAA,EAAAE,GAAA+C,EAAAhD,EAAAI,EAAAL,EAAAE,KAAA,OAAAA,MAAAkD,KAAAC,YAAA,SAAA3B,EAAA1B,EAAAE,EAAAG,GAAA,IAAAE,EAAAwB,EAAA,gBAAArB,EAAAE,GAAA,GAAAL,IAAA0B,EAAA,MAAAqB,MAAA,mCAAA/C,IAAA2B,EAAA,cAAAxB,EAAA,MAAAE,EAAA,OAAAH,MAAAR,EAAAsD,MAAA,OAAAlD,EAAAmD,OAAA9C,EAAAL,EAAAwB,IAAAjB,IAAA,KAAAE,EAAAT,EAAAoD,SAAA,GAAA3C,EAAA,KAAAE,EAAA0C,EAAA5C,EAAAT,GAAA,GAAAW,EAAA,IAAAA,IAAAmB,EAAA,gBAAAnB,GAAA,YAAAX,EAAAmD,OAAAnD,EAAAsD,KAAAtD,EAAAuD,MAAAvD,EAAAwB,SAAA,aAAAxB,EAAAmD,OAAA,IAAAjD,IAAAwB,EAAA,MAAAxB,EAAA2B,EAAA7B,EAAAwB,IAAAxB,EAAAwD,kBAAAxD,EAAAwB,SAAA,WAAAxB,EAAAmD,QAAAnD,EAAAyD,OAAA,SAAAzD,EAAAwB,KAAAtB,EAAA0B,EAAA,IAAAK,EAAAX,EAAA3B,EAAAE,EAAAG,GAAA,cAAAiC,EAAAV,KAAA,IAAArB,EAAAF,EAAAkD,KAAArB,EAAAF,EAAAM,EAAAT,MAAAM,EAAA,gBAAA1B,MAAA6B,EAAAT,IAAA0B,KAAAlD,EAAAkD,MAAA,UAAAjB,EAAAV,OAAArB,EAAA2B,EAAA7B,EAAAmD,OAAA,QAAAnD,EAAAwB,IAAAS,EAAAT,OAAA,SAAA6B,EAAA1D,EAAAE,GAAA,IAAAG,EAAAH,EAAAsD,OAAAjD,EAAAP,EAAAa,SAAAR,GAAA,GAAAE,IAAAN,EAAA,OAAAC,EAAAuD,SAAA,eAAApD,GAAAL,EAAAa,SAAAkD,SAAA7D,EAAAsD,OAAA,SAAAtD,EAAA2B,IAAA5B,EAAAyD,EAAA1D,EAAAE,GAAA,UAAAA,EAAAsD,SAAA,WAAAnD,IAAAH,EAAAsD,OAAA,QAAAtD,EAAA2B,IAAA,IAAAmC,UAAA,oCAAA3D,EAAA,aAAA8B,EAAA,IAAAzB,EAAAiB,EAAApB,EAAAP,EAAAa,SAAAX,EAAA2B,KAAA,aAAAnB,EAAAkB,KAAA,OAAA1B,EAAAsD,OAAA,QAAAtD,EAAA2B,IAAAnB,EAAAmB,IAAA3B,EAAAuD,SAAA,KAAAtB,EAAA,IAAAvB,EAAAF,EAAAmB,IAAA,OAAAjB,IAAA2C,MAAArD,EAAAF,EAAAiE,YAAArD,EAAAH,MAAAP,EAAAgE,KAAAlE,EAAAmE,QAAA,WAAAjE,EAAAsD,SAAAtD,EAAAsD,OAAA,OAAAtD,EAAA2B,IAAA5B,GAAAC,EAAAuD,SAAA,KAAAtB,GAAAvB,GAAAV,EAAAsD,OAAA,QAAAtD,EAAA2B,IAAA,IAAAmC,UAAA,oCAAA9D,EAAAuD,SAAA,KAAAtB,GAAA,SAAAiC,EAAAnE,GAAA,IAAAD,EAAA,CAAAqE,OAAApE,EAAA,SAAAA,IAAAD,EAAAsE,SAAArE,EAAA,SAAAA,IAAAD,EAAAuE,WAAAtE,EAAA,GAAAD,EAAAwE,SAAAvE,EAAA,IAAAsC,KAAAkC,WAAAC,KAAA1E,GAAA,SAAA2E,EAAA1E,GAAA,IAAAD,EAAAC,EAAA2E,YAAA,GAAA5E,EAAA4B,KAAA,gBAAA5B,EAAA6B,IAAA5B,EAAA2E,WAAA5E,EAAA,SAAAyB,EAAAxB,GAAAsC,KAAAkC,WAAA,EAAAJ,OAAA,SAAApE,EAAA6C,QAAAsB,EAAA7B,WAAAsC,OAAA,YAAAlC,EAAA3C,GAAA,GAAAA,GAAA,KAAAA,EAAA,KAAAE,EAAAF,EAAAY,GAAA,GAAAV,EAAA,OAAAA,EAAA4B,KAAA9B,GAAA,sBAAAA,EAAAkE,KAAA,OAAAlE,EAAA,IAAA8E,MAAA9E,EAAA+E,QAAA,KAAAxE,GAAA,EAAAG,EAAA,SAAAwD,IAAA,OAAA3D,EAAAP,EAAA+E,QAAA,GAAA1E,EAAAyB,KAAA9B,EAAAO,GAAA,OAAA2D,EAAAzD,MAAAT,EAAAO,GAAA2D,EAAAX,MAAA,EAAAW,EAAA,OAAAA,EAAAzD,MAAAR,EAAAiE,EAAAX,MAAA,EAAAW,GAAA,OAAAxD,EAAAwD,KAAAxD,GAAA,UAAAsD,iBAAAhE,EAAA,2BAAAoC,EAAAhC,UAAAiC,EAAA9B,EAAAqC,EAAA,eAAAnC,MAAA4B,EAAAjB,cAAA,IAAAb,EAAA8B,EAAA,eAAA5B,MAAA2B,EAAAhB,cAAA,IAAAgB,EAAA4C,YAAA9D,EAAAmB,EAAArB,EAAA,qBAAAhB,EAAAiF,oBAAA,SAAAhF,GAAA,IAAAD,EAAA,mBAAAC,KAAAiF,YAAA,QAAAlF,QAAAoC,GAAA,uBAAApC,EAAAgF,aAAAhF,EAAAmF,QAAAnF,EAAAoF,KAAA,SAAAnF,GAAA,OAAAE,OAAAkF,eAAAlF,OAAAkF,eAAApF,EAAAoC,IAAApC,EAAAqF,UAAAjD,EAAAnB,EAAAjB,EAAAe,EAAA,sBAAAf,EAAAG,UAAAD,OAAAqB,OAAAoB,GAAA3C,GAAAD,EAAAuF,MAAA,SAAAtF,GAAA,OAAAkD,QAAAlD,IAAA4C,EAAAG,EAAA5C,WAAAc,EAAA8B,EAAA5C,UAAAU,EAAA,kBAAAyB,OAAAvC,EAAAgD,gBAAAhD,EAAAwF,MAAA,SAAAvF,EAAAC,EAAAG,EAAAE,EAAAG,QAAA,IAAAA,MAAA+E,SAAA,IAAA7E,EAAA,IAAAoC,EAAA1B,EAAArB,EAAAC,EAAAG,EAAAE,GAAAG,GAAA,OAAAV,EAAAiF,oBAAA/E,GAAAU,IAAAsD,OAAAd,KAAA,SAAAnD,GAAA,OAAAA,EAAAsD,KAAAtD,EAAAQ,MAAAG,EAAAsD,UAAArB,EAAAD,GAAA1B,EAAA0B,EAAA5B,EAAA,aAAAE,EAAA0B,EAAAhC,EAAA,kBAAA2B,OAAArB,EAAA0B,EAAA,mDAAA5C,EAAA0F,KAAA,SAAAzF,GAAA,IAAAD,EAAAG,OAAAF,GAAAC,EAAA,WAAAG,KAAAL,EAAAE,EAAAwE,KAAArE,GAAA,OAAAH,EAAAyF,UAAA,SAAAzB,IAAA,KAAAhE,EAAA6E,QAAA,KAAA9E,EAAAC,EAAA0F,MAAA,GAAA3F,KAAAD,EAAA,OAAAkE,EAAAzD,MAAAR,EAAAiE,EAAAX,MAAA,EAAAW,EAAA,OAAAA,EAAAX,MAAA,EAAAW,IAAAlE,EAAA2C,SAAAlB,EAAArB,UAAA,CAAA8E,YAAAzD,EAAAoD,MAAA,SAAA7E,GAAA,GAAAuC,KAAAsD,KAAA,EAAAtD,KAAA2B,KAAA,EAAA3B,KAAAoB,KAAApB,KAAAqB,MAAA3D,EAAAsC,KAAAgB,MAAA,EAAAhB,KAAAkB,SAAA,KAAAlB,KAAAiB,OAAA,OAAAjB,KAAAV,IAAA5B,EAAAsC,KAAAkC,WAAA3B,QAAA6B,IAAA3E,EAAA,QAAAE,KAAAqC,KAAA,MAAArC,EAAA4F,OAAA,IAAAzF,EAAAyB,KAAAS,KAAArC,KAAA4E,OAAA5E,EAAA6F,MAAA,MAAAxD,KAAArC,GAAAD,IAAA+F,KAAA,WAAAzD,KAAAgB,MAAA,MAAAtD,EAAAsC,KAAAkC,WAAA,GAAAG,WAAA,aAAA3E,EAAA2B,KAAA,MAAA3B,EAAA4B,IAAA,OAAAU,KAAA0D,MAAApC,kBAAA,SAAA7D,GAAA,GAAAuC,KAAAgB,KAAA,MAAAvD,EAAA,IAAAE,EAAAqC,KAAA,SAAA2D,EAAA7F,EAAAE,GAAA,OAAAK,EAAAgB,KAAA,QAAAhB,EAAAiB,IAAA7B,EAAAE,EAAAgE,KAAA7D,EAAAE,IAAAL,EAAAsD,OAAA,OAAAtD,EAAA2B,IAAA5B,KAAAM,EAAA,QAAAA,EAAAgC,KAAAkC,WAAAM,OAAA,EAAAxE,GAAA,IAAAA,EAAA,KAAAG,EAAA6B,KAAAkC,WAAAlE,GAAAK,EAAAF,EAAAkE,WAAA,YAAAlE,EAAA2D,OAAA,OAAA6B,EAAA,UAAAxF,EAAA2D,QAAA9B,KAAAsD,KAAA,KAAA/E,EAAAT,EAAAyB,KAAApB,EAAA,YAAAM,EAAAX,EAAAyB,KAAApB,EAAA,iBAAAI,GAAAE,EAAA,IAAAuB,KAAAsD,KAAAnF,EAAA4D,SAAA,OAAA4B,EAAAxF,EAAA4D,UAAA,MAAA/B,KAAAsD,KAAAnF,EAAA6D,WAAA,OAAA2B,EAAAxF,EAAA6D,iBAAA,GAAAzD,GAAA,GAAAyB,KAAAsD,KAAAnF,EAAA4D,SAAA,OAAA4B,EAAAxF,EAAA4D,UAAA,YAAAtD,EAAA,MAAAsC,MAAA,6CAAAf,KAAAsD,KAAAnF,EAAA6D,WAAA,OAAA2B,EAAAxF,EAAA6D,gBAAAT,OAAA,SAAA7D,EAAAD,GAAA,QAAAE,EAAAqC,KAAAkC,WAAAM,OAAA,EAAA7E,GAAA,IAAAA,EAAA,KAAAK,EAAAgC,KAAAkC,WAAAvE,GAAA,GAAAK,EAAA8D,QAAA9B,KAAAsD,MAAAxF,EAAAyB,KAAAvB,EAAA,eAAAgC,KAAAsD,KAAAtF,EAAAgE,WAAA,KAAA7D,EAAAH,EAAA,OAAAG,IAAA,UAAAT,GAAA,aAAAA,IAAAS,EAAA2D,QAAArE,MAAAU,EAAA6D,aAAA7D,EAAA,UAAAE,EAAAF,IAAAkE,WAAA,UAAAhE,EAAAgB,KAAA3B,EAAAW,EAAAiB,IAAA7B,EAAAU,GAAA6B,KAAAiB,OAAA,OAAAjB,KAAA2B,KAAAxD,EAAA6D,WAAApC,GAAAI,KAAA4D,SAAAvF,IAAAuF,SAAA,SAAAlG,EAAAD,GAAA,aAAAC,EAAA2B,KAAA,MAAA3B,EAAA4B,IAAA,gBAAA5B,EAAA2B,MAAA,aAAA3B,EAAA2B,KAAAW,KAAA2B,KAAAjE,EAAA4B,IAAA,WAAA5B,EAAA2B,MAAAW,KAAA0D,KAAA1D,KAAAV,IAAA5B,EAAA4B,IAAAU,KAAAiB,OAAA,SAAAjB,KAAA2B,KAAA,kBAAAjE,EAAA2B,MAAA5B,IAAAuC,KAAA2B,KAAAlE,GAAAmC,GAAAiE,OAAA,SAAAnG,GAAA,QAAAD,EAAAuC,KAAAkC,WAAAM,OAAA,EAAA/E,GAAA,IAAAA,EAAA,KAAAE,EAAAqC,KAAAkC,WAAAzE,GAAA,GAAAE,EAAAqE,aAAAtE,EAAA,OAAAsC,KAAA4D,SAAAjG,EAAA0E,WAAA1E,EAAAsE,UAAAG,EAAAzE,GAAAiC,IAAAkE,MAAA,SAAApG,GAAA,QAAAD,EAAAuC,KAAAkC,WAAAM,OAAA,EAAA/E,GAAA,IAAAA,EAAA,KAAAE,EAAAqC,KAAAkC,WAAAzE,GAAA,GAAAE,EAAAmE,SAAApE,EAAA,KAAAI,EAAAH,EAAA0E,WAAA,aAAAvE,EAAAuB,KAAA,KAAArB,EAAAF,EAAAwB,IAAA8C,EAAAzE,GAAA,OAAAK,GAAA,MAAA+C,MAAA,0BAAAgD,cAAA,SAAAtG,EAAAE,EAAAG,GAAA,OAAAkC,KAAAkB,SAAA,CAAA5C,SAAA8B,EAAA3C,GAAAiE,WAAA/D,EAAAiE,QAAA9D,GAAA,SAAAkC,KAAAiB,SAAAjB,KAAAV,IAAA5B,GAAAkC,IAAAnC,EAae,SAAS6Y,GAAkBrS,GAA2G,IAAzGyO,EAAOzO,EAAPyO,QAAS6D,EAAQtS,EAARsS,SAAUjP,EAAQrD,EAARqD,SAAUkP,EAAcvS,EAAduS,eAAgB/M,EAAWxF,EAAXwF,YAAarD,EAAInC,EAAJmC,KAAME,EAAYrC,EAAZqC,aAAcD,EAAcpC,EAAdoC,eAAgBoQ,EAAQxS,EAARwS,SAAQzM,EAClHJ,mBAAS,IAAGK,EAAApE,YAAAmE,EAAA,GAAjC0M,EAAMzM,EAAA,GAAE0M,EAAS1M,EAAA,GAClB2M,EAAsBrS,iBAAO,MAE7BsS,EAAc1L,kBAAQ,kBAAM7E,EAAazB,IAAI,SAAAtG,GAAC,MAAK,CAACmW,MAAOnW,EAAGuY,QAChEnS,YAAI,IAAI+G,IAAItF,EAAK7H,KAAKsG,IAAI,SAAAkS,GAAE,MAAK,CAAC7Y,MAAO,CAAC8Y,MAAOzY,EAAG0Y,KAAMF,GAAKrC,MAAOqC,SAAU,CAAC3Q,EAAME,IAErF4Q,EAAa/L,kBAAQ,WACvB,IAAIgM,EAAS,CACT,CAACzC,MAAO,gBAAiBoC,QAASxQ,EAAazB,IAAI,SAAAtG,GAAC,MAAK,CAACL,MAAOK,EAAGmW,MAAOnW,EAAGyY,MAAO,oBACrF,CAACtC,MAAO,kBAAmBoC,QAASzQ,EAAexB,IAAK,SAAAtG,GAAC,MAAK,CAACL,MAAOK,EAAGmW,MAAOnW,EAAGyY,MAAO,uBAQ9F,OANGP,GACC7Y,OAAOwZ,QAAQX,GAAUjT,QAAQJ,UAAU7C,QAAQ,SAAAwI,GAAA,IAAAvB,EAAA3B,YAAAkD,EAAA,GAAEsO,EAAS7P,EAAA,GAAE8P,EAAa9P,EAAA,UACzE2P,EAAOhV,KAAK,CAACuS,MAAO2C,EAAWP,QAASQ,EAAczS,IAAI,SAAAtG,GAAC,MAAK,CAACL,MAAOK,EAAGmW,MAAOnW,EAAGyY,MAAOK,SAGpGF,EAAOhV,KAAK,CAACuS,MAAO,UAAWoC,QAASxP,EAASzC,IAAI,SAAAtG,GAAC,MAAK,CAACL,MAAOK,EAAGmW,MAAOnW,EAAGyY,MAAO,eAChFG,GACR,CAAC7Q,EAAcD,EAAgBoQ,EAAUnP,IAOhB,SAAAiQ,IAO3B,OAP2BA,EAAAzQ,YAAAtJ,KAAAqF,KAA5B,SAAAmG,EAA6BvL,GAAC,IAAA+Z,EAAAC,EAAA,OAAAja,KAAAuB,KAAA,SAAAkK,GAAA,cAAAA,EAAA3F,KAAA2F,EAAAtH,MAAA,OACQ,KAA5B6V,EAAU/Z,EAAIA,EAAES,MAAQ,OACdsZ,KAAWpR,EAAK,CAAA6C,EAAAtH,KAAA,QACgC,OAAxD8V,EAAuB,YAAZha,EAAEuZ,MAAsB,UAAY,UAAS/N,EAAAtH,KAAA,EACtD6U,EAAeiB,EAAUD,GAAQ,OAE3CjB,EAASmB,WAAWF,GAAS,wBAAAvO,EAAAxF,SAAAuF,OAChCpC,MAAA5G,KAAA6G,WAED,MAAmB,SAAhB4C,EACQ,KAIP4D,IAAAC,cAAA,WACID,IAAAC,cAACqK,IAAW,CAACnF,UAAWE,EAAQkF,cAAeC,QAAQ,YACnDxK,IAAAC,cAACqI,EAAe,CACZjD,QAASA,EACToE,QAASD,EACT3Y,MAAOwY,EACP7I,SAzBhB,SAA4BpQ,GACxBkZ,EAAUlZ,GACV8Y,EAASuB,UAAUra,IAwBP8Q,YAAY,UACZwJ,SAAO,KAGf1K,IAAAC,cAACqK,IAAW,CAACnF,UAAWE,EAAQsF,aAAcH,QAAQ,YAClDxK,IAAAC,cAAC0I,EAAwB,CACrBtD,QAASA,EACToE,QAASI,EACTjE,IAAK2D,EACLqB,kBAAmB,SAAC9X,GAAC,0BAAAwF,OAAwBxF,IAC7CjC,MAAOqY,EAASiB,QAAU,CAACtZ,MAAOqY,EAASiB,QAAS9C,MAAO6B,EAASiB,SAAW,KAC/E3J,SAlCf,SAE2BnH,GAAA,OAAA6Q,EAAA3Q,MAAA5G,KAAA6G,YAiCZ0H,YAAY,SACZ2J,aAAW,oBCzE/B1a,GAAA,kBAAAC,GAAA,IAAAC,EAAAD,EAAA,GAAAE,EAAAC,OAAAC,UAAAC,EAAAH,EAAAI,eAAAC,EAAAJ,OAAAK,gBAAA,SAAAP,EAAAD,EAAAE,GAAAD,EAAAD,GAAAE,EAAAO,OAAAC,EAAA,mBAAAC,cAAA,GAAAC,EAAAF,EAAAG,UAAA,aAAAC,EAAAJ,EAAAK,eAAA,kBAAAC,EAAAN,EAAAO,aAAA,yBAAAC,EAAAjB,EAAAD,EAAAE,GAAA,OAAAC,OAAAK,eAAAP,EAAAD,EAAA,CAAAS,MAAAP,EAAAiB,YAAA,EAAAC,cAAA,EAAAC,UAAA,IAAApB,EAAAD,GAAA,IAAAkB,EAAA,aAAAjB,GAAAiB,EAAA,SAAAjB,EAAAD,EAAAE,GAAA,OAAAD,EAAAD,GAAAE,GAAA,SAAAoB,EAAArB,EAAAD,EAAAE,EAAAG,GAAA,IAAAK,EAAAV,KAAAI,qBAAAmB,EAAAvB,EAAAuB,EAAAX,EAAAT,OAAAqB,OAAAd,EAAAN,WAAAU,EAAA,IAAAW,EAAApB,GAAA,WAAAE,EAAAK,EAAA,WAAAH,MAAAiB,EAAAzB,EAAAC,EAAAY,KAAAF,EAAA,SAAAe,EAAA1B,EAAAD,EAAAE,GAAA,WAAA0B,KAAA,SAAAC,IAAA5B,EAAA6B,KAAA9B,EAAAE,IAAA,MAAAD,GAAA,OAAA2B,KAAA,QAAAC,IAAA5B,IAAAD,EAAAsB,OAAA,IAAAS,EAAA,iBAAAC,EAAA,iBAAAC,EAAA,YAAAC,EAAA,YAAAC,EAAA,YAAAZ,KAAA,SAAAa,KAAA,SAAAC,KAAA,IAAAC,EAAA,GAAApB,EAAAoB,EAAA1B,EAAA,kBAAA2B,OAAA,IAAAC,EAAArC,OAAAsC,eAAAC,EAAAF,OAAAG,EAAA,MAAAD,OAAAxC,GAAAG,EAAAyB,KAAAY,EAAA9B,KAAA0B,EAAAI,GAAA,IAAAE,EAAAP,EAAAjC,UAAAmB,EAAAnB,UAAAD,OAAAqB,OAAAc,GAAA,SAAAO,EAAA5C,GAAA,0BAAA6C,QAAA,SAAA9C,GAAAkB,EAAAjB,EAAAD,EAAA,SAAAC,GAAA,OAAAsC,KAAAQ,QAAA/C,EAAAC,OAAA,SAAA+C,EAAA/C,EAAAD,GAAA,SAAAiD,EAAA/C,EAAAK,EAAAG,EAAAE,GAAA,IAAAE,EAAAa,EAAA1B,EAAAC,GAAAD,EAAAM,GAAA,aAAAO,EAAAc,KAAA,KAAAZ,EAAAF,EAAAe,IAAAE,EAAAf,EAAAP,MAAA,OAAAsB,GAAA,iBAAAA,GAAA1B,EAAAyB,KAAAC,EAAA,WAAA/B,EAAAkD,QAAAnB,EAAAoB,SAAAC,KAAA,SAAAnD,GAAAgD,EAAA,OAAAhD,EAAAS,EAAAE,IAAA,SAAAX,GAAAgD,EAAA,QAAAhD,EAAAS,EAAAE,KAAAZ,EAAAkD,QAAAnB,GAAAqB,KAAA,SAAAnD,GAAAe,EAAAP,MAAAR,EAAAS,EAAAM,IAAA,SAAAf,GAAA,OAAAgD,EAAA,QAAAhD,EAAAS,EAAAE,OAAAE,EAAAe,KAAA,IAAA3B,EAAAK,EAAAgC,KAAA,WAAA9B,MAAA,SAAAR,EAAAI,GAAA,SAAAgD,IAAA,WAAArD,EAAA,SAAAA,EAAAE,GAAA+C,EAAAhD,EAAAI,EAAAL,EAAAE,KAAA,OAAAA,MAAAkD,KAAAC,YAAA,SAAA3B,EAAA1B,EAAAE,EAAAG,GAAA,IAAAE,EAAAwB,EAAA,gBAAArB,EAAAE,GAAA,GAAAL,IAAA0B,EAAA,MAAAqB,MAAA,mCAAA/C,IAAA2B,EAAA,cAAAxB,EAAA,MAAAE,EAAA,OAAAH,MAAAR,EAAAsD,MAAA,OAAAlD,EAAAmD,OAAA9C,EAAAL,EAAAwB,IAAAjB,IAAA,KAAAE,EAAAT,EAAAoD,SAAA,GAAA3C,EAAA,KAAAE,EAAA0C,EAAA5C,EAAAT,GAAA,GAAAW,EAAA,IAAAA,IAAAmB,EAAA,gBAAAnB,GAAA,YAAAX,EAAAmD,OAAAnD,EAAAsD,KAAAtD,EAAAuD,MAAAvD,EAAAwB,SAAA,aAAAxB,EAAAmD,OAAA,IAAAjD,IAAAwB,EAAA,MAAAxB,EAAA2B,EAAA7B,EAAAwB,IAAAxB,EAAAwD,kBAAAxD,EAAAwB,SAAA,WAAAxB,EAAAmD,QAAAnD,EAAAyD,OAAA,SAAAzD,EAAAwB,KAAAtB,EAAA0B,EAAA,IAAAK,EAAAX,EAAA3B,EAAAE,EAAAG,GAAA,cAAAiC,EAAAV,KAAA,IAAArB,EAAAF,EAAAkD,KAAArB,EAAAF,EAAAM,EAAAT,MAAAM,EAAA,gBAAA1B,MAAA6B,EAAAT,IAAA0B,KAAAlD,EAAAkD,MAAA,UAAAjB,EAAAV,OAAArB,EAAA2B,EAAA7B,EAAAmD,OAAA,QAAAnD,EAAAwB,IAAAS,EAAAT,OAAA,SAAA6B,EAAA1D,EAAAE,GAAA,IAAAG,EAAAH,EAAAsD,OAAAjD,EAAAP,EAAAa,SAAAR,GAAA,GAAAE,IAAAN,EAAA,OAAAC,EAAAuD,SAAA,eAAApD,GAAAL,EAAAa,SAAAkD,SAAA7D,EAAAsD,OAAA,SAAAtD,EAAA2B,IAAA5B,EAAAyD,EAAA1D,EAAAE,GAAA,UAAAA,EAAAsD,SAAA,WAAAnD,IAAAH,EAAAsD,OAAA,QAAAtD,EAAA2B,IAAA,IAAAmC,UAAA,oCAAA3D,EAAA,aAAA8B,EAAA,IAAAzB,EAAAiB,EAAApB,EAAAP,EAAAa,SAAAX,EAAA2B,KAAA,aAAAnB,EAAAkB,KAAA,OAAA1B,EAAAsD,OAAA,QAAAtD,EAAA2B,IAAAnB,EAAAmB,IAAA3B,EAAAuD,SAAA,KAAAtB,EAAA,IAAAvB,EAAAF,EAAAmB,IAAA,OAAAjB,IAAA2C,MAAArD,EAAAF,EAAAiE,YAAArD,EAAAH,MAAAP,EAAAgE,KAAAlE,EAAAmE,QAAA,WAAAjE,EAAAsD,SAAAtD,EAAAsD,OAAA,OAAAtD,EAAA2B,IAAA5B,GAAAC,EAAAuD,SAAA,KAAAtB,GAAAvB,GAAAV,EAAAsD,OAAA,QAAAtD,EAAA2B,IAAA,IAAAmC,UAAA,oCAAA9D,EAAAuD,SAAA,KAAAtB,GAAA,SAAAiC,EAAAnE,GAAA,IAAAD,EAAA,CAAAqE,OAAApE,EAAA,SAAAA,IAAAD,EAAAsE,SAAArE,EAAA,SAAAA,IAAAD,EAAAuE,WAAAtE,EAAA,GAAAD,EAAAwE,SAAAvE,EAAA,IAAAsC,KAAAkC,WAAAC,KAAA1E,GAAA,SAAA2E,EAAA1E,GAAA,IAAAD,EAAAC,EAAA2E,YAAA,GAAA5E,EAAA4B,KAAA,gBAAA5B,EAAA6B,IAAA5B,EAAA2E,WAAA5E,EAAA,SAAAyB,EAAAxB,GAAAsC,KAAAkC,WAAA,EAAAJ,OAAA,SAAApE,EAAA6C,QAAAsB,EAAA7B,WAAAsC,OAAA,YAAAlC,EAAA3C,GAAA,GAAAA,GAAA,KAAAA,EAAA,KAAAE,EAAAF,EAAAY,GAAA,GAAAV,EAAA,OAAAA,EAAA4B,KAAA9B,GAAA,sBAAAA,EAAAkE,KAAA,OAAAlE,EAAA,IAAA8E,MAAA9E,EAAA+E,QAAA,KAAAxE,GAAA,EAAAG,EAAA,SAAAwD,IAAA,OAAA3D,EAAAP,EAAA+E,QAAA,GAAA1E,EAAAyB,KAAA9B,EAAAO,GAAA,OAAA2D,EAAAzD,MAAAT,EAAAO,GAAA2D,EAAAX,MAAA,EAAAW,EAAA,OAAAA,EAAAzD,MAAAR,EAAAiE,EAAAX,MAAA,EAAAW,GAAA,OAAAxD,EAAAwD,KAAAxD,GAAA,UAAAsD,iBAAAhE,EAAA,2BAAAoC,EAAAhC,UAAAiC,EAAA9B,EAAAqC,EAAA,eAAAnC,MAAA4B,EAAAjB,cAAA,IAAAb,EAAA8B,EAAA,eAAA5B,MAAA2B,EAAAhB,cAAA,IAAAgB,EAAA4C,YAAA9D,EAAAmB,EAAArB,EAAA,qBAAAhB,EAAAiF,oBAAA,SAAAhF,GAAA,IAAAD,EAAA,mBAAAC,KAAAiF,YAAA,QAAAlF,QAAAoC,GAAA,uBAAApC,EAAAgF,aAAAhF,EAAAmF,QAAAnF,EAAAoF,KAAA,SAAAnF,GAAA,OAAAE,OAAAkF,eAAAlF,OAAAkF,eAAApF,EAAAoC,IAAApC,EAAAqF,UAAAjD,EAAAnB,EAAAjB,EAAAe,EAAA,sBAAAf,EAAAG,UAAAD,OAAAqB,OAAAoB,GAAA3C,GAAAD,EAAAuF,MAAA,SAAAtF,GAAA,OAAAkD,QAAAlD,IAAA4C,EAAAG,EAAA5C,WAAAc,EAAA8B,EAAA5C,UAAAU,EAAA,kBAAAyB,OAAAvC,EAAAgD,gBAAAhD,EAAAwF,MAAA,SAAAvF,EAAAC,EAAAG,EAAAE,EAAAG,QAAA,IAAAA,MAAA+E,SAAA,IAAA7E,EAAA,IAAAoC,EAAA1B,EAAArB,EAAAC,EAAAG,EAAAE,GAAAG,GAAA,OAAAV,EAAAiF,oBAAA/E,GAAAU,IAAAsD,OAAAd,KAAA,SAAAnD,GAAA,OAAAA,EAAAsD,KAAAtD,EAAAQ,MAAAG,EAAAsD,UAAArB,EAAAD,GAAA1B,EAAA0B,EAAA5B,EAAA,aAAAE,EAAA0B,EAAAhC,EAAA,kBAAA2B,OAAArB,EAAA0B,EAAA,mDAAA5C,EAAA0F,KAAA,SAAAzF,GAAA,IAAAD,EAAAG,OAAAF,GAAAC,EAAA,WAAAG,KAAAL,EAAAE,EAAAwE,KAAArE,GAAA,OAAAH,EAAAyF,UAAA,SAAAzB,IAAA,KAAAhE,EAAA6E,QAAA,KAAA9E,EAAAC,EAAA0F,MAAA,GAAA3F,KAAAD,EAAA,OAAAkE,EAAAzD,MAAAR,EAAAiE,EAAAX,MAAA,EAAAW,EAAA,OAAAA,EAAAX,MAAA,EAAAW,IAAAlE,EAAA2C,SAAAlB,EAAArB,UAAA,CAAA8E,YAAAzD,EAAAoD,MAAA,SAAA7E,GAAA,GAAAuC,KAAAsD,KAAA,EAAAtD,KAAA2B,KAAA,EAAA3B,KAAAoB,KAAApB,KAAAqB,MAAA3D,EAAAsC,KAAAgB,MAAA,EAAAhB,KAAAkB,SAAA,KAAAlB,KAAAiB,OAAA,OAAAjB,KAAAV,IAAA5B,EAAAsC,KAAAkC,WAAA3B,QAAA6B,IAAA3E,EAAA,QAAAE,KAAAqC,KAAA,MAAArC,EAAA4F,OAAA,IAAAzF,EAAAyB,KAAAS,KAAArC,KAAA4E,OAAA5E,EAAA6F,MAAA,MAAAxD,KAAArC,GAAAD,IAAA+F,KAAA,WAAAzD,KAAAgB,MAAA,MAAAtD,EAAAsC,KAAAkC,WAAA,GAAAG,WAAA,aAAA3E,EAAA2B,KAAA,MAAA3B,EAAA4B,IAAA,OAAAU,KAAA0D,MAAApC,kBAAA,SAAA7D,GAAA,GAAAuC,KAAAgB,KAAA,MAAAvD,EAAA,IAAAE,EAAAqC,KAAA,SAAA2D,EAAA7F,EAAAE,GAAA,OAAAK,EAAAgB,KAAA,QAAAhB,EAAAiB,IAAA7B,EAAAE,EAAAgE,KAAA7D,EAAAE,IAAAL,EAAAsD,OAAA,OAAAtD,EAAA2B,IAAA5B,KAAAM,EAAA,QAAAA,EAAAgC,KAAAkC,WAAAM,OAAA,EAAAxE,GAAA,IAAAA,EAAA,KAAAG,EAAA6B,KAAAkC,WAAAlE,GAAAK,EAAAF,EAAAkE,WAAA,YAAAlE,EAAA2D,OAAA,OAAA6B,EAAA,UAAAxF,EAAA2D,QAAA9B,KAAAsD,KAAA,KAAA/E,EAAAT,EAAAyB,KAAApB,EAAA,YAAAM,EAAAX,EAAAyB,KAAApB,EAAA,iBAAAI,GAAAE,EAAA,IAAAuB,KAAAsD,KAAAnF,EAAA4D,SAAA,OAAA4B,EAAAxF,EAAA4D,UAAA,MAAA/B,KAAAsD,KAAAnF,EAAA6D,WAAA,OAAA2B,EAAAxF,EAAA6D,iBAAA,GAAAzD,GAAA,GAAAyB,KAAAsD,KAAAnF,EAAA4D,SAAA,OAAA4B,EAAAxF,EAAA4D,UAAA,YAAAtD,EAAA,MAAAsC,MAAA,6CAAAf,KAAAsD,KAAAnF,EAAA6D,WAAA,OAAA2B,EAAAxF,EAAA6D,gBAAAT,OAAA,SAAA7D,EAAAD,GAAA,QAAAE,EAAAqC,KAAAkC,WAAAM,OAAA,EAAA7E,GAAA,IAAAA,EAAA,KAAAK,EAAAgC,KAAAkC,WAAAvE,GAAA,GAAAK,EAAA8D,QAAA9B,KAAAsD,MAAAxF,EAAAyB,KAAAvB,EAAA,eAAAgC,KAAAsD,KAAAtF,EAAAgE,WAAA,KAAA7D,EAAAH,EAAA,OAAAG,IAAA,UAAAT,GAAA,aAAAA,IAAAS,EAAA2D,QAAArE,MAAAU,EAAA6D,aAAA7D,EAAA,UAAAE,EAAAF,IAAAkE,WAAA,UAAAhE,EAAAgB,KAAA3B,EAAAW,EAAAiB,IAAA7B,EAAAU,GAAA6B,KAAAiB,OAAA,OAAAjB,KAAA2B,KAAAxD,EAAA6D,WAAApC,GAAAI,KAAA4D,SAAAvF,IAAAuF,SAAA,SAAAlG,EAAAD,GAAA,aAAAC,EAAA2B,KAAA,MAAA3B,EAAA4B,IAAA,gBAAA5B,EAAA2B,MAAA,aAAA3B,EAAA2B,KAAAW,KAAA2B,KAAAjE,EAAA4B,IAAA,WAAA5B,EAAA2B,MAAAW,KAAA0D,KAAA1D,KAAAV,IAAA5B,EAAA4B,IAAAU,KAAAiB,OAAA,SAAAjB,KAAA2B,KAAA,kBAAAjE,EAAA2B,MAAA5B,IAAAuC,KAAA2B,KAAAlE,GAAAmC,GAAAiE,OAAA,SAAAnG,GAAA,QAAAD,EAAAuC,KAAAkC,WAAAM,OAAA,EAAA/E,GAAA,IAAAA,EAAA,KAAAE,EAAAqC,KAAAkC,WAAAzE,GAAA,GAAAE,EAAAqE,aAAAtE,EAAA,OAAAsC,KAAA4D,SAAAjG,EAAA0E,WAAA1E,EAAAsE,UAAAG,EAAAzE,GAAAiC,IAAAkE,MAAA,SAAApG,GAAA,QAAAD,EAAAuC,KAAAkC,WAAAM,OAAA,EAAA/E,GAAA,IAAAA,EAAA,KAAAE,EAAAqC,KAAAkC,WAAAzE,GAAA,GAAAE,EAAAmE,SAAApE,EAAA,KAAAI,EAAAH,EAAA0E,WAAA,aAAAvE,EAAAuB,KAAA,KAAArB,EAAAF,EAAAwB,IAAA8C,EAAAzE,GAAA,OAAAK,GAAA,MAAA+C,MAAA,0BAAAgD,cAAA,SAAAtG,EAAAE,EAAAG,GAAA,OAAAkC,KAAAkB,SAAA,CAAA5C,SAAA8B,EAAA3C,GAAAiE,WAAA/D,EAAAiE,QAAA9D,GAAA,SAAAkC,KAAAiB,SAAAjB,KAAAV,IAAA5B,GAAAkC,IAAAnC,EAEA,IAEa0a,GAAgB,SAAHlU,GAA0B,IAApBwE,EAAOxE,EAAPwE,QAASrC,EAAInC,EAAJmC,KAAIuD,EACPC,mBAAS,MAAKC,EAAAhE,YAAA8D,EAAA,GAA3CyO,EAAUvO,EAAA,GAAEwO,EAAaxO,EAAA,GAyBhC,MAAO,CAACuO,EAvBY,eAAArP,EAAAjC,YAAAtJ,KAAAqF,KAAG,SAAAmG,EAAOsP,EAAYC,GAAO,IAAA5Q,EAAA3B,EAAAwS,EAAAC,EAAAC,EAAA,OAAAlb,KAAAuB,KAAA,SAAAkK,GAAA,cAAAA,EAAA3F,KAAA2F,EAAAtH,MAAA,OAClB,OAA7B4W,EAAoBA,EANOI,QAAQ,wBAAyB,KAM/B1P,EAAAtH,KAAA,EACNoG,MAAK,GAAApC,OAAI8C,EAAO,KAAA9C,OAAI2S,EAAU,KAAA3S,OAAI4S,IAAU,OAArD,OAAR5Q,EAAQsB,EAAA7H,KAAA6H,EAAAtH,KAAA,EACIgG,EAASK,OAAM,OAAxB,GAAHhC,EAAGiD,EAAA7H,KAGuB,IAA5BxD,OAAOuF,KAAK6C,GAAKxD,OAAY,CAAAyG,EAAAtH,KAAA,SACX,OAApB0W,EAAc,MAAMpP,EAAA1H,OAAA,SACb,MAAI,QAWK,OARZiX,EAAuB,YAAfF,EAA2B,UAAY1a,OAAOuF,KAAK6C,GAAK,GAChEyS,EAAyB,YAAfH,EAA2BtS,EAAMA,EAAIwS,GAE/CE,EAAK,CACT5T,KAAMsB,EAAS,GAAEvB,IAAI,SAAA2B,GAAE,OAAIA,KAAMiS,EAAUA,EAAQjS,GAAM,IACzDiR,SAAUe,GAGZH,EAAcK,GAAIzP,EAAA1H,OAAA,SACXmX,GAAE,yBAAAzP,EAAAxF,SAAAuF,MACV,gBArBmBtC,EAAAyC,GAAA,OAAAJ,EAAAnC,MAAA5G,KAAA6G,YAAA,iHCFtB,SAAS+R,GAAsB3U,GAA6C,IAA1C4U,EAAK5U,EAAL4U,MAAOC,EAAI7U,EAAJ6U,KAAMC,EAAW9U,EAAX8U,YAAaC,EAAY/U,EAAZ+U,aAElDC,EAA4B,QADpBC,eACMC,UAEdC,EAAoB,SAACC,GAAO,OAAK,SAAC1K,GAAK,OAAKqK,EAAarK,EAAO0K,KAEtE,OACIhM,IAAAC,cAACE,IAAG,CAACa,GAAI,CAAEiL,WAAY,EAAGC,GAAI,MAC1BlM,IAAAC,cAACkM,KAAU,CAAC3K,QAASuK,EAAkB,GAAIK,SAAmB,IAATX,EAAYY,aAAW,cACxErM,IAAAC,cAACqM,KAAI,KAAEV,EAAQ,YAAc,eAEjC5L,IAAAC,cAACkM,KAAU,CAAC3K,QAASuK,EAAkBN,EAAO,GAAIW,SAAmB,IAATX,EAAYY,aAAW,iBAC/ErM,IAAAC,cAACqM,KAAI,KAAEV,EAAQ,uBAAyB,wBAE5C5L,IAAAC,cAACkM,KAAU,CAAC3K,QAASuK,EAAkBN,EAAO,GAAIW,SAAUX,GAAQc,KAAKC,KAAKhB,EAAQE,GAAe,EAAGW,aAAW,aAC/GrM,IAAAC,cAACqM,KAAI,KAAEV,EAAQ,sBAAwB,yBAE3C5L,IAAAC,cAACkM,KAAU,CAAC3K,QAASuK,EAAkBQ,KAAKE,IAAI,EAAGF,KAAKC,KAAKhB,EAAQE,GAAe,IAAKU,SAAUX,GAAQc,KAAKC,KAAKhB,EAAQE,GAAe,EAAGW,aAAW,aACtJrM,IAAAC,cAACqM,KAAI,KAAEV,EAAQ,aAAe,eAavC,SAASc,GAAYhR,GAAoB,IAAlB0N,EAAQ1N,EAAR0N,SAAe9M,GAAAZ,EAALyP,MACZ5O,mBAAS,IAAEC,EAAAhE,YAAA8D,EAAA,GAA5BmP,EAAIjP,EAAA,GAAEmQ,EAAOnQ,EAAA,GAAAG,EACkBJ,mBAAS,IAAGK,EAAApE,YAAAmE,EAAA,GAA3C+O,EAAW9O,EAAA,GAAEgQ,EAAchQ,EAAA,GAUlC,OACIoD,IAAAC,cAAC4M,KAAc,KACX7M,IAAAC,cAAC6M,KAAK,CAAC9L,GAAI,CAAE+L,SAAU,IAAKC,UAAW,EAAGC,YAAa,OAASC,KAAK,QAAQb,aAAW,kBAEpFrM,IAAAC,cAACkN,KAAS,KACL7V,YAAIC,MAAMmU,GAAa5V,QAAQ0B,IAAI,SAAC4V,GAAK,OACtCpN,IAAAC,cAACoN,KAAQ,CAACvM,IAAKsM,GACXpN,IAAAC,cAACqN,KAAS,CAAC5G,UAAU,KAAK6G,MAAM,OAC3BnE,EAASqC,EAAOC,EAjB1B,IAiBqD0B,IAE/C9V,YAAIC,MAAMiW,GAAgB1X,QAAQ0B,IAAI,SAAAiW,GAAI,OACvCzN,IAAAC,cAACqN,KAAS,CAACI,MAAM,QAAQ5M,IAAK2M,GACzBrE,EAASqC,EAAOC,EArB9B,IAqByD0B,EAAqB,EAAIK,IAAS,UAMlGzN,IAAAC,cAAC0N,KAAW,KACR3N,IAAAC,cAACoN,KAAQ,KACLrN,IAAAC,cAAC2N,KAAe,CACZC,mBAAoB,CAAC,EAAG,GAAI,IAC5BC,QAAS,EACTtC,MAAOe,KAAKC,KAAKpD,EAASjU,OAhC/B,GAiCKuW,YAAaA,EACbD,KAAMA,EACNsC,YAAa,CACT/H,WAAY,CAAEqG,aAAc,iBAC5B2B,QAAQ,GAEZrC,aArCC,SAACsC,EAAGjC,GAAO,OAAKW,EAAQX,IAsCzBkC,oBApCQ,SAAC5M,GAC7BsL,EAAeuB,SAAS7M,EAAMC,OAAO1Q,MAAO,KAC5C8b,EAAQ,IAmCYyB,iBAAkB7C,oiCC1EvC,SAAS8C,GAAWzX,GAAiG,IAA/F0X,EAAG1X,EAAH0X,IAAKnE,EAAOvT,EAAPuT,QAAS3D,EAAQ5P,EAAR4P,SAAUzN,EAAInC,EAAJmC,KAAME,EAAYrC,EAAZqC,aAAcD,EAAcpC,EAAdoC,eAAgBuV,EAAQ3X,EAAR2X,SAAUC,EAAU5X,EAAV4X,WAAYzD,EAAUnU,EAAVmU,WAc3G,SAAS0D,EAAclO,EAAOmO,GAAwB,IAAjBC,EAAWnV,UAAArE,OAAA,QAAAyZ,IAAApV,UAAA,GAAAA,UAAA,GAAG,EAC/C,IAAK+G,IAAUrL,MAAMqL,GACjB,OAAOA,EAKX,GAHIA,EAAMsO,WAAW,OACjBtO,EAlBR,SAAmBuO,GACf,IAAI5d,EACJ,GAAI,2BAA2B6d,KAAKD,GAMhC,OAJiB,KADjB5d,EAAI4d,EAAIE,UAAU,GAAGvN,MAAM,KACrBtM,SACFjE,EAAI,CAACA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,KAGlC,QAAU,EADjBA,EAAI,KAAOA,EAAE+d,KAAK,MACM,GAAM,IAAM/d,GAAK,EAAK,IAAS,IAAJA,GAAS+d,KAAK,KAAO,MAE5E,MAAM,IAAIvb,MAAM,WAQJwb,CAAU3O,IAElBA,EAAMsO,WAAW,QAAS,CAC1B,IACMM,EADM5O,EAAMpK,MAAM,GAAI,GAAGsL,MAAM,KAClBtL,MAAM,GAAI,GAAGqB,IAAI,SAAAtG,GAAC,OAAIqb,KAAKE,IAAI0B,SAASjd,EAAG,IAAMyd,EAAa,KAEjF,OADc,OAAVD,GAAgBS,EAAOra,KAAK4Z,GACzB,QAAUS,EAAOF,OAAS,IAErC,OAAO,KAaV,IAFoBje,EAEpBoe,EAUGC,GAASC,iBAPTC,EAAgBH,EAAhBG,iBACAC,EAAiBJ,EAAjBI,kBACAC,EAAcL,EAAdK,eACAC,EAAgBN,EAAhBM,iBACAC,EAAaP,EAAbO,cACAC,EAAoBR,EAApBQ,qBACAC,EAAqBT,EAArBS,sBAGEC,GAde9e,EAcoBye,IAAgBE,EAbrC3e,GAaoDud,EAclEwB,EAAe,SAAA1d,GAAC,OAAI2d,EAAU3d,EAAE2P,SAQhCiO,EAAkBnS,kBAAS,WAC7B,IAAMoS,EAAM,CAACC,OAAO,KAAKC,WAAW,KAAMC,aAAY,GACtD,GAAgB,MAAXlG,EACD,OAAO+F,EAEX,GAAiB,KAAZ/F,GAAkBA,KAAWpR,GAAQE,EAAa2E,SAASuM,GAAU,CACtE,IAAMmG,EAAQC,MAAGD,MAAME,aAEjBC,EAAOnZ,YAAI,IAAI+G,IAAItF,EAAKoR,KAAW/K,OACzCqR,EAAKvd,QAAQ,SAAAJ,GAAC,OAAIwd,EAAMxd,KACxB,IAAM4d,EAAQ,GACdD,EAAKvd,QAAS,SAACJ,EAAEhC,GAAC,OAAI4f,EAAQ5d,GAAGhC,IACjC,IACqB6f,EADfC,EAAS,GAAGC,EAAAC,GACDL,GAAI,IAArB,IAAAI,EAAAve,MAAAqe,EAAAE,EAAApgB,KAAAkD,MAAuB,KAAbod,EAAGJ,EAAA9f,MACT+f,EAAOG,GAAOT,EAAMS,IACvB,MAAAC,GAAAH,EAAAzgB,EAAA4gB,GAAA,QAAAH,EAAAxe,IASD,OARA6d,EAAIC,OAASpX,EAAKoR,GAAS3S,IAAI,SAAAyZ,GAAG,OAAIX,EAAMW,KAC5Cf,EAAIgB,OAAST,EAAKjZ,IAAI,SAAAuZ,GAAG,MAAI,CACzBI,MAAM,GACN5b,KAAMwb,KAEVhY,EAAKoR,GAASjX,QAAS,SAAC+d,EAAIngB,GAAC,OACzBof,EAAIgB,OAAOR,EAAQO,IAAME,MAAMrc,KAAKhE,KAEjCof,EAEX,MAAiB,KAAZ/F,GAAkBA,KAAWpR,GAAQC,EAAe4E,SAASuM,IAM9D+F,EAAIC,OAAOpX,EAAKoR,GAChB+F,EAAIG,aAAY,EACTH,GAEM,KAAZ/F,GAAqBA,KAAWpR,GAAwB,OAAfgS,EAOvCmF,GANHA,EAAIC,OAASpF,EAAWtT,KACxByY,EAAIG,aAAY,EAGTH,IAGZ,CAAC/F,EAASqE,EAAYzV,EAAKgS,IAExBoF,EAASF,EAAgBE,OACzBiB,EAAYtT,kBAAS,kBAAgB,MAAVqS,EAAiB,KAC9CA,EAAO3Y,IAAK,SAAAtG,GAAC,OA3FNud,EA2FiBvd,EA3FI,KAAM,OA2FL,CAACiZ,EAAQpR,EAAKgS,IACzCsG,EAAWvT,kBAAS,kBAAgB,MAAVqS,EAAiB,KAC7CA,EAAO3Y,IAAK,SAAAtG,GAAC,OAzFNud,EAyFsBvd,EAAG,OAAO,CAACiZ,EAASpR,EAAMgS,IAGrDuG,EAAQxT,kBAAS,WACnB,GAAa,MAAR/E,EAAe,OAAO,KAE3B,IAAMwY,EAAWhhB,OAAOuF,KAAKiD,GAAM5C,MAAM,EAAGoZ,GAC5C,OAAyB,IAApBgC,EAASpc,OAAsB,KAC7B4D,EAAKwY,EAAS,IAAI/Z,IAAK,SAACqI,EAAG2R,GAC9B,GAAiB,MAAZhL,IAAqBA,EAASgL,GAC/B,OAAO,KAEX,IAAItB,EAAM,GASV,MARgB,KAAZ/F,GAAkBA,KAAWpR,EAC7BmX,GAAG,GAAA5X,OAAO6R,EAAO,MAAA7R,OAAKS,EAAKoR,GAASqH,GAAI,YAExB,KAAZrH,GAA8B,OAAZA,GAAuBA,KAAWpR,GAAuB,MAAdgS,IAC7DmF,GAAG,GAAA5X,OAAO6R,EAAO,MAAA7R,OAAKyS,EAAWtT,KAAK+Z,GAAI,aAGlDtB,GAAOqB,EAAS/Z,IAAK,SAAAia,GAAE,SAAAnZ,OAAOmZ,EAAE,MAAAnZ,OAAKS,EAAK0Y,GAAID,MAAQvC,KAAK,WAGhE,CAAClW,EAAMoR,EAAS3D,EAAUuE,IAEvB2G,EAAU5T,kBAAS,kBAAmB,OAAb0I,EAAoB,GAAMA,EAAShP,IAAK,SAAAlF,GAAC,OAAIA,EAAIod,EAAmBF,KACnG,CAAChJ,IACK0G,EAAQpP,kBAAS,kBAAmB,OAAb0I,EAAoB,EAAIA,EAAShP,IAAK,SAAAlF,GAAC,OAAIA,EAAIwd,EAAuBL,KAAiB,CAACjJ,IAC/GmL,EAAe7T,kBAAS,kBAAmB,OAAb0I,EAAoB,KAAOA,EAAShP,IAAK,SAAAlF,GAAC,OAAIA,EAAIod,EAAmBF,KAAoB,CAAChJ,IACxHoL,EAAa9T,kBAAS,kBAAmB,OAAb0I,EAAoB,KAAOA,EAAShP,IAAK,SAAAlF,GAAC,OAAIA,EAAIsd,EAAuBC,KAAwB,CAACrJ,IAGpIlK,EAC8BC,mBAAS,CACnCsV,UAAU,UACVC,YAAY,EACZ7Q,OAAQ,CACJ7O,EAAG,EACH9B,EAAG,EACHD,EAAG,EACHgP,EAAG,GAEPuR,OAAQ,CACJ/Q,EAAG,IACHkS,QAAS,QACTxf,EAAG,KAEP0P,MAAO,CACH+P,UAAU,EACVC,UAAU,EACVC,UAAU,EACVC,WAAW,EACX/P,gBAAgB,GAEpBE,MAAO,CACH0P,UAAU,EACVC,UAAU,EACVC,UAAU,EACVC,WAAW,EACX/P,gBAAgB,GAEpBgQ,UAAU,IACZ5V,EAAAhE,YAAA8D,EAAA,GA7BM0F,EAAMxF,EAAA,GAAEwT,EAASxT,EAAA,GA8BnB0U,EAASjB,EAAgBiB,OAwD/B,MALa,CAACzZ,KAjDH,MAARyZ,EACQ,CAAC,CACJrR,EAAGyO,EAAI,GACP/b,EAAG+b,EAAI,GACPtc,KAAM,YACNqgB,KAAM,UACNpU,OAAQ,CACJsC,MAAO4P,EACPvO,WAAY4M,EAAW,SAAS,KAChC8D,SAAUrC,EAAgBI,YAAY,CAACkC,MAAMpI,EAAQqI,IAAI,IAAK,KAC9DtF,KAAMA,EACNwE,QAASA,EACTe,KAAM,CACF7S,MAAOgS,EACPF,QAASC,EACTpR,MAAO6Q,IAGfsB,KAAMpB,EACNqB,WAAY,CAACC,QAASvB,GAEtBwB,UAAW,OACXtd,KAAM,KAGH2b,EAAO1Z,IAAI,SAAAsb,GAAK,MAAK,CACxBjT,EAAGiT,EAAM3B,MAAM3Z,IAAI,SAAAga,GAAG,OAAElD,EAAI,GAAGkD,KAC/Bjf,EAAGugB,EAAM3B,MAAM3Z,IAAI,SAAAga,GAAG,OAAElD,EAAI,GAAGkD,KAC/Bxf,KAAM,YACNqgB,KAAM,UACNpU,OAAQ,CACJsC,MAAOuS,EAAM3B,MAAM3Z,IAAI,SAAAga,GAAG,OAAErB,EAAOqB,KACnC5P,WAAY4M,EAAW,SAAS,KAChC8D,SAAUrC,EAAgBI,YAAY,CAACkC,MAAMpI,EAASqI,IAAI,IAAK,KAC/DtF,KAAMtO,mBAAQsO,GAAM4F,EAAM3B,MAAM3Z,IAAI,SAAAga,GAAG,OAAEtE,EAAKsE,KAAMtE,EACpDwE,QAAS9S,mBAAQ8S,GAASoB,EAAM3B,MAAM3Z,IAAI,SAAAga,GAAG,OAAEE,EAAQF,KAAME,EAC7De,KAAM,CACF7S,MAAkB,MAAXgS,EAAgB,KAAKkB,EAAM3B,MAAM3Z,IAAI,SAAAga,GAAG,OAAEI,EAAUJ,KAC3DE,QAAsB,MAAbC,EAAkB,KAAMmB,EAAM3B,MAAM3Z,IAAI,SAAAga,GAAG,OAAEG,EAAYH,KAClEjR,MAAkB,MAAX6Q,EAAgB,KAAK0B,EAAM3B,MAAM3Z,IAAI,SAAAga,GAAG,OAAEJ,EAAUI,OAGnEkB,KAAMI,EAAM3B,MAAM3Z,IAAI,SAAAga,GAAG,OAAEF,EAAME,KACjCmB,WAAY,CAACC,QAAmB,MAAVvB,EAAe,KAAKyB,EAAM3B,MAAM3Z,IAAI,SAAAga,GAAG,OAAEH,EAASG,MAExEqB,UAAW,OACXtd,KAAMud,EAAMvd,QAGAwd,OAxLL,GAwLalR,OAvLb,CAEXC,aAAa,EACbC,uBAAwB,CAAC,kBACzB,wBAAyB,SACzB,QAAS,WAAY,UAAW,WAChC,YAAa,cAAe,eAC5B,wBAAyB,qBAgLOC,SAAQgR,kBA9KnB,EA8KqC5S,MA7KlD,GA6KyD6S,cAAelD,EAChFmD,SAAUnD,GCnPX,SAASoD,GAAmBC,EAAMla,EAAY6R,GAAY,IAG3DuD,EAH2D+E,EAChBna,EAAWka,EAAKxa,OAAvDG,EAAIsa,EAAJta,KAAME,EAAYoa,EAAZpa,aAAcD,EAAcqa,EAAdra,eAG5B,OAAQoa,EAAKE,YACX,IAAK,OACHhF,EAAM,WAAYvV,EAAO,CAACA,EAAKwa,OAAQxa,EAAKya,QAAU,CAACza,EAAa,OAAGA,EAAa,QACpF,MACF,IAAK,OACHuV,EAAM,WAAYvV,EAAO,CAACA,EAAK0a,OAAQ1a,EAAK2a,QAAU,CAAC3a,EAAa,OAAGA,EAAa,QACpF,MACF,QACEuV,EAAM,CAAC,KAAM,MAGjB,IAAMpF,EChBD,SAAqBkK,GAAM,IACtBra,EAASqa,EAATra,KAAIuD,EACkBC,mBAAS,IAAGC,EAAAhE,YAAA8D,EAAA,GAAnC6N,EAAO3N,EAAA,GAAE6N,EAAU7N,EAAA,GAAAG,EACEJ,mBAAS,IAAGK,EAAApE,YAAAmE,EAAA,GAAjCsG,EAAMrG,EAAA,GAAE6N,EAAS7N,EAAA,GAAAG,EACQR,mBAAS,GAAES,EAAAxE,YAAAuE,EAAA,GAApCwR,EAAQvR,EAAA,GAAE2W,EAAW3W,EAAA,GAAAG,EACUZ,oBAAS,GAAMa,EAAA5E,YAAA2E,EAAA,GAA7CqR,EAAUpR,EAAA,GAAEwW,EAAaxW,EAAA,GAejC,MAAQ,CAACoJ,SARQ1I,kBAAQ,WACrB,OAAe,OAAXmF,GAAmBA,EAAO9N,OAAS,GAAc,OAAT4D,GAAkBkK,EAAO,GAAGpS,MAAM8Y,SAAS5Q,EAC5EA,EAAKkK,EAAO,GAAGpS,MAAM8Y,OAAOnS,IAAI,SAACqc,EAAI/iB,GAAC,OACzCmS,EAAO6Q,KAAK,SAAAld,GAAA,IAAAmd,EAAAnd,EAAG/F,MAAS8Y,EAAKoK,EAALpK,MAAOC,EAAImK,EAAJnK,KAAI,OAAS7Q,EAAK4Q,GAAO7Y,KAAO8Y,MAGhE,MACR,CAAC3G,EAAOlK,IACQsR,aAAYF,UAASlH,SAAQwH,YAAWuJ,aAZ3D,SAAsBlhB,GAClB2X,EAAU3X,IAW2Dyb,WAAUoF,cAAanF,aAAYoF,iBDJ7FK,CAAY/a,EAAWka,EAAKxa,QAc7C,MAAO,CAZMyV,GAAY,CACvBC,MACAnE,QAASjB,EAASiB,QAClB3D,SAAU0C,EAAS1C,SACnBzN,OACAE,eACAD,iBACAuV,SAAUrF,EAASqF,SACnBC,WAAYtF,EAASsF,WACrBzD,eAGY7B,iBE/BhB/Y,GAAA,kBAAAC,GAAA,IAAAC,EAAAD,EAAA,GAAAE,EAAAC,OAAAC,UAAAC,EAAAH,EAAAI,eAAAC,EAAAJ,OAAAK,gBAAA,SAAAP,EAAAD,EAAAE,GAAAD,EAAAD,GAAAE,EAAAO,OAAAC,EAAA,mBAAAC,cAAA,GAAAC,EAAAF,EAAAG,UAAA,aAAAC,EAAAJ,EAAAK,eAAA,kBAAAC,EAAAN,EAAAO,aAAA,yBAAAC,EAAAjB,EAAAD,EAAAE,GAAA,OAAAC,OAAAK,eAAAP,EAAAD,EAAA,CAAAS,MAAAP,EAAAiB,YAAA,EAAAC,cAAA,EAAAC,UAAA,IAAApB,EAAAD,GAAA,IAAAkB,EAAA,aAAAjB,GAAAiB,EAAA,SAAAjB,EAAAD,EAAAE,GAAA,OAAAD,EAAAD,GAAAE,GAAA,SAAAoB,EAAArB,EAAAD,EAAAE,EAAAG,GAAA,IAAAK,EAAAV,KAAAI,qBAAAmB,EAAAvB,EAAAuB,EAAAX,EAAAT,OAAAqB,OAAAd,EAAAN,WAAAU,EAAA,IAAAW,EAAApB,GAAA,WAAAE,EAAAK,EAAA,WAAAH,MAAAiB,EAAAzB,EAAAC,EAAAY,KAAAF,EAAA,SAAAe,EAAA1B,EAAAD,EAAAE,GAAA,WAAA0B,KAAA,SAAAC,IAAA5B,EAAA6B,KAAA9B,EAAAE,IAAA,MAAAD,GAAA,OAAA2B,KAAA,QAAAC,IAAA5B,IAAAD,EAAAsB,OAAA,IAAAS,EAAA,iBAAAC,EAAA,iBAAAC,EAAA,YAAAC,EAAA,YAAAC,EAAA,YAAAZ,KAAA,SAAAa,KAAA,SAAAC,KAAA,IAAAC,EAAA,GAAApB,EAAAoB,EAAA1B,EAAA,kBAAA2B,OAAA,IAAAC,EAAArC,OAAAsC,eAAAC,EAAAF,OAAAG,EAAA,MAAAD,OAAAxC,GAAAG,EAAAyB,KAAAY,EAAA9B,KAAA0B,EAAAI,GAAA,IAAAE,EAAAP,EAAAjC,UAAAmB,EAAAnB,UAAAD,OAAAqB,OAAAc,GAAA,SAAAO,EAAA5C,GAAA,0BAAA6C,QAAA,SAAA9C,GAAAkB,EAAAjB,EAAAD,EAAA,SAAAC,GAAA,OAAAsC,KAAAQ,QAAA/C,EAAAC,OAAA,SAAA+C,EAAA/C,EAAAD,GAAA,SAAAiD,EAAA/C,EAAAK,EAAAG,EAAAE,GAAA,IAAAE,EAAAa,EAAA1B,EAAAC,GAAAD,EAAAM,GAAA,aAAAO,EAAAc,KAAA,KAAAZ,EAAAF,EAAAe,IAAAE,EAAAf,EAAAP,MAAA,OAAAsB,GAAA,iBAAAA,GAAA1B,EAAAyB,KAAAC,EAAA,WAAA/B,EAAAkD,QAAAnB,EAAAoB,SAAAC,KAAA,SAAAnD,GAAAgD,EAAA,OAAAhD,EAAAS,EAAAE,IAAA,SAAAX,GAAAgD,EAAA,QAAAhD,EAAAS,EAAAE,KAAAZ,EAAAkD,QAAAnB,GAAAqB,KAAA,SAAAnD,GAAAe,EAAAP,MAAAR,EAAAS,EAAAM,IAAA,SAAAf,GAAA,OAAAgD,EAAA,QAAAhD,EAAAS,EAAAE,OAAAE,EAAAe,KAAA,IAAA3B,EAAAK,EAAAgC,KAAA,WAAA9B,MAAA,SAAAR,EAAAI,GAAA,SAAAgD,IAAA,WAAArD,EAAA,SAAAA,EAAAE,GAAA+C,EAAAhD,EAAAI,EAAAL,EAAAE,KAAA,OAAAA,MAAAkD,KAAAC,YAAA,SAAA3B,EAAA1B,EAAAE,EAAAG,GAAA,IAAAE,EAAAwB,EAAA,gBAAArB,EAAAE,GAAA,GAAAL,IAAA0B,EAAA,MAAAqB,MAAA,mCAAA/C,IAAA2B,EAAA,cAAAxB,EAAA,MAAAE,EAAA,OAAAH,MAAAR,EAAAsD,MAAA,OAAAlD,EAAAmD,OAAA9C,EAAAL,EAAAwB,IAAAjB,IAAA,KAAAE,EAAAT,EAAAoD,SAAA,GAAA3C,EAAA,KAAAE,EAAA0C,EAAA5C,EAAAT,GAAA,GAAAW,EAAA,IAAAA,IAAAmB,EAAA,gBAAAnB,GAAA,YAAAX,EAAAmD,OAAAnD,EAAAsD,KAAAtD,EAAAuD,MAAAvD,EAAAwB,SAAA,aAAAxB,EAAAmD,OAAA,IAAAjD,IAAAwB,EAAA,MAAAxB,EAAA2B,EAAA7B,EAAAwB,IAAAxB,EAAAwD,kBAAAxD,EAAAwB,SAAA,WAAAxB,EAAAmD,QAAAnD,EAAAyD,OAAA,SAAAzD,EAAAwB,KAAAtB,EAAA0B,EAAA,IAAAK,EAAAX,EAAA3B,EAAAE,EAAAG,GAAA,cAAAiC,EAAAV,KAAA,IAAArB,EAAAF,EAAAkD,KAAArB,EAAAF,EAAAM,EAAAT,MAAAM,EAAA,gBAAA1B,MAAA6B,EAAAT,IAAA0B,KAAAlD,EAAAkD,MAAA,UAAAjB,EAAAV,OAAArB,EAAA2B,EAAA7B,EAAAmD,OAAA,QAAAnD,EAAAwB,IAAAS,EAAAT,OAAA,SAAA6B,EAAA1D,EAAAE,GAAA,IAAAG,EAAAH,EAAAsD,OAAAjD,EAAAP,EAAAa,SAAAR,GAAA,GAAAE,IAAAN,EAAA,OAAAC,EAAAuD,SAAA,eAAApD,GAAAL,EAAAa,SAAAkD,SAAA7D,EAAAsD,OAAA,SAAAtD,EAAA2B,IAAA5B,EAAAyD,EAAA1D,EAAAE,GAAA,UAAAA,EAAAsD,SAAA,WAAAnD,IAAAH,EAAAsD,OAAA,QAAAtD,EAAA2B,IAAA,IAAAmC,UAAA,oCAAA3D,EAAA,aAAA8B,EAAA,IAAAzB,EAAAiB,EAAApB,EAAAP,EAAAa,SAAAX,EAAA2B,KAAA,aAAAnB,EAAAkB,KAAA,OAAA1B,EAAAsD,OAAA,QAAAtD,EAAA2B,IAAAnB,EAAAmB,IAAA3B,EAAAuD,SAAA,KAAAtB,EAAA,IAAAvB,EAAAF,EAAAmB,IAAA,OAAAjB,IAAA2C,MAAArD,EAAAF,EAAAiE,YAAArD,EAAAH,MAAAP,EAAAgE,KAAAlE,EAAAmE,QAAA,WAAAjE,EAAAsD,SAAAtD,EAAAsD,OAAA,OAAAtD,EAAA2B,IAAA5B,GAAAC,EAAAuD,SAAA,KAAAtB,GAAAvB,GAAAV,EAAAsD,OAAA,QAAAtD,EAAA2B,IAAA,IAAAmC,UAAA,oCAAA9D,EAAAuD,SAAA,KAAAtB,GAAA,SAAAiC,EAAAnE,GAAA,IAAAD,EAAA,CAAAqE,OAAApE,EAAA,SAAAA,IAAAD,EAAAsE,SAAArE,EAAA,SAAAA,IAAAD,EAAAuE,WAAAtE,EAAA,GAAAD,EAAAwE,SAAAvE,EAAA,IAAAsC,KAAAkC,WAAAC,KAAA1E,GAAA,SAAA2E,EAAA1E,GAAA,IAAAD,EAAAC,EAAA2E,YAAA,GAAA5E,EAAA4B,KAAA,gBAAA5B,EAAA6B,IAAA5B,EAAA2E,WAAA5E,EAAA,SAAAyB,EAAAxB,GAAAsC,KAAAkC,WAAA,EAAAJ,OAAA,SAAApE,EAAA6C,QAAAsB,EAAA7B,WAAAsC,OAAA,YAAAlC,EAAA3C,GAAA,GAAAA,GAAA,KAAAA,EAAA,KAAAE,EAAAF,EAAAY,GAAA,GAAAV,EAAA,OAAAA,EAAA4B,KAAA9B,GAAA,sBAAAA,EAAAkE,KAAA,OAAAlE,EAAA,IAAA8E,MAAA9E,EAAA+E,QAAA,KAAAxE,GAAA,EAAAG,EAAA,SAAAwD,IAAA,OAAA3D,EAAAP,EAAA+E,QAAA,GAAA1E,EAAAyB,KAAA9B,EAAAO,GAAA,OAAA2D,EAAAzD,MAAAT,EAAAO,GAAA2D,EAAAX,MAAA,EAAAW,EAAA,OAAAA,EAAAzD,MAAAR,EAAAiE,EAAAX,MAAA,EAAAW,GAAA,OAAAxD,EAAAwD,KAAAxD,GAAA,UAAAsD,iBAAAhE,EAAA,2BAAAoC,EAAAhC,UAAAiC,EAAA9B,EAAAqC,EAAA,eAAAnC,MAAA4B,EAAAjB,cAAA,IAAAb,EAAA8B,EAAA,eAAA5B,MAAA2B,EAAAhB,cAAA,IAAAgB,EAAA4C,YAAA9D,EAAAmB,EAAArB,EAAA,qBAAAhB,EAAAiF,oBAAA,SAAAhF,GAAA,IAAAD,EAAA,mBAAAC,KAAAiF,YAAA,QAAAlF,QAAAoC,GAAA,uBAAApC,EAAAgF,aAAAhF,EAAAmF,QAAAnF,EAAAoF,KAAA,SAAAnF,GAAA,OAAAE,OAAAkF,eAAAlF,OAAAkF,eAAApF,EAAAoC,IAAApC,EAAAqF,UAAAjD,EAAAnB,EAAAjB,EAAAe,EAAA,sBAAAf,EAAAG,UAAAD,OAAAqB,OAAAoB,GAAA3C,GAAAD,EAAAuF,MAAA,SAAAtF,GAAA,OAAAkD,QAAAlD,IAAA4C,EAAAG,EAAA5C,WAAAc,EAAA8B,EAAA5C,UAAAU,EAAA,kBAAAyB,OAAAvC,EAAAgD,gBAAAhD,EAAAwF,MAAA,SAAAvF,EAAAC,EAAAG,EAAAE,EAAAG,QAAA,IAAAA,MAAA+E,SAAA,IAAA7E,EAAA,IAAAoC,EAAA1B,EAAArB,EAAAC,EAAAG,EAAAE,GAAAG,GAAA,OAAAV,EAAAiF,oBAAA/E,GAAAU,IAAAsD,OAAAd,KAAA,SAAAnD,GAAA,OAAAA,EAAAsD,KAAAtD,EAAAQ,MAAAG,EAAAsD,UAAArB,EAAAD,GAAA1B,EAAA0B,EAAA5B,EAAA,aAAAE,EAAA0B,EAAAhC,EAAA,kBAAA2B,OAAArB,EAAA0B,EAAA,mDAAA5C,EAAA0F,KAAA,SAAAzF,GAAA,IAAAD,EAAAG,OAAAF,GAAAC,EAAA,WAAAG,KAAAL,EAAAE,EAAAwE,KAAArE,GAAA,OAAAH,EAAAyF,UAAA,SAAAzB,IAAA,KAAAhE,EAAA6E,QAAA,KAAA9E,EAAAC,EAAA0F,MAAA,GAAA3F,KAAAD,EAAA,OAAAkE,EAAAzD,MAAAR,EAAAiE,EAAAX,MAAA,EAAAW,EAAA,OAAAA,EAAAX,MAAA,EAAAW,IAAAlE,EAAA2C,SAAAlB,EAAArB,UAAA,CAAA8E,YAAAzD,EAAAoD,MAAA,SAAA7E,GAAA,GAAAuC,KAAAsD,KAAA,EAAAtD,KAAA2B,KAAA,EAAA3B,KAAAoB,KAAApB,KAAAqB,MAAA3D,EAAAsC,KAAAgB,MAAA,EAAAhB,KAAAkB,SAAA,KAAAlB,KAAAiB,OAAA,OAAAjB,KAAAV,IAAA5B,EAAAsC,KAAAkC,WAAA3B,QAAA6B,IAAA3E,EAAA,QAAAE,KAAAqC,KAAA,MAAArC,EAAA4F,OAAA,IAAAzF,EAAAyB,KAAAS,KAAArC,KAAA4E,OAAA5E,EAAA6F,MAAA,MAAAxD,KAAArC,GAAAD,IAAA+F,KAAA,WAAAzD,KAAAgB,MAAA,MAAAtD,EAAAsC,KAAAkC,WAAA,GAAAG,WAAA,aAAA3E,EAAA2B,KAAA,MAAA3B,EAAA4B,IAAA,OAAAU,KAAA0D,MAAApC,kBAAA,SAAA7D,GAAA,GAAAuC,KAAAgB,KAAA,MAAAvD,EAAA,IAAAE,EAAAqC,KAAA,SAAA2D,EAAA7F,EAAAE,GAAA,OAAAK,EAAAgB,KAAA,QAAAhB,EAAAiB,IAAA7B,EAAAE,EAAAgE,KAAA7D,EAAAE,IAAAL,EAAAsD,OAAA,OAAAtD,EAAA2B,IAAA5B,KAAAM,EAAA,QAAAA,EAAAgC,KAAAkC,WAAAM,OAAA,EAAAxE,GAAA,IAAAA,EAAA,KAAAG,EAAA6B,KAAAkC,WAAAlE,GAAAK,EAAAF,EAAAkE,WAAA,YAAAlE,EAAA2D,OAAA,OAAA6B,EAAA,UAAAxF,EAAA2D,QAAA9B,KAAAsD,KAAA,KAAA/E,EAAAT,EAAAyB,KAAApB,EAAA,YAAAM,EAAAX,EAAAyB,KAAApB,EAAA,iBAAAI,GAAAE,EAAA,IAAAuB,KAAAsD,KAAAnF,EAAA4D,SAAA,OAAA4B,EAAAxF,EAAA4D,UAAA,MAAA/B,KAAAsD,KAAAnF,EAAA6D,WAAA,OAAA2B,EAAAxF,EAAA6D,iBAAA,GAAAzD,GAAA,GAAAyB,KAAAsD,KAAAnF,EAAA4D,SAAA,OAAA4B,EAAAxF,EAAA4D,UAAA,YAAAtD,EAAA,MAAAsC,MAAA,6CAAAf,KAAAsD,KAAAnF,EAAA6D,WAAA,OAAA2B,EAAAxF,EAAA6D,gBAAAT,OAAA,SAAA7D,EAAAD,GAAA,QAAAE,EAAAqC,KAAAkC,WAAAM,OAAA,EAAA7E,GAAA,IAAAA,EAAA,KAAAK,EAAAgC,KAAAkC,WAAAvE,GAAA,GAAAK,EAAA8D,QAAA9B,KAAAsD,MAAAxF,EAAAyB,KAAAvB,EAAA,eAAAgC,KAAAsD,KAAAtF,EAAAgE,WAAA,KAAA7D,EAAAH,EAAA,OAAAG,IAAA,UAAAT,GAAA,aAAAA,IAAAS,EAAA2D,QAAArE,MAAAU,EAAA6D,aAAA7D,EAAA,UAAAE,EAAAF,IAAAkE,WAAA,UAAAhE,EAAAgB,KAAA3B,EAAAW,EAAAiB,IAAA7B,EAAAU,GAAA6B,KAAAiB,OAAA,OAAAjB,KAAA2B,KAAAxD,EAAA6D,WAAApC,GAAAI,KAAA4D,SAAAvF,IAAAuF,SAAA,SAAAlG,EAAAD,GAAA,aAAAC,EAAA2B,KAAA,MAAA3B,EAAA4B,IAAA,gBAAA5B,EAAA2B,MAAA,aAAA3B,EAAA2B,KAAAW,KAAA2B,KAAAjE,EAAA4B,IAAA,WAAA5B,EAAA2B,MAAAW,KAAA0D,KAAA1D,KAAAV,IAAA5B,EAAA4B,IAAAU,KAAAiB,OAAA,SAAAjB,KAAA2B,KAAA,kBAAAjE,EAAA2B,MAAA5B,IAAAuC,KAAA2B,KAAAlE,GAAAmC,GAAAiE,OAAA,SAAAnG,GAAA,QAAAD,EAAAuC,KAAAkC,WAAAM,OAAA,EAAA/E,GAAA,IAAAA,EAAA,KAAAE,EAAAqC,KAAAkC,WAAAzE,GAAA,GAAAE,EAAAqE,aAAAtE,EAAA,OAAAsC,KAAA4D,SAAAjG,EAAA0E,WAAA1E,EAAAsE,UAAAG,EAAAzE,GAAAiC,IAAAkE,MAAA,SAAApG,GAAA,QAAAD,EAAAuC,KAAAkC,WAAAM,OAAA,EAAA/E,GAAA,IAAAA,EAAA,KAAAE,EAAAqC,KAAAkC,WAAAzE,GAAA,GAAAE,EAAAmE,SAAApE,EAAA,KAAAI,EAAAH,EAAA0E,WAAA,aAAAvE,EAAAuB,KAAA,KAAArB,EAAAF,EAAAwB,IAAA8C,EAAAzE,GAAA,OAAAK,GAAA,MAAA+C,MAAA,0BAAAgD,cAAA,SAAAtG,EAAAE,EAAAG,GAAA,OAAAkC,KAAAkB,SAAA,CAAA5C,SAAA8B,EAAA3C,GAAAiE,WAAA/D,EAAAiE,QAAA9D,GAAA,SAAAkC,KAAAiB,SAAAjB,KAAAV,IAAA5B,GAAAkC,IAAAnC,EA0BO,SAAS8jB,GAAQjP,GAAO,IAE3BI,EAQEJ,EARFI,QACAgK,EAOEpK,EAPFoK,SACA8E,EAMElP,EANFkP,eACAnc,EAKEiN,EALFjN,SAEAoc,GAGEnP,EAJFoP,kBAIEpP,EAHFmP,eACAE,EAEErP,EAFFqP,UACAC,EACEtP,EADFsP,eAGIC,EAAe1W,kBACnB,kBAAMuR,EAASxY,SAASW,IAAI,SAACid,EAAIjD,GAAG,MAAM,CAAE3gB,MAAO2gB,EAAKnK,MAAOoN,EAAGlf,SAClE,CAAC8Z,IAG0BqF,GAAcP,EAAnCQ,OAAmCR,EAA3B9b,MAA2B8b,EAApB1c,MACfA,EAAkCid,EAAlCjd,KAAM2D,EAA4BsZ,EAA5BtZ,QAASnB,EAAmBya,EAAnBza,SAAU1E,EAASmf,EAATnf,KAAI+G,EAEaC,oBAAS,GAAMC,EAAAhE,YAAA8D,EAAA,GAA1DsY,EAAiBpY,EAAA,GAAEqY,EAAoBrY,EAAA,GAExCsY,EAAgC,GAUtC,SAASC,EAAqBC,GAC5B,IAAIvU,EAAG,KACP,GAAQ,MAALuU,GAAYA,EAAI7f,OAAS,EAAG,CAC7B,IAAM8f,EAAaD,EAAI/R,OAAO,SAAAiS,GAAE,OAAEA,EAAGhX,cAAcN,SAAS,aACtDuX,EAAaH,EAAI/R,OAAO,SAAAiS,GAAE,OAAEA,EAAGhX,cAAcN,SAAS,aACtDwX,EAAYJ,EAAI/R,OAAO,SAAAiS,GAAE,OAAEA,EAAGhX,cAAcN,SAAS,YACrDyX,EAAUL,EAAI/R,OAAO,SAAAiS,GAAE,OAAEA,EAAGhX,cAAcN,SAAS,UAEtDqX,EAAW9f,OAAO,EAAGsL,EAAGwU,EAAW,GAC9BE,EAAWhgB,OAAO,EAAGsL,EAAG0U,EAAW,GACnCC,EAAUjgB,OAAO,EAAGsL,EAAG2U,EAAU,GACjCC,EAAQlgB,OAAO,EAAGsL,EAAG4U,EAAQ,GAC7BL,EAAI7f,OAAO,IAAGsL,EAAGuU,EAAI,IAE/B,MAAO,CAACnkB,MAAM4P,EAAG4G,MAAM5G,GAtBzBhJ,EAAKoC,OAAO3G,QAAQ,SAAC0F,GACnB,IAAMsc,EAAKzd,EAAKyB,WAAWN,EAAMO,IAAIJ,KACjCmX,EAAM,IACN,WAAYgF,GAAM,WAAYA,IAAIhF,EAAIpb,KAAK,SAC3C,WAAYogB,GAAM,WAAYA,GAAM,WAAYA,IAAIhF,EAAIpb,KAAK,QACjEggB,EAA8Blc,EAAMO,IAAM+W,IAoB5C,IAAMoF,EAAe,CACnBhC,WAAYwB,EAA8Brd,EAAKoC,OAAO,GAAGV,IAAI,GAC7D+R,QAAS,KACTtS,MAAOnB,EAAKoC,OAAO,GAAGV,GACtBkZ,KAAM,CAAC,QACPkD,UAAW9d,EAAKuD,KAAKwa,OAAO,GAC5B/Y,YAAa,UACbR,WAAY8Y,EAAqBtd,EAAKyB,WAAWzB,EAAKoC,OAAO,GAAGV,IAAIN,aACpEwD,qBAAsB,MACtBM,EAE6BJ,mBAAS+Y,GAAa1Y,EAAApE,YAAAmE,EAAA,GAA9CkF,EAAMjF,EAAA,GAAE6Y,EAAY7Y,EAAA,GACrB/D,EAAcpB,EAAKyB,WAAW2I,EAAOjJ,OAAOC,YAE5C6c,EAAe,CACnB,CAAEngB,KAAM,OAAQogB,KAAM,iBAGN,MAAf9c,GAAuBtI,OAAOuF,KAAK+C,GAAa1D,OAAS,GAC1DugB,EAAe5gB,KAAK,CAAES,KAAM,UAAWogB,KAAM,cAG/CD,EAAe5gB,KAAK,CAAES,KAAM,UAAWogB,KAAM,UAAW,IAAAC,EAEnB9K,GAAc,CACjD1P,UACAya,WAAYhU,EACZ9I,KAAMtB,EAAKyB,WAAW2I,EAAOjJ,OAAOG,OACpC+c,EAAAtd,YAAAod,EAAA,GAJK7K,EAAU+K,EAAA,GAAE3M,EAAc2M,EAAA,GAAAC,EAMR5C,GACvBtR,EACApK,EAAKyB,WACL6R,GACDiL,EAAAxd,YAAAud,EAAA,GAJME,EAAID,EAAA,GAAE9M,EAAQ8M,EAAA,GAAAE,ENtGvB,WACI,IAAMC,EAAW,CAAC,OAAQ,qBAAoB7Z,EACRC,mBAAS,GAAEC,EAAAhE,YAAA8D,EAAA,GAA1C8Z,EAAW5Z,EAAA,GAAE6Z,EAAc7Z,EAAA,GAKlC,MAAO,CAAC2Z,EAASC,GAHjB,WACIC,GAAgBD,EAAY,GAAGD,EAAShhB,UMuGLmhB,GAAgBC,EAAA/d,YAAA0d,EAAA,GAAlD9Z,EAAWma,EAAA,GAAEC,EAAiBD,EAAA,GAE/BE,EAAuB3B,EAA8BjT,EAAOjJ,OAsElE,SAAS8d,GAA4BtmB,EAAGqQ,GACtCoU,GAAqB,GACjBzkB,EAAES,QAAUsjB,EAAe1c,KAAKQ,YACpCmc,EAAchkB,EAAES,MAAOmH,GAGzB,SAAS2e,GAAuBlW,GAC9B,GAAU,MAANA,GACAA,EAAG5P,OAASgR,EAAO5F,WAAWpL,MAAlC,CACA,IAAI+lB,EAAS3Q,YAAA,GAAQpE,GACrB+U,EAAU3a,WAAawE,EACvBoW,GAAkB,MAClBpB,EAAamB,IA9EfX,EAAKjU,OAAO8P,WAAawC,EACzB2B,EAAKjU,OAAOf,OAAO3Q,EAAgB,EA8ElC,IAAAyM,GAG2CR,mBAAS,MAAKS,GAAAxE,YAAAuE,GAAA,GAAnD4F,GAAc3F,GAAA,GAAE6Z,GAAiB7Z,GAAA,GAAAG,GACNZ,oBAAS,GAAKa,GAAA5E,YAAA2E,GAAA,GAAzC2Z,GAAS1Z,GAAA,GAAE2Z,GAAY3Z,GAAA,GAAAG,GACWhB,oBAAS,GAAKiB,GAAAhF,YAAA+E,GAAA,GAAhDpB,GAAeqB,GAAA,GAAeA,GAAA,GAErC/B,oBAAW,WACT,GAAyB,MAArBoG,EAAO5F,YAAkD,OAA5B4F,EAAO5F,WAAWpL,MAAnD,CACA,IAAM+I,EAAG,GAAAtB,OAAMb,EAAKmC,IAAG,KAAAtB,OAAIuJ,EAAOjJ,MAAK,gBAAAN,OAAeuJ,EAAO5F,WAAWpL,OAAKyH,OAAG6D,GAAkB,QAAU,IAC5G4a,IAAa,GAEE,eAAAngB,EAAA6C,YAAAtJ,KAAAqF,KAAG,SAAAmG,IAAA,IAAAgH,EAAA,OAAAxS,KAAAuB,KAAA,SAAAkK,GAAA,cAAAA,EAAA3F,KAAA2F,EAAAtH,MAAA,cAAAsH,EAAAtH,KAAA,EACoBoG,MAAMd,GAAI,cAAAgC,EAAAtH,KAAA,EAAAsH,EAAA7H,KAAE4G,OAAI,OAA9CgI,EAAc/G,EAAA7H,KACpB8iB,GAAkBlU,GAClBoU,IAAa,GAAO,wBAAAnb,EAAAxF,SAAAuF,MACrB,kBAJc,OAAA/E,EAAA2C,MAAA5G,KAAA6G,YAAA,EAKfwd,KACC,CAACnV,EAAO5F,aAEX,IAAIC,GAAuB2F,EAAOxF,qBAClC,GAAGsG,GAAgB,CACjB,IAAM7M,GAAOvF,OAAOuF,KAAK6M,IACtB7M,GAAK8H,SAAS,WACf1B,GAAuB,KACK,MAAtBA,IAA+BpG,GAAK8H,SAAS1B,MACnDA,GAAuBpG,GAAKE,OAUhC,SAASihB,GAA2BxW,GACxB,MAANA,GANN,SAAoCA,GAClC,IAAImW,EAAS3Q,YAAA,GAAQpE,EAAM,CAAExF,qBAAsBoE,IACnDgV,EAAamB,GAKbM,CAA2BzW,GAG7B,SAAS0W,KACP,OAAOzB,EAAezS,OAAO,SAAA3S,GAAC,OAAIuR,EAAOwQ,KAAKzU,SAAStN,EAAEiF,QAAOiC,IAAI,SAAAlH,GAAC,OAAIA,EAAEiF,OAG7E,SAAS6hB,KACP,OAAOxC,EACL5U,IAAAC,cAACqK,IAAW,CAACnF,UAAWE,EAAQgS,qBAAsB7M,QAAQ,YAC5DxK,IAAAC,cAACqI,EAAe,CACdjD,QAASA,EACToE,QAAS+K,EACT3jB,MAAO,CACLA,MAAOsjB,EAAe1c,KAAKQ,WAC3BoP,MAAO8M,EAAe1c,KAAKlC,MAE7BiL,SAAUkW,GACVY,mBAAmB,EACnBC,YAAa,WACX1C,GAAqB,IAEvB3T,YAAY,aAIhBlB,IAAAC,cAAAD,IAAAE,SAAA,KACEF,IAAAC,cAACkM,IAAU,CAAC5L,MAAM,UAAUiB,QAAS,kBAAMqT,GAAqB,KAC9D7U,IAAAC,cAACqM,IAAI,KAAC,WAERtM,IAAAC,cAAA,YACED,IAAAC,cAAA,SAAI1K,KAOZ,SAASiiB,KACP,IACQ/a,EAAmCoF,EAAnCpF,YAAaR,EAAsB4F,EAAtB5F,WAAYrD,EAAUiJ,EAAVjJ,MAC3B6e,EAAkBN,KAAcvZ,SAAS,WAE/C,IAAK6Z,EAAiB,OAAO,KAE7B,IAKMC,EAAS,CAAEzW,OAAQ,MAAO0W,IAAK,EAAGC,WAAYT,KAAcvZ,SAAS,SAAS0W,EAAU,MAAM,SAE9FuD,GAAwBf,IAAaW,EACrCK,GAAyBhB,IAA6B,SAAhB1a,GAA0BuG,KAAmBpS,OAAOuF,KAAK6M,IAAgB/E,SAAS,WAE9H,OACEoC,IAAAC,cAAC8X,IAAI,CAAC9Y,MAAI,EAAC+Y,GAAIC,GAAc9S,UAAWE,EAAQ4Q,KAAM7V,MAAO,CAAC8X,UAAW,WACtD,SAAhB9b,GACC4D,IAAAC,cAAA,OAAKkF,UAAWmP,EAAUjP,EAAQ8S,iBAAiB9S,EAAQ+S,cAAehY,MAAO,CAAEuX,IAAK,IACtF3X,IAAAC,cAACqK,IAAW,CAACnF,UAAWE,EAAQgT,cAAejY,MAAOsX,EAAQlN,QAAQ,YACpExK,IAAAC,cAACqI,EAAe,CACdjD,QAASA,EACToE,QAAS5Q,EAAYrB,IAAI,SAAAtG,GAAC,MAAK,CAAEL,MAAOK,EAAGmW,MAAOnW,KAClDL,MAAOoL,EACPuE,SAAUmW,GACVzV,YAAY,YAIf2W,GACC7X,IAAAC,cAACI,IAAiB,CAACD,MAtBd,CAAEa,OAAQ,MAAO0W,IAAK,EAAGC,WAAY,SAsBRrX,MAAM,UAAU1P,MAAO4L,EAAakE,WAAS,EAACH,SAzB1D,SAACyN,EAAGvN,GAAQ,OAxH9C,SAA2BD,GACzB,GAAU,MAANA,EAAJ,CACA,IAAImW,EAAS3Q,YAAA,GAAQpE,GACrB+U,EAAUna,YAAcgE,EACxBgV,EAAamB,IAoHoC0B,CAAkB5X,KA0BvDV,IAAAC,cAACW,IAAY,CAACE,IAAI,yBAAyBjQ,MAAM,WAAU,WAC3DmP,IAAAC,cAACW,IAAY,CAACE,IAAI,kCAAkCjQ,MAAM,iBAAgB,YAI7EinB,GAEC9X,IAAAC,cAACI,IAAiB,CAACD,MA7Bd,CAAEa,OAAQ,MAAO0W,IAAK,EAAGC,WAAY,QA6BRrX,MAAM,UAAU1P,MAAOqL,GAAsByE,WAAS,EAACH,SAhC1D,SAACyN,EAAGvN,GAAQ,OAAKuW,GAA2BvW,KAiC1EnQ,OAAOuF,KAAK6M,IAAgBnL,IAAI,SAAC+gB,EAAc/Z,GAAK,OACjDwB,IAAAC,cAACW,IAAY,CAACE,IAAG,8BAAAxI,OAAgCkG,GAAS3N,MAAO0nB,GAC9DA,OAQbvY,IAAAC,cAAA,OAAKG,MAAO,CAAE4M,UAAW,GAAIpN,MAAO,SACjCkX,IACC9W,IAAAC,cAACE,IAAG,CAACa,GAAI,CAAEV,QAAS,OAAQkY,eAAgB,WAC1CxY,IAAAC,cAACwY,IAAgB,QAInB3B,IAAanU,IAAkC,kBAAhBlG,GAC/BuD,IAAAC,cAACyC,EAAqB,CACpBC,eAAgBA,GAEhBtG,qBAAsBH,MAI9B4a,IAAanU,IAAkC,YAAhBlG,GAEzBuD,IAAAC,cAACjE,EAAgB,CACfvE,KAAMkL,GACNxG,gBAAiBA,GACjBF,WAAYA,EAAWpL,MACvB+H,MAAOA,EAEPsD,qBAAsBA,GACtBE,YAAaA,MAYzB,IAAMsc,GAAe7W,EAAOwQ,KAAKzU,SAAS,QACpC+a,GAAkB9W,EAAOwQ,KAAKzU,SAAS,WACvCqa,GAAe,GAAKd,KAAchiB,OAClCyjB,GAAkBF,IAAgB7W,EAAOwQ,KAAKzU,SAAS,WACvDwC,GAAQ,CAAEa,OAAQ,OAGxB,SAAS4X,KACP,GAAoB,SAAhBzc,EAAyB,OAAO,KAMpC,OACE4D,IAAAC,cAAC8X,IAAI,CAACe,WAAS,EAAC3T,UAAWE,EAAQ0T,kBACjC/Y,IAAAC,cAACI,IAAiB,CAACD,MAAOA,GAAOG,MAAM,UAAU1P,MAAOgR,EAAOwQ,KAAM1R,WAAY2T,EAAW9T,SANvE,SAACc,EAAOZ,GAAQ,OAhO3C,SAAoBD,GAClB,GAAU,MAANA,EAAJ,CACA,IAAImW,EAAS3Q,YAAA,GAAQpE,GACrB+U,EAAUvE,KAAO5R,EACjBgV,EAAamB,IA4NiCoC,CAAWtY,KAOlDgV,EAAele,IAAI,SAAA0L,GAAC,OACnBlD,IAAAC,cAACW,IAAY,CAACC,eAAa,YAAYC,IAAG,QAAAxI,OAAU4K,EAAE3N,MAAQ1E,MAAOqS,EAAE3N,MACrEyK,IAAAC,cAACqM,IAAI,KAAEpJ,EAAEyS,UAQU,KAGxB+C,IACC1Y,IAAAC,cAACI,IAAiB,CAACD,MAAOA,GAAOG,MAAM,UAAU1P,MAAOgR,EAAOyR,WAAY3S,WAAS,EAACH,SApB3D,SAACc,EAAOZ,GAAQ,OA1PlD,SAAiCD,GAC/B,GAAU,MAANA,EAAJ,CACA,IAAImW,EAAS3Q,YAAA,GAAQpE,GACrB+U,EAAUtD,WAAa7S,EACvBgV,EAAamB,IAsPwCqC,CAAwBvY,KAqBpE+V,EAAqBjf,IAAI,SAAA9E,GAAC,OACzBsN,IAAAC,cAACW,IAAY,CAACC,eAAa,kBAAkBC,IAAG,mBAAAxI,OAAqB5F,GAAK7B,MAAO6B,GAC9EA,MAMRkmB,IACC5Y,IAAAC,cAACI,IAAiB,CAACD,MAAOA,GAAOG,MAAM,UAAU1P,MAAOgR,EAAOjJ,MAAO+H,WAAS,EAACH,SA7B5D,SAACc,EAAOZ,GAAQ,OApP5C,SAAqBD,GACnB,GAAU,MAANA,EAAJ,CACA,IAAImW,EAAS3Q,YAAA,GAAQpE,GACrB+U,EAAUhe,MAAQ6H,EAClBmW,EAAU3a,WAAa8Y,EAAqBtd,EAAKyB,WAAWuH,GAAI5H,aAChEge,GAAkB,MAClBpB,EAAamB,IA8OkCsC,CAAYxY,KA8BlDjJ,EAAKoC,OAAOrC,IAAI,SAAApF,GAAC,OAChB4N,IAAAC,cAACW,IAAY,CAACC,eAAa,aAAaC,IAAG,SAAAxI,OAAWlG,EAAE+G,IAAMtI,MAAOuB,EAAE+G,IACpE/G,EAAEmD,UAejB,OACEyK,IAAAC,cAAC8H,IAAK,CAAC5C,UAAWE,EAAQ4C,OACxBjI,IAAAC,cAAC8X,IAAI,CAACe,WAAS,EAAC3T,UAAWE,EAAQ8T,YAAaC,WAAW,UACzDpZ,IAAAC,cAACmX,GAAe,OAGjBsB,IACC1Y,IAAAC,cAAA,OAAKkF,UAAWE,EAAQ8S,kBACtBnY,IAAAC,cAACgJ,GAAkB,CACjB5D,QAASA,EACTtM,KAAMtB,EAAKyB,WAAW2I,EAAOjJ,OAAOG,KACpCqQ,SAAU3R,EAAKuD,KAAKoO,SACpBpQ,eAAgBvB,EAAKyB,WAAW2I,EAAOjJ,OAAOI,eAC9CC,aAAcxB,EAAKyB,WAAW2I,EAAOjJ,OAAOK,aAC5CiQ,SAAUA,EACVjP,SAAUA,EACV8Q,WAAYA,EACZ5B,eAAgBA,EAChB/M,YAAaA,KAKnB4D,IAAAC,cAAC8X,IAAI,CAACe,WAAS,EAAC3T,UAAWE,EAAQgU,SAAUC,QAAS,GACnDZ,IACC1Y,IAAAC,cAAC8X,IAAI,CAAC9Y,MAAI,EAAC+Y,GAAIC,GAAc9S,UAAWE,EAAQ4Q,MAC9CjW,IAAAC,cAAC0B,IAAI,CACHwD,UAAWE,EAAQ4Q,KACnBxe,KAAMwe,EAAKxe,KACXuK,OAAQiU,EAAKjU,OACbH,OAAQoU,EAAKpU,OACbmR,iBAAkBiD,EAAKjD,oBAQ7BhT,IAAAC,cAAC4Y,GAAoB,MACrB7Y,IAAAC,cAACuX,GAAgB,MAEhBmB,IACC3Y,IAAAC,cAAC8X,IAAI,CAAC9Y,MAAI,EAAC+Y,GAAIC,GAAc9S,UAAWE,EAAQ4Q,KAAM7V,MAAO,CAAE8X,UAAW,WACvD,SAAhB9b,GACC4D,IAAAC,cAAA,OAAKkF,UAAWmP,EAAUjP,EAAQ8S,iBAAiB9S,EAAQ+S,cAAgBhY,MAAO,CAAEuX,IAAK,IAEvF3X,IAAAC,cAACI,IAAiB,CAACD,MAlDlB,CAAEa,OAAQ,MAAO0W,IAAK,EAAGC,WAAY,SAkDJrX,MAAM,UAAU1P,MAAOgR,EAAO0T,UAAW5U,WAAS,EAACH,SAnDrE,SAACc,EAAOZ,GAAQ,OAtQ9C,SAAyBD,GACvB,GAAU,MAANA,EAAJ,CACA,IAAImW,EAAS3Q,YAAA,GAAQpE,GACrB+U,EAAUrB,UAAY9U,EACtBgV,EAAamB,IAkQoC2C,CAAgB7Y,KAoDlDjJ,EAAKuD,KAAKwa,OAAOld,OAAO,YAAYd,IAAI,SAAA9E,GAAC,OACxCsN,IAAAC,cAACW,IAAY,CAACC,eAAa,aAAaC,IAAG,kBAAAxI,OAAoB5F,GAAK7B,MAAO6B,GACxEA,OAKXsN,IAAAC,cAACyM,GACC,CACAtM,MAAO,CAAEoZ,SAAU,UACnBpQ,SAA+B,aAArBvH,EAAO0T,UAA2Btb,EAAWxC,EAAKuD,KAAKoO,SAASvH,EAAO0T,WACjFpK,MAAOtJ,EAAO0T,cAMtBvV,IAAAC,cAAC8X,IAAI,CAACe,WAAS,EAAC3T,UAAWE,EAAQoU,YAAaL,WAAW,UACzDpZ,IAAAC,cAAA,OAAKG,MAAO,CAAEa,OAAQ,SACpBjB,IAAAC,cAACkM,IAAU,CAAC3K,QAAS+S,EAAgBhU,MAAM,WACzCP,IAAAC,cAACqM,IAAI,KAAC,gBAERtM,IAAAC,cAACkM,IAAU,CAAC3K,QAASgV,EAAmBjW,MAAM,WAC5CP,IAAAC,cAACqM,IAAI,KAnUf,WACE,OAAQlQ,GACN,IAAK,OAEL,IAAK,oBACH,MAAO,kBACT,IAAK,4BACH,MAAO,aACT,QACE,OAAO,MA0TIsd,KAGRjiB,EAAKsC,KACJiG,IAAAC,cAACkM,IAAU,CAAC/L,MAAO,CAAEwX,WAAY,QAAUpW,QA1TrD,WACEmY,OAAOC,KAAI,UAAAthB,OAAWb,EAAKsC,OAyTkDwG,MAAM,WACzEP,IAAAC,cAACqM,IAAI,KAAC,gBC3ULuN,4BA9JA,SAAAC,GAAK,MAAK,CACvBC,KAAM,CACFC,SAAU,EACVra,OAAQ,OACRC,MAAO,QAEXsG,MAAO,CACH5F,QAAS,OACT2Z,QAAS,GAEb1H,MAAO,CACHqF,WAAYkC,EAAMR,QAAQY,KAC1BC,YAAaL,EAAMR,QAAQY,KAC3BlN,UAAW,EACXoN,aAAc,EACdC,SAAU,cAEdC,KAAM,CACF1C,WAAYkC,EAAMR,QAAQY,KAC1BC,YAAaL,EAAMR,QAAQY,MAE/BjS,MAAO,CACHtI,OAAQ,OACRC,MAAO,QAEX2a,UAAW,CACP3C,WAAYkC,EAAMR,QAAQY,KAC1BC,YAAaL,EAAMR,QAAQY,MAE/B/B,iBAAkB,CACdqC,SAAU,WACVC,OAAQ,IAEZrC,cAAe,CACbqC,OAAQ,IAEVC,YAAa,GACbC,OAAQ,CACJH,SAAU,WACV7C,IAAK,MACLiD,KAAM,MACNC,MAAO,MACPC,gBAAiB,QACjBlD,WAAY,OACZuC,YAAa,OACbF,QAAS,OACTQ,OAAQ,KAEZpB,SAAU,CACN1Z,OAAQ,oBACRC,MAAO,QAEXqW,KAAM,CACFtW,OAAQ,OACRC,MAAO,oBAEXmZ,iBAAkB,CACdyB,SAAU,WACV5a,MAAO,MACPmb,OAAQ,OACRN,OAAQ,KAEZO,OAAQ,CACJR,SAAU,WACV5a,MAAO,OACPwa,aAAc,MACdH,QAAS,MACTc,OAAQ,MACRE,SAAU,QACVR,OAAQ,IAEZtB,YAAa,CACT+B,WAAY,SACZja,OAAQ,MACRS,UAAW,OACXuY,QAAS,MACTvM,MAAO,OACPiK,IAAK,MACLsD,SAAU,QACVR,OAAQ,IAEZhB,YAAa,CACTyB,WAAY,SACZd,aAAc,MACdH,QAAS,MACTvM,MAAO,SACPqN,OAAQ,MACRE,SAAU,QACVR,OAAQ,IAEZpD,qBAAsB,CAClBmD,SAAU,WACV7C,IAAK,EACLC,WAAY,EACZ6C,OAAQ,KAEZlQ,cAAe,CACXtJ,OAAQ6Y,EAAMR,QAAQY,KACtBiB,SAAU,IACVpO,SAAU,KAEdpC,aAAc,CACV1J,OAAQ6Y,EAAMR,QAAQY,KACtBiB,SAAU,IACVpO,SAAU,KAEdqO,oBAAqB,CACjBna,OAAQ6Y,EAAMR,QAAQY,KACtBiB,SAAU,IACVpO,SAAU,OAiDD8M,CA7Cf,SAAqBjjB,GAA2C,IAAxCyO,EAAOzO,EAAPyO,QAASgK,EAAQzY,EAARyY,SAAUvY,EAAiBF,EAAjBE,kBACtBukB,EACmB1kB,EAAc,CAAEE,SAAUwY,EAASxY,SAAUC,oBAAmBC,QADrF,IACuGukB,EAAA9iB,YAAA6iB,EAAA,GAA/GE,EAAUD,EAAA,GAAElH,EAAakH,EAAA,GAAAhf,EACkBC,mBAAS,GAAEC,EAAAhE,YAAA8D,EAAA,GAAtDkf,EAAiBhf,EAAA,GAAEif,EAAoBjf,EAAA,GAE9C,SAASkf,EAAUjb,GACL,MAANA,GACJgb,EAAqBhb,GAGzB,OACIT,IAAAC,cAAC8X,IAAI,CAACe,WAAS,EAAC3T,UAAWE,EAAQ0U,KAAMT,QAAS,IACtB,IAAvBkC,EACKjkB,MAZC,GAYaokB,KAAK,GAAGnkB,IAAI,SAACmH,EAAS6S,GAAG,OACrCxR,IAAAC,cAAC8X,IAAI,CAACjX,IAAG,WAAAxI,OAAakZ,GAAOvS,MAAI,EAAC+Y,GAAI,GACR,OAAzBuD,EAAW/J,GAAK/Z,KACX,UACAuI,IAAAC,cAACiU,GAAO,CACN7O,QAASA,EACTgK,SAAUA,EACV8E,eAAgBoH,EAAW/J,GAC3BxZ,SAAUwZ,EACV4C,cAAeA,EACfE,WAAW,EACXC,eAAgB,kBAAMmH,EAAUlK,SAG9CxR,IAAAC,cAAC8X,IAAI,CAAC9Y,MAAI,EAAC+Y,GAAI,IAC2B,OAAvCuD,EAAWC,GAAmB/jB,KACzB,UACAuI,IAAAC,cAACiU,GAAO,CACN7E,SAAUA,EACVhK,QAASA,EACT8O,eAAgBoH,EAAWC,GAC3BxjB,SAAUwjB,EACVpH,cAAeA,EACfE,WAAW,EACXC,eAAgB,kBAAMmH,GAAW,wIC5I7D,SAASE,GAAe3W,GACtB,OACEjF,IAAAC,cAAC4b,KAAS,KACR7b,IAAAC,cAAC8H,KAAU9C,IAKjB,IAkNe4U,wBAlNA,SAACC,GAAK,MAAM,CACzBC,KAAM,CACJna,MAAO,OACPkb,gBAAiBhB,EAAMgC,QAAQC,WAAW9T,OAE5C+T,SAAU,CACRpE,WAAY,OACZkD,gBAAiBhB,EAAMgC,QAAQC,WAAWE,QAE5CC,SAAU,CACRC,UAAW,CACTrB,gBAAiBhB,EAAMgC,QAAQC,WAAW9T,OAE5CmU,OAAQ,WAEVC,UAAW,CACTC,MAAO,QACPC,UAAW,SACXtB,SAAU,WAEZuB,aAAc,CACZhC,SAAU,SACV7C,IAAK,EACLmD,gBAAiBhB,EAAMgC,QAAQC,WAAW9T,MAC1CwS,OAAQ,KA0LGZ,CAtLS,SAAHjjB,GASf,IARJyO,EAAOzO,EAAPyO,QACAuU,EAAIhjB,EAAJgjB,KACA6C,EAAO7lB,EAAP6lB,QACAC,EAAQ9lB,EAAR8lB,SACAnK,EAAK3b,EAAL2b,MACA1b,EAAQD,EAARC,SACA8lB,EAAQ/lB,EAAR+lB,SACAC,EAAYhmB,EAAZgmB,aAAYtgB,EAEgBC,mBAAS,QAAOC,EAAAhE,YAAA8D,EAAA,GAArC8f,EAAM5f,EAAA,GAAEqgB,EAASrgB,EAAA,GAclBsgB,EANoBjmB,EAASW,IAAI,SAAAulB,GAAO,OAAA9W,YAAA,GACzC8W,EAAO,CACVC,MAAOD,EAAQC,OAAS,OAIe5d,KAAK,SAACpO,EAAGqO,GAChD,MAAe,aAAXrO,EAAEuE,MAA6B,EACpB,aAAX8J,EAAE9J,KAA4B,EAC7BvE,EAAEgsB,MACF3d,EAAE2d,MACHhsB,EAAEgsB,MAAQ3d,EAAE2d,OAAe,EAC3BhsB,EAAEgsB,MAAQ3d,EAAE2d,MAAc,EACvB,GAHe,EADD,IAOvB,OACEhd,IAAAC,cAAA,WACED,IAAAC,cAACgd,KAAM,CACLrD,KAAMA,EACN6C,QA1Bc,WAClBI,EAAU,QACVJ,EAAQ,OAyBJb,eAAgBA,GAChBzW,UAAWE,EAAQ0U,KACnBmD,qBAAsBR,EACtBS,qBAAsBT,EACtBU,kBAAgB,yBAChBrQ,SAAS,MAET/M,IAAAC,cAACod,KAAW,CAAClkB,GAAG,0BAA0BoZ,GAC1CvS,IAAAC,cAACqd,KAAa,KACZtd,IAAAC,cAAA,MAAIkF,UAAWE,EAAQ2W,UACpB,IACDhc,IAAAC,cAAA,aAAO,eAAoB,KAG7BD,IAAAC,cAAC6M,IAAK,KACJ9M,IAAAC,cAACsd,IAAS,KACRvd,IAAAC,cAACoN,IAAQ,CAAClI,UAAWE,EAAQmX,cAC3Bxc,IAAAC,cAACqN,IAAS,KAAC,WACXtN,IAAAC,cAACqN,IAAS,KAAC,SACXtN,IAAAC,cAACqN,IAAS,KAAC,UACXtN,IAAAC,cAACqN,IAAS,KAAC,cACXtN,IAAAC,cAACqN,IAAS,KAAC,eAGftN,IAAAC,cAACkN,IAAS,KACP2P,EAAetlB,IACd,SAAAkE,EAYE8C,GAAK,IAVHpJ,EAAWsG,EAAXtG,YACA4nB,EAAKthB,EAALshB,MACAznB,EAAImG,EAAJnG,KACAsE,EAAM6B,EAAN7B,OACAC,EAAU4B,EAAV5B,WACA0jB,EAAS9hB,EAAT8hB,UACAC,EAAO/hB,EAAP+hB,QACUC,EAAahiB,EAAvB7E,SACA8mB,EAAQjiB,EAARiiB,SAAQ,OAIV3d,IAAAC,cAACC,WAAQ,CAACY,IAAKtC,GACbwB,IAAAC,cAACoN,IAAQ,CACPlI,UAAWE,EAAQ6W,SACnB9b,MAAO,CAAEgc,UACTwB,OAAK,EACLpc,QAAS,WACHic,EACFb,EAAarnB,IAEbsnB,EAAU,QACVJ,EAAQje,MAIZwB,IAAAC,cAACqN,IAAS,KACPmQ,EAAO,GAAAnlB,OACDqlB,EAAW,IAAM,IAAG,KAAArlB,OAAIlD,GAC3BG,GAENyK,IAAAC,cAACqN,IAAS,KAAEmQ,EAAUT,EAAQ,IAAe,IAC7Chd,IAAAC,cAACqN,IAAS,KACPmQ,EAAU,GAAK5jB,EAAO1E,QAEzB6K,IAAAC,cAACqN,IAAS,KACPmQ,EAAU,GAAK3jB,EAAW3E,QAE7B6K,IAAAC,cAACqN,IAAS,KACPmQ,IAAYD,EACT,GACc,OAAdA,EAEAxd,IAAAC,cAAA,KACE4d,KAAML,EACNjc,OAAO,SACPuc,IAAI,uBAEHN,GAGH,KAIPC,GACCE,GACAD,EAAclmB,IAAI,SAACulB,EAASgB,GAAQ,OAClC/d,IAAAC,cAACoN,IAAQ,CACPvM,IAAG,GAAAxI,OAAKkG,EAAK,KAAAlG,OAAIylB,GACjB5Y,UAAWE,EAAQ6W,SACnB9b,MAAO,CAAEgc,UACTwB,OAAK,EACLpc,QAAS,WACPqb,EAAU,QACVJ,EAAQM,EAAQiB,iBAGlBhe,IAAAC,cAACqN,IAAS,CAAClN,MAAO,CAAE6d,YAAa,SAC9BlB,EAAQxnB,MAEXyK,IAAAC,cAACqN,IAAS,KAAE,IAAe,IAC3BtN,IAAAC,cAACqN,IAAS,KAAEyP,EAAQljB,OAAO1E,QAC3B6K,IAAAC,cAACqN,IAAS,KACPyP,EAAQjjB,WAAW3E,QAEtB6K,IAAAC,cAACqN,IAAS,KACe,OAAtByP,EAAQS,UACPxd,IAAAC,cAAA,KACE4d,KAAMd,EAAQS,UACdjc,OAAO,SACPuc,IAAI,uBAEHf,EAAQS,WAGX,YAWpBxd,IAAAC,cAAA,WACAD,IAAAC,cAAA,WACAD,IAAAC,cAACie,KAAO,MACRle,IAAAC,cAAA,WACAD,IAAAC,cAAA,QAAMkF,UAAWE,EAAQgX,WAAW,UAC1BM,EAASwB,QAAQ,sBAAwB,IAChDxB,EAASyB,SAAS,uBAEnBpe,IAAAC,cAAA,KAAG4d,KAAK,8CACN7d,IAAAC,cAAA,SAAG,gBChOJ0c,GAAW,CAACwB,QAAS,QAASC,SAAU,UAAWC,OAAQ,QCmElEC,GAAc/tB,OAAOwZ,QAxBN,CACnBwU,QAAW,CAAC,QACZC,MAAS,CAAC,MAAO,MAAO,MAAO,MAAO,QACtCC,KAAQ,CAAC,KAAM,OAAQ,MACvBC,MAAS,CAAC,SAAU,MACpBC,OAAU,CAAC,QACXC,WAAc,CAAC,OACfC,UAAa,CAAC,QACdC,IAAO,CAAC,KAAM,OACdC,cAAe,CAAC,QAChBC,OAAU,CAAC,OAAQ,OAAQ,SAC3BC,MAAS,CAAC,OAAQ,OAAQ,MAC1BC,KAAQ,CAAC,QAAS,QAClBC,aAAc,CAAC,MAAO,QACtBC,iBAAkB,CAAC,QAAS,MAAO,KAAM,gBACzCC,SAAY,CAAC,QACbC,gBAAiB,CAAC,OAAQ,KAAM,QAChCC,SAAY,CAAC,QACbC,KAAQ,CAAC,MAAO,MAAO,KAAM,QAAS,MAAO,QAC7CC,cAAe,CAAC,OAAQ,OAAQ,MAAO,MACvCC,QAAW,CAAC,UAImC3gB,OAAO,SAAC4gB,EAAG/oB,GAAqB,IAAA8E,EAAAlD,YAAA5B,EAAA,GAAlBomB,EAAKthB,EAAA,GAIlE,OAJyEA,EAAA,GACnExI,QAAQ,SAAA0Q,GACZ+b,EAAI/b,GAAQoZ,IAEP2C,GACN,IA2EY9F,wBA1IA,SAAAC,GAAK,MAAK,CACvB8F,IAAK,CACH3e,OAAQ6Y,EAAMR,QAAQY,KACtBM,SAAU,WACVK,MAAO,OACPE,OAAQ,OACRN,OAAQ,KAEVoF,KAAM,CACJ5e,OAAQ6Y,EAAMR,QAAQY,KACtBM,SAAU,WACVK,MAAO,QACPE,OAAQ,OACRN,OAAQ,OA6HGZ,CAzEE,SAAC5U,GACIA,EAAZI,QADkB,IACX/I,EACWC,mBAAS,CACjC8S,SAAU,KACVyQ,SAAS,EACTC,gBAAgB,EAChBC,oBAAoB,EACpBlpB,kBAAmB,KACnBmpB,gBAAiB,GACjBC,eAAgB,KAChB1jB,EAAAhE,YAAA8D,EAAA,GARK1E,EAAK4E,EAAA,GAAE2jB,EAAQ3jB,EAAA,GAUtBf,oBAAU,WACRf,MAhFgB,6BAiFblH,KAAK,SAAA8G,GAAQ,OAAIA,EAASK,SAC1BnH,KAAK,SAAA6b,GACJ,IAAM4Q,EAhEQ,SAACppB,GACrB,IAAMupB,EAAU,GAYhB,OAVAvpB,EAAS3D,QAAQ,SAAC6pB,EAASvL,GACzB,IACM6O,GADOtD,EAAQxnB,MAAQ,IACTkM,MAAM,KAAK,GAE1B2e,EAAQC,KACXD,EAAQC,GAAU,IAEpBD,EAAQC,GAAQvrB,KAAImR,YAAA,GAAM8W,EAAO,CAAEiB,cAAexM,OAG7C4O,EAmDuB1C,CAAcrO,EAASxY,UAC/CspB,EAAS,SAAAG,GAAS,OAAAra,YAAA,GAAUqa,EAAS,CAAEjR,WAAU4Q,yBAEpD,IAqBH,OACEjgB,IAAAC,cAAA,OAAKkF,UAAU,OACO,OAAnBvN,EAAMyX,UACLrP,IAAAC,cAACsgB,GAAU,CACT9D,QAvBgB,SAAC3lB,GACvBqpB,EAAS,SAAAG,GAAS,OAAAra,YAAA,GACbqa,EAAS,CACZP,gBAAgB,EAChBjpB,oBACAkpB,mBAA0C,OAAtBlpB,OAmBhBD,SAAUtG,OAAOuF,KAAK8B,EAAMqoB,iBAAiBzoB,IAAI,SAAA6oB,GAAM,MAAK,CAC1DjrB,YAAW,GAAAkD,OAAK+nB,EAAM,MAAA/nB,OAAKV,EAAMqoB,gBAAgBI,GAAQlrB,OAAM,KAC/D6nB,MAAOsB,GAAY+B,GACnB9qB,KAAM8qB,EACNxmB,OAAQ,GACRC,WAAY,GACZ0jB,UAAW,KACXC,SAAS,EACT5mB,SAAUe,EAAMqoB,gBAAgBI,GAChC1C,SAAU/lB,EAAMsoB,eAAeG,KAAW,KAE5CzG,KAAMhiB,EAAMmoB,eACZrD,SAAU9kB,EAAMooB,mBAChBzN,MA9HI,QA+HJoK,SAAUA,GACVC,aA9BqB,SAACyD,GAC5BF,EAAS,SAAAG,GAAS,OAAAra,YAAA,GACbqa,EAAS,CACZJ,eAAcja,YAAA,GACTqa,EAAUJ,eAAc1Y,YAAA,GAC1B6Y,GAAUC,EAAUJ,eAAeG,YA4BT,OAA5BzoB,EAAMd,mBACLkJ,IAAAC,cAACugB,GAAY,CACXnR,SAAUzX,EAAMyX,SAChBvY,kBAAmBc,EAAMd,uBCnI7BgjB,GAAQ2G,yBAAe,CAC3B3E,QAAS,CACP4E,QAASC,IACTC,UAAWC,IACXxoB,MAAOyoB,IACPC,kBAAmB,EACnBC,YAAa,IAEfC,WAAY,CACVC,iBAAiB,KAYNC,GARH,WACV,OACEnhB,IAAAC,cAACmhB,mBAAgB,CAACtH,MAAOA,IACvB9Z,IAAAC,cAACohB,GAAQ,QCdKC,QACW,cAA7B3H,OAAO4H,SAASC,UAEe,UAA7B7H,OAAO4H,SAASC,UAEhB7H,OAAO4H,SAASC,SAASC,MACvB,mECRNC,IAASC,OAAO3hB,IAAAC,cAACkhB,GAAG,MAAKS,SAASC,eAAe,SDuH3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMxuB,KAAK,SAAAyuB,GACjCA,EAAaC","file":"static/js/main.96365d3a.chunk.js","sourcesContent":["import { useRef, useReducer, useEffect } from 'react';\n\nexport function useDataPanels({datasets, initialDatasetIdx, nPanels}) {\n    const initialCache = {};\n    const cache = useRef(initialCache);\n    console.log(\"Initial Cache: \", initialCache)\n\n    const initialState = \n        [...Array(nPanels)].map(() => ({ data: null }));\n    console.log(\"Initial Cache: \", initialCache)   \n     \n    const [state, dispatch] = useReducer(reducer, initialState);\n\n    function deleteFromCache(datasetIdx) {\n        if(datasetIdx in cache.current)\n            delete cache.current[datasetIdx]\n    }\n\n    function reducer(state, action) {\n        const {type} = action;\n        const stateToUpdate = [...state];\n\n\t\tswitch (type) {\n\t\t\tcase 'FETCHING':\n                const currentState = stateToUpdate[action.panelIdx];\n                if(currentState.data !== null) \n                    deleteFromCache(currentState.data.datasetIdx);\n                currentState.data = null;\n                break;\n\n\t\t\tcase 'FETCHED':\n                break;\n\n\t\t\tcase 'FETCH_ERROR':\n                break;\n\n            case 'LOAD_PANEL':\n                stateToUpdate[action.panelIdx].data = cache.current[action.datasetIdx].store;\n                cache.current[action.datasetIdx].rc++;\n                break;        \n\n            case 'LOAD_ALL_PANELS':\n                // stateToUpdate.forEach(p => p.data = cache.current[action.datasetIdx].store);\n                // cache.current[action.datasetIdx].rc += stateToUpdate.length;\n                // break;\n                console.log(\"Action datasetIdx:\", action.datasetIdx);\n                console.log(\"Cache current:\", cache.current);\n            \n                if (cache.current[action.datasetIdx]) {\n                    stateToUpdate.forEach(p => p.data = cache.current[action.datasetIdx].store);\n                    cache.current[action.datasetIdx].rc = stateToUpdate.length;\n                } else {\n                    console.error(`Invalid datasetIdx: ${action.datasetIdx}`);\n                    console.error(\"Cache current:\", cache.current);\n                }\n                break;\n\n\t\t\tdefault:\n                throw new Error();        \n        }\n\n        return stateToUpdate;\n    }\n\n    function loadDataLayer(res, layer, data, clusterings) {\n        let layerData = {};\n        layerData.covs = res.covs;\n        layerData.continuousCovs = res.continuousCovs;\n        layerData.discreteCovs = res.discreteCovs;\n        layerData.clusterings = clusterings;\n        data.layersData[layer.id] = layerData;\n    }\n\n    async function loadDataset(datasetIdx) {\n        if(!datasetIdx && datasetIdx !== 0) return null;\n\n        if (!cache.current[datasetIdx]) {\n            try {\n                const {name, url, layers, modalities, zip} = datasets[datasetIdx];\n                const data = {layers, modalities, name, url, zip, layersData:{}};\n\n                const jobs = layers.map(async layer =>  {\n                    const layerURL = url in layer ? layer.url : `${url}/${layer.id}`;\n                    const response = await fetch(layerURL);\n                    const j = await response.json();\n                    const clusteringsURL = `${layerURL}/clusterings`;\n                    const clusterings = await (await fetch(clusteringsURL)).json();\n                    loadDataLayer(j, layer, data, clusterings);  \n                });\n\n                let genesets;\n\n                jobs.push( \n                    (async () =>  {\n                        const metares = await fetch(`${url}/meta`);\n                        data.meta = await metares.json();\n                    }) ()\n                );\n\n                jobs.push(\n                    (async () => {\n                        genesets = await (await fetch(`${url}/genesets`)).json();\n                    })()\n                );             \n\n                await Promise.all(jobs);\n\n                cache.current[datasetIdx] ={\n                    store:{    \n                        data,\n                        name,\n                        genesets,\n                        dataAPI: url,\n                        datasetIdx\n                    },\n                    rc: 0\n                };\n\n            } catch (error) {\n                return null;\n            }\n        } \n    }\n\n    async function loadDataPanel(datasetIdx, panelIdx) {\n        dispatch({ type: 'FETCHING', panelIdx });\n        await loadDataset(datasetIdx);\n        dispatch({ type: 'LOAD_PANEL', panelIdx, datasetIdx });\n    }\n    \n    useEffect(() => {\n        const loadInitialDataset = async () => {\n            await loadDataset(initialDatasetIdx);\n            dispatch({ type: 'LOAD_ALL_PANELS', datasetIdx: initialDatasetIdx });\n        };\n        loadInitialDataset();\n    }, [datasets, initialDatasetIdx, nPanels]);\n    \n    return [state, loadDataPanel];\n};","import React, { useState, useEffect, useMemo } from \"react\";\nimport Plot from \"react-plotly.js\";\nimport {\n  ToggleButtonGroup,\n  ToggleButton,\n  Box,\n  TextField,\n} from \"@mui/material\";\nimport { transpose } from \"../utils\";\n\nconst HeatmapComponent = (({\n  data,\n  clustering,\n  heatmapAssayInEffect,\n  // selectedHeatmapAssay,\n  usingFullMatrix,\n  sNHControls,\n  layer\n}) => {\n  // const [heatmapData, setHeatmapData] = useState({});\n  // const {clustering, selectedHeatmapAssay, clusteringData: data} = config;\n  const selectedHeatmapAssay = heatmapAssayInEffect;\n  // console.log('rendering heatmap');\n  // console.log(data);\n  // console.log(clustering);\n  // console.log(selectedHeatmapAssay);\n  \n  const [heatmapMode, setHeatmapMode] = useState(usingFullMatrix ? \"allAvgsContrast\" : \"avgsContrast\");\n  const [heatmapHeight, setHeatmapHeight] = useState(1000);\n  const [heatmapWidth, setHeatmapWidth] = useState(1000);\n  const [heatmapMarkers, setHeatmapMarkers] = useState(null);\n  const [selectedMarkersTestInput, setSelectedMarkersTestInput] = useState(\"\");\n  \n  const heatmapTitle = `${layer} - ${clustering} - ${selectedHeatmapAssay} -${heatmapMode.includes(\"Contrast\") ? \"Contrast\" : \"LogNorm\"}`;\n\n  const toggleMode = (newValue) => {\n    if(newValue && newValue !== heatmapMode){\n      setHeatmapMode(newValue);\n    }\n  };\n\n  const handleTextFieldChange = (event) => {\n    setSelectedMarkersTestInput(event.target.value);\n  };\n\n  const handleSelectGenesButtonClick = () => {\n    setHeatmapMarkers(selectedMarkersTestInput.split(\"\\n\"));\n  };\n\n  const handleResetGenesButtonClick = () => {\n    setHeatmapMarkers(null);\n    setSelectedMarkersTestInput(\"\");\n  };\n\n  const normalizeData = () => {\n    // console.log('normalizing data');\n    // console.log(data);\n    // console.log(selectedHeatmapAssay);\n    // console.log(heatmapMarkers)\n    const _data =\n      selectedHeatmapAssay == null \n        ? data[heatmapMode]\n        : data[selectedHeatmapAssay][heatmapMode]\n\n    let _selectedMarkers =\n      heatmapMarkers !== null\n        ? heatmapMarkers\n        : selectedHeatmapAssay !== null\n        ? data[selectedHeatmapAssay][\"heatmapMarkers\"]\n        : data[\"heatmapMarkers\"];\n\n    _selectedMarkers = _selectedMarkers.map((marker) => marker.toLowerCase());\n\n    const _clusterNames =\n      selectedHeatmapAssay !== null\n        ? data[selectedHeatmapAssay][\"clusterNames\"]\n        : data[\"clusterNames\"];\n\n    const selectedMarkersSet = new Set(_selectedMarkers);\n    const selectedMarkersIndex = Object.fromEntries(_selectedMarkers.map((marker, index) => [marker, index]));\n\n    const labels = _data.find((element) => Array.isArray(element));\n\n    const seenLabels = new Set();\n    const sorteredColumns = labels\n      .reduce((result, item, index) => {\n        if (!seenLabels.has(item) && selectedMarkersSet.has(item.toLowerCase())) {\n          result.push({ item, index });\n          seenLabels.add(item);\n        }\n        return result;\n      }, [])\n      .sort((a, b) => {\n        return (\n          selectedMarkersIndex[a.item.toLowerCase()] -\n          selectedMarkersIndex[b.item.toLowerCase()]\n        );\n      });\n\n    const heatmapLabels = sorteredColumns.map((column) => column.item);\n\n    const filteredColumnsMatrix = _data.slice(1).map( (c,i) => \n      sorteredColumns.map((element) => c[element.index]));\n\n    const _x = _clusterNames;\n    const _y = heatmapLabels;\n    const _z = transpose(filteredColumnsMatrix);\n\n    const height =\n      _z.length < 30\n        ? _z.length < 3\n          ? _z.length * 100 + 300\n          : _z.length * 50 + 300\n        : _z.length * 17;\n    const width =\n        (_x.length < 20\n          ? _x.length < 3\n            ? _x.length * 100\n            : _x.length * 36\n          : _x.length * 20)+300;\n\n    setHeatmapHeight(height);\n    setHeatmapWidth(width);\n    // console.log('done normalizing data');\n    // console.log({_x,_y,_z});\n\n    return { x: _x, y: _y, z: _z };\n  };\n  \n  const heatmapData = useMemo(()=> {\n    //     console.log('in use memo setting heatmap data');\n    // console.log(heatmapMode);\n    // console.log(data);\n    // console.log(selectedHeatmapAssay);\n    // console.log(heatmapMarkers);\n\n    if (data && heatmapMode && ( (selectedHeatmapAssay === null  && Object.keys(data).includes(\"markers\"))  || \n                               (selectedHeatmapAssay !== null && Object.keys(data).includes(selectedHeatmapAssay)))) {\n      return normalizeData();\n    }\n  }, [heatmapMode, selectedHeatmapAssay, heatmapMarkers]);\n\n\n\n  // console.log(data);\n  // console.log(heatmapData);\n  return (\n    <>\n      {data && heatmapData && (\n        <Box style={{ width: \"100%\" }}>\n          {sNHControls !== 'none' && (\n            <>\n              <ToggleButtonGroup\n                style={{ display: \"block\" }}\n                color=\"primary\"\n                onChange={(e, nv) => toggleMode(nv)}\n                value={heatmapMode}\n                exclusive\n              >\n                <ToggleButton data-test-id=\"avgsContrast\" key=\"avgsContrast-heatmap\" value={usingFullMatrix ? \"allAvgsContrast\" : \"avgsContrast\"}>\n                  CONTRAST\n                </ToggleButton>\n                <ToggleButton data-test-id=\"avgsLogNorm\" key=\"toggleavgsLogNorm-heatmap\" value={!usingFullMatrix ? \"avgsLogNorm\" : \"allAvgsLogNorm\"}>\n                  LOGNORM\n                </ToggleButton>\n              </ToggleButtonGroup>\n\n              <Box>\n                <TextField\n                  sx={{ margin: \"20px\", width: \"400px\" }}\n                  placeholder=\"Enter gene labels...\"\n                  multiline\n                  minRows={4}\n                  maxRows={10}\n                  onChange={handleTextFieldChange}\n                  value={selectedMarkersTestInput}\n                />\n                <br />\n                <ToggleButtonGroup style={{ display: \"block\" }} color=\"primary\">\n                  <ToggleButton data-test-id=\"selectGenesButton\" onClick={handleSelectGenesButtonClick} value=\"A\">\n                    SELECT GENES\n                  </ToggleButton>\n                  <ToggleButton data-test-id=\"resetGenesButton\" onClick={handleResetGenesButtonClick} value=\"B\">\n                    RESET\n                  </ToggleButton>\n                </ToggleButtonGroup>\n              </Box>\n            </>\n          )}\n\n          <Box sx={{ margin: \"10px\" }}>{heatmapTitle}</Box>\n          <Box sx={{ minHeight: \"1000px\", width: \"100%\" }}>\n            <Plot\n              data={[\n                {\n                  x: heatmapData.x,\n                  y: heatmapData.y,\n                  z: heatmapData.z,\n                  type: \"heatmap\",\n                  colorscale: \"Viridis\",\n                },\n              ]}\n              config={{\n                displaylogo: false,\n                modeBarButtonsToRemove: [\n                  'sendDataToCloud',\n                  'hoverCompareCartesian',\n                  'zoom2d',\n                  'pan2d',\n                  'select2d',\n                  'lasso2d',\n                  'zoomIn2d',\n                  'zoomOut2d',\n                  'autoScale2d',\n                  'resetScale2d', \n                  'hoverClosestCartesian',\n                  'toggleSpikelines'\n                ]\n              }}\n              layout={{\n                height: heatmapHeight,\n                width: heatmapWidth,\n                margin: \"auto\",\n                xaxis: {\n                  side: \"top\",\n                  tickangle: 35,\n                  showticklabels: true,\n                  automargin: true,\n                },\n                yaxis: {\n                  autotick: true,\n                  autorange: \"reversed\",\n                  automargin: true,\n                  autoshift: true,\n                },\n              }}\n            />\n          </Box>\n        </Box>\n      )}\n    </>\n  );\n})\n\n\nexport default HeatmapComponent;","export function transpose(matrix) {\n  return matrix.reduce(\n    (prev, next) => next.map((item, i) => (prev[i] || []).concat(next[i])),\n    []\n  );\n}\nexport function transpose2(matrix) {\n  return matrix.reduce(\n    (prev, next) => Object.values(next).map((item, i) => (prev[i] || []).concat(item)),\n    []\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport {\n  DataGrid,\n  GridToolbarContainer,\n  GridToolbarExport,\n} from \"@mui/x-data-grid\";\nimport { Button } from \"@mui/material\";\nimport { transpose2 } from \"../utils\";\n\nexport default function MarkersTableComponent({ clusteringData, selectedHeatmapAssay }) {\n  const { heatmapMarkers, markers } = selectedHeatmapAssay === null \n    ? clusteringData \n    : clusteringData[selectedHeatmapAssay];\n\n  const [data, setData] = useState(null);\n  const [initialRowsState, setInitialRowsState] = useState(null);\n\n  const getUniqueMarkers = (allMarkers) => {\n    const hash = Object.create(null);\n\n    return allMarkers.reduce((accumulator, row) => {\n      if (!(row.gene in hash)) {\n        hash[row.gene] = accumulator.push(row) - 1;\n      } else if (row.diff > accumulator[hash[row.gene]].diff) {\n        accumulator[hash[row.gene]] = row;\n      }\n      \n      return accumulator;\n    }, []);\n  }\n\n  const CustomToolbar = () => {\n    const getHeatmapRows = () => {\n      if (!heatmapMarkers) return;\n      \n      const filteredMarkers = data.rows.filter((row) => heatmapMarkers.includes(row.gene));\n      const uniqueMarkers = getUniqueMarkers(filteredMarkers);\n      \n      uniqueMarkers.sort(\n        (a, b) => heatmapMarkers.indexOf(a.gene.toLowerCase()) - heatmapMarkers.indexOf(b.gene.toLowerCase())\n      );\n      \n      setData({\n        columns: data.columns,\n        rows: uniqueMarkers,\n      });\n    };\n\n    const getAllMarkers = () => {\n      setData({\n        columns: data.columns,\n        rows: initialRowsState,\n      });\n    };\n\n    return (\n      <GridToolbarContainer>\n        <GridToolbarExport printOptions={{ disableToolbarButton: true }} />\n        <Button onClick={getAllMarkers}>All Markers</Button>\n        <Button onClick={getHeatmapRows}>Heatmap Markers</Button>\n      </GridToolbarContainer>\n    );\n  }\n\n  useEffect(() => {\n    const headers = Object.keys(markers).filter(m=>m!==\"gene\");\n\n    const columns = headers.map((header) => ({\n        field: header,\n        headerName: header.toUpperCase(),\n        type: header.toUpperCase() !== \"CLUSTER\" ? \"number\" : \"string\",\n        width: header.toUpperCase() !== \"CLUSTER\" ? 70 : 120\n      }));\n\n    columns.unshift({\n      field: \"gene\",\n      headerName: \"GENE\",\n      width: 250,\n    });\n\n    const columnsValues = columns.map(c => markers[c.field]);\n    columnsValues.forEach(c=> delete c.name);\n    const rowsValues = transpose2(columnsValues);\n    \n    const rows = rowsValues.map((row, index) => {\n      const result = {\n        id: index,\n        gene: row[0],\n      };\n      headers.forEach((header, index) => {\n        result[header] = row[index + 1];\n      });\n\n      return result;\n    });\n\n    setInitialRowsState(rows);\n    setData({\n      rows: rows,\n      columns: columns,\n    });\n  }, [selectedHeatmapAssay]);\n\n  return (\n    <>\n      {data !== null && heatmapMarkers !== null && (\n        <DataGrid\n          sx={{ width: \"100%\" }}\n          slots={{ toolbar: CustomToolbar }}\n          {...data}\n          pagination={{\n            paginationModel: {\n              pageSize: 25,\n            },\n          }}\n        />\n      )}\n    </>\n  );\n}\n","import React from 'react';\nimport {Typography, TextField, MenuItem, Chip, Paper, NoSsr} from '@material-ui/core';\nimport classNames from 'classnames';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport ReactSelect from 'react-select';\nimport {Creatable as CreatableSelect} from 'react-select';\n\n\nfunction NoOptionsMessage(props) {\n    return (\n      <Typography\n        color=\"textSecondary\"\n        className={props.selectProps.classes.noOptionsMessage}\n        {...props.innerProps}\n      >\n        {props.children}\n      </Typography>\n    );\n  }\n  \n  function inputComponent({ inputRef, ...props }) {\n    return <div ref={inputRef} {...props} />;\n  }\n\nfunction Control(props) {\n    return (\n      <TextField\n        fullWidth\n        InputProps={{\n          inputComponent,\n          inputProps: {\n            className: props.selectProps.classes.input,\n            inputRef: props.innerRef,\n            children: props.children,\n            ...props.innerProps,\n          },\n        }}\n        {...props.selectProps.textFieldProps}\n      />\n\n    );\n  }\n  \n  function Option(props) {\n    return (\n      <MenuItem\n        buttonRef={props.innerRef}\n        selected={props.isFocused}\n        component=\"div\"\n        style={{\n          fontWeight: props.isSelected ? 500 : 400,\n        }}\n        {...props.innerProps}\n      >\n        {props.children}\n      </MenuItem>\n    );\n  }\n  \n  function Placeholder(props) {\n    return (\n      <Typography\n        color=\"textSecondary\"\n        className={props.selectProps.classes.placeholder}\n        {...props.innerProps}\n      >\n        {props.children}\n      </Typography>\n    );\n  }\n  \n  function SingleValue(props) {\n    return (\n      <Typography className={props.selectProps.classes.singleValue} {...props.innerProps}>\n        {props.children}\n      </Typography>\n    );\n  }\n  \n  function ValueContainer(props) {\n    return <div className={props.selectProps.classes.valueContainer}>{props.children}</div>;\n  }\n  \n  function MultiValue(props) {\n    return (\n      <Chip\n        tabIndex={-1}\n        label={props.children}\n        className={classNames(props.selectProps.classes.chip, {\n          [props.selectProps.classes.chipFocused]: props.isFocused,\n        })}\n        onDelete={props.removeProps.onClick}\n        deleteIcon={<CancelIcon {...props.removeProps} />}\n      />\n    );\n  }\n  \n  function Menu(props) {\n    return (\n      <Paper square className={props.selectProps.classes.paper} {...props.innerProps}>\n        {props.children}\n      </Paper>\n    );\n  }\nconst components = {\n    Control,\n    Menu,\n    MultiValue,\n    NoOptionsMessage,\n    Option,\n    Placeholder,\n    SingleValue,\n    ValueContainer,\n  };\n  const componentsNoDropdown = {\n    Control,\n    Menu,\n    MultiValue,\n    NoOptionsMessage,\n    Option,\n    Placeholder,\n    SingleValue,\n    ValueContainer,\n    DropdownIndicator:() => null, IndicatorSeparator:() => null\n  }; \n\n  export function PredictiveInput(props) {\n      return <NoSsr>\n        <ReactSelect\n            {...props}\n            // styles={selectStyles}\n            textFieldProps={{\n                // label: 'Label',\n                InputLabelProps: {\n                    shrink: false,\n                },\n            }}\n            components={components}\n        />\n        </NoSsr>\n    \n  }\n  // export function CreatablePredictiveInput(props) {\n  export const CreatablePredictiveInput = React.forwardRef((props, ref) => {\n      \n    const resultLimit = 50;\n    let i = 0;\n    return <NoSsr>\n      <CreatableSelect\n          ref={ref}\n          {...props}\n          filterOption={({label}, query) => label.toLowerCase().indexOf(query.toLowerCase()) >= 0 && i++ < resultLimit}\n          onInputChange={() => { i = 0 }}\n          // styles={selectStyles}\n          textFieldProps={{\n              // label: 'Label',\n              InputLabelProps: {\n                  shrink: false,\n              },\n          }}\n          components={componentsNoDropdown}\n      />\n      </NoSsr>\n  \n})\n\n\n","import React, {useState, useRef, useMemo} from 'react';\nimport {PredictiveInput, CreatablePredictiveInput} from './PredictiveInput';\nimport {FormControl} from '@material-ui/core';\n\nfunction useSNHControls() {\n    const controls = [\"none\", \"with-select-paint\"]\n    const [SNHControls, setSNHControls] = useState(0)\n\n    function toggleControls() {\n        setSNHControls((SNHControls+1)%controls.length);\n    }\n    return [controls[SNHControls], toggleControls];\n}\n\nexport default function SearchAndHighlight({classes, brushing, genesets, loadRemoteData, sNHControls, covs, discreteCovs, continuousCovs, features}) {\n    const [search, setSearch] = useState([]);\n    const paintControlInputEl = useRef(null);\n\n    const searchTerms = useMemo(() => discreteCovs.map(c => ({label: c, options:\n        [...new Set(covs[c])].map(cv => ({value: {group: c, term: cv}, label: cv}))})), [covs, discreteCovs]);\n\n    const colorTerms = useMemo(() => {\n        let cterms = [\n            {label: 'discrete covs', options: discreteCovs.map(c => ({value: c, label: c, group: 'discrete covs'}))},\n            {label: 'continuous covs', options: continuousCovs.map( c => ({value: c, label: c, group: 'continuous covs'}))}\n        ];\n        if(features) {\n            Object.entries(features).slice().reverse().forEach(([assayName, assayFeatures]) => \n                cterms.push({label: assayName, options: assayFeatures.map(c => ({value: c, label: c, group: assayName}))})\n            );\n        }\n        cterms.push({label: 'geneset', options: genesets.map(c => ({value: c, label: c, group: 'geneset'}))});\n        return cterms;\n    }, [discreteCovs, continuousCovs, features, genesets]);\n\n    function handleSearchChange(e) {\n        setSearch(e);\n        brushing.setFilter(e)\n    } \n\n    async function changeColorBy(e) {\n        const colorBy = e ? e.value : null;\n        if(colorBy && !(colorBy in covs)) {\n            let category = e.group === 'geneset' ? 'geneset' : 'feature';\n            await loadRemoteData(category, colorBy);\n        }\n        brushing.setColorBy(colorBy);\n    }\n\n    if(sNHControls === 'none') {\n        return null;\n    }\n\n    return (\n        <div>\n            <FormControl className={classes.searchControl} variant=\"outlined\">\n                <PredictiveInput\n                    classes={classes}\n                    options={searchTerms}\n                    value={search}\n                    onChange={handleSearchChange}\n                    placeholder=\"Select \"\n                    isMulti\n                />\n            </FormControl>\n            <FormControl className={classes.paintControl} variant=\"outlined\">\n                <CreatablePredictiveInput\n                    classes={classes}\n                    options={colorTerms}\n                    ref={paintControlInputEl}\n                    formatCreateLabel={(v)=> `Look up feature: ${v}`}\n                    value={brushing.colorBy ? {value: brushing.colorBy, label: brushing.colorBy} : null}\n                    onChange={changeColorBy}\n                    placeholder=\"Paint \"\n                    isClearable\n                />\n            </FormControl>\n        </div>\n    );\n}\n\nexport {SearchAndHighlight, useSNHControls}\n","import { useState } from 'react';\n\n// Helper function to replace certain characters with dashes\nconst fixDashes = (str) => str.replace(/\\u2013|\\u2014|\\u2212/g, \"-\");\n\nexport const useRemoteData = ({ dataAPI, covs }) => {\n  const [remoteData, setRemoteData] = useState(null);\n\n  const loadRemoteData = async (featureCat, feature) => {\n    feature = fixDashes(feature);\n    const response = await fetch(`${dataAPI}/${featureCat}/${feature}`);\n    const res = await response.json();\n    \n    // Exit early if response data is empty\n    if (Object.keys(res).length === 0) {\n      setRemoteData(null);\n      return null;\n    }\n\n    const assay = featureCat === 'geneset' ? 'geneset' : Object.keys(res)[0];\n    const resData = featureCat === 'geneset' ? res : res[assay];\n\n    const rd = {\n      data: covs[\"id\"].map(id => id in resData ? resData[id] : 0),\n      category: assay\n    };\n\n    setRemoteData(rd);\n    return rd;\n  }\n\n  return [remoteData, loadRemoteData];\n}\n","import React, { useState } from \"react\";\nimport { useTheme, Table, TableBody, TableCell, TableContainer, \n         TableFooter, TablePagination, TableRow, Box, IconButton, \n         Icon } from '@mui/material';\nimport PropTypes from 'prop-types';\n\nfunction TablePaginationActions({ count, page, rowsPerPage, onPageChange }) {\n    const theme = useTheme();\n    const isRtl = theme.direction === 'rtl';\n\n    const handleButtonClick = (newPage) => (event) => onPageChange(event, newPage);\n\n    return (\n        <Box sx={{ flexShrink: 0, ml: 2.5 }}>\n            <IconButton onClick={handleButtonClick(0)} disabled={page === 0} aria-label=\"first page\">\n                <Icon>{isRtl ? 'last_page' : 'first_page'}</Icon>\n            </IconButton>\n            <IconButton onClick={handleButtonClick(page - 1)} disabled={page === 0} aria-label=\"previous page\">\n                <Icon>{isRtl ? 'keyboard_arrow_right' : 'keyboard_arrow_left'}</Icon>\n            </IconButton>\n            <IconButton onClick={handleButtonClick(page + 1)} disabled={page >= Math.ceil(count / rowsPerPage) - 1} aria-label=\"next page\">\n                <Icon>{isRtl ? 'keyboard_arrow_left' : 'keyboard_arrow_right'}</Icon>\n            </IconButton>\n            <IconButton onClick={handleButtonClick(Math.max(0, Math.ceil(count / rowsPerPage) - 1))} disabled={page >= Math.ceil(count / rowsPerPage) - 1} aria-label=\"last page\">\n                <Icon>{isRtl ? 'first_page' : 'last_page'}</Icon>\n            </IconButton>\n        </Box>\n    );\n}\n\nTablePaginationActions.propTypes = {\n    count: PropTypes.number.isRequired,\n    onPageChange: PropTypes.func.isRequired,\n    page: PropTypes.number.isRequired,\n    rowsPerPage: PropTypes.number.isRequired,\n};\n\nexport function FeatureTable({features, assay}) {\n    const [page, setPage] = useState(0);\n    const [rowsPerPage, setRowsPerPage] = useState(50);\n    const colsPerRow = 2;\n\n    const handleChangePage = (_, newPage) => setPage(newPage);\n\n    const handleChangeRowsPerPage = (event) => {\n        setRowsPerPage(parseInt(event.target.value, 10));\n        setPage(0);\n    };\n\n    return (\n        <TableContainer>\n            <Table sx={{ maxWidth: 600, marginTop: 2, captionSide: 'top' }} size=\"small\" aria-label=\"features table\">\n                {/* <caption>Available {assay} features</caption> */}\n                <TableBody>\n                    {[...Array(rowsPerPage).keys()].map((rowid) => (\n                        <TableRow key={rowid}>\n                            <TableCell component=\"th\" scope=\"row\">\n                                {features[page * rowsPerPage * colsPerRow + rowid * colsPerRow]}\n                            </TableCell>\n                            {[...Array(colsPerRow - 1).keys()].map(cidx => (\n                                <TableCell align=\"right\" key={cidx}>\n                                    {features[page * rowsPerPage * colsPerRow + rowid * colsPerRow + 1 + cidx] || ''}\n                                </TableCell>\n                            ))}\n                        </TableRow>\n                    ))}\n                </TableBody>\n                <TableFooter>\n                    <TableRow>\n                        <TablePagination\n                            rowsPerPageOptions={[5, 15, 50]}\n                            colSpan={3}\n                            count={Math.ceil(features.length / colsPerRow)}\n                            rowsPerPage={rowsPerPage}\n                            page={page}\n                            SelectProps={{\n                                inputProps: { 'aria-label': 'rows per page' },\n                                native: true,\n                            }}\n                            onPageChange={handleChangePage}\n                            onRowsPerPageChange={handleChangeRowsPerPage}\n                            ActionsComponent={TablePaginationActions}\n                        />\n                    </TableRow>\n                </TableFooter>\n            </Table>\n        </TableContainer>\n    );\n}\n","\n\nimport { useMemo, useState } from 'react';\nimport { d3 } from 'plotly.js';\nimport { isArray } from 'util';\nimport settings from '../settings';\n\nexport function usePlotting({xys, colorBy, selected, covs, discreteCovs, continuousCovs, contrast, zTransform, remoteData}) {\n    function hexToRgbA(hex) {\n        let c;\n        if (/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)) {\n            c = hex.substring(1).split('');\n            if (c.length === 3) {\n                c = [c[0], c[0], c[1], c[1], c[2], c[2]];\n            }\n            c = '0x' + c.join('');\n            return 'rgba(' + [(c >> 16) & 255, (c >> 8) & 255, c & 255].join(',') + ',1)';\n        }\n        throw new Error('Bad Hex');\n    }\n\n    function colorModifier(color, alpha, shadeAdjust = 0) {\n        if (!color || !isNaN(color)) {\n            return color;\n        }\n        if (color.startsWith('#')) {\n            color = hexToRgbA(color);\n        }\n        if (color.startsWith('rgba')) {\n            const col = color.slice(5, -1).split(',');\n            const newCol = col.slice(0, -1).map(c => Math.max(parseInt(c, 10) - shadeAdjust, 0));\n            if (alpha !== null) newCol.push(alpha);\n            return 'rgba(' + newCol.join() + ')';\n        }\n        return null;\n    }\n\n    function darker(color) {\n        return colorModifier(color, null, 40);\n    }\n\n    function transparent(color, alpha) {\n        return colorModifier(color, alpha);\n    }\n\n    function interpolate(a, b, r) {\n        return a + (b - a) * r;\n    }\n\n    const {\n        maxRowsInTooltip,\n        backgroundOpacity,\n        backgroundSize,\n        highlightOpacity,\n        highlightSize,\n        highlightBorderWidth,\n        backgroundBorderWidth\n    } = settings.plottingDefaults;\n\n    const brushedHighlightSize = interpolate(backgroundSize, highlightSize, contrast);\n\n    const frames = [];\n    const config = {\n        // displayModeBar: null, \n        displaylogo: false,\n        modeBarButtonsToRemove: ['sendDataToCloud',\n        'hoverCompareCartesian', 'zoom2d',\n        'pan2d', 'select2d', 'lasso2d', 'zoomIn2d',\n        'zoomOut2d', 'autoScale2d', 'resetScale2d', \n        'hoverClosestCartesian', 'toggleSpikelines'\n    ]};\n    const useResizeHandler = true;\n    const style={};\n    const updateFigure = f => setLayout(f.layout);\n\n    \n\n    // split data according to color into traces\n    // affecting: data, colors, linecolor, annos, bgcolors, opacity, size, lineopacity, linewidth\n    // coordinate with selected\n\n    const colorsAndTraces = useMemo( () => {\n        const ret = {colors:null,traceIdxes:null, isContinous:false}\n        if ( colorBy == null) {\n            return ret;\n        }\n        if ( colorBy !== '' && colorBy in covs && discreteCovs.includes(colorBy)) {\n            const scale = d3.scale.category20();\n            // hack stable colors for TCR BCR\n            const vals = [...new Set(covs[colorBy])].sort();\n            vals.forEach(v => scale(v));\n            const valsMap={};\n            vals.forEach( (v,i)=> valsMap[v]=i);\n            const legend = {};\n            for(const val of vals) {\n                legend[val] = scale(val);\n            }\n            ret.colors = covs[colorBy].map(cov => scale(cov));\n            ret.traces = vals.map(val=> ({\n                idxes:[],\n                name: val\n            }));\n            covs[colorBy].forEach( (cov,i) => \n                ret.traces[valsMap[cov]].idxes.push(i)\n            );\n            return ret;\n        } \n        if ( colorBy !== '' && colorBy in covs && continuousCovs.includes(colorBy)) {\n            // if(zTransform) {\n            //     const stdev = std(covs[colorBy]);\n            //     if(stdev===0) ret.colors = covs[colorBy];\n            //     else ret.colors = divide(subtract(covs[colorBy], mean(covs[colorBy])), stdev);\n            // } else {ret.colors = covs[colorBy];}\n            ret.colors=covs[colorBy];\n            ret.isContinous=true;\n            return ret;\n        } \n        if ( colorBy !== '' && ! (colorBy in covs) && remoteData !== null ) {\n            ret.colors = remoteData.data;\n            ret.isContinous=true;\n            // console.log(mean(remoteData.data));\n            // console.log(ret.colors);\n            return ret;\n        }\n        return ret;\n    }, [colorBy, zTransform, covs,remoteData]);\n    // const linecolor = colors;\n    const colors = colorsAndTraces.colors;\n    const linecolor = useMemo( () => colors == null ? null : \n        colors.map( c => darker(c)), [colorBy,covs,remoteData]);\n    const bgcolors = useMemo( () => colors == null ? null : \n        colors.map( c => transparent(c, 0.8)), [colorBy, covs, remoteData]);\n\n\n    const annos = useMemo( () => {\n        if ( covs == null ) return null;\n        // const covnames = Object.keys(covs);\n        const covnames = Object.keys(covs).slice(0, maxRowsInTooltip);\n        if ( covnames.length === 0 ) return null;\n        return covs[covnames[0]].map( (x, idx) => {\n            if ( selected != null && !selected[idx]) {\n                return null;\n            }\n            let ret = '';\n            if (colorBy !== '' && colorBy in covs) {\n                ret += `${colorBy}: ${covs[colorBy][idx]}<br><br>`;\n            } else {\n                if (colorBy !== '' && colorBy !== null && ! (colorBy in covs) && remoteData != null ) {\n                    ret += `${colorBy}: ${remoteData.data[idx]}<br><br>`;\n                }\n            }\n            ret += covnames.map( cn => `${cn}: ${covs[cn][idx]}`).join('<br>')\n            return ret;\n        })\n    }, [covs, colorBy, selected, remoteData]);\n\n    const opacity = useMemo( () => selected === null ? 0.6 : selected.map( s => s ? highlightOpacity : backgroundOpacity),\n    [selected]);\n    const size =  useMemo( () => selected === null ? 6 : selected.map( s => s ? brushedHighlightSize : backgroundSize), [selected]);\n    const lineopacity =  useMemo( () => selected === null ? null : selected.map( s => s ? highlightOpacity : backgroundOpacity), [selected]);\n    const linewidth =  useMemo( () => selected === null ? null : selected.map( s => s ? highlightBorderWidth : backgroundBorderWidth), [selected]);\n\n\n    // const [ xys, setXys ] = useState([null,null]);\n    const [ layout, setLayout ] = useState({\n        hovermode:'closest',\n        showlegend: true,\n        margin: {\n            l: 0,\n            r: 0,\n            t: 0,\n            b: 0\n        },\n        legend: {\n            x: 1.2,\n            xanchor: 'right',\n            y: 0.95\n          },\n        xaxis: {\n            showline: false,\n            showgrid: false,\n            zeroline: false,\n            showticks: false,\n            showticklabels: false\n        },\n        yaxis: {\n            showline: false,\n            showgrid: false,\n            zeroline: false,\n            showticks: false,\n            showticklabels: false\n        },\n        autosize: true\n    });\n    const traces = colorsAndTraces.traces;\n    let data;\n    if(traces==null) {\n        data = [{\n            x: xys[0],\n            y: xys[1],\n            type: 'scattergl',\n            mode: 'markers',\n            marker: { \n                color: colors,\n                colorscale: zTransform?'Picnic':null,\n                colorbar: colorsAndTraces.isContinous?{title:colorBy,len:0.9}:null,\n                size: size, \n                opacity: opacity, \n                line: {\n                    width: linewidth,\n                    opacity: lineopacity,\n                    color: linecolor\n            }},\n            // marker: {color: this.state.colorAttr, size: 8, opacity:0.8},\n            text: annos,\n            hoverlabel: {bgcolor: bgcolors},\n            // hoverlabel: {bgcolor: 'rgba(0,0,0,0)'},\n            hoverinfo: 'text',\n            name: ''\n        }];  \n    } else {\n        data = traces.map(trace => ({\n            x: trace.idxes.map(idx=>xys[0][idx]),\n            y: trace.idxes.map(idx=>xys[1][idx]),\n            type: 'scattergl',\n            mode: 'markers',\n            marker: { \n                color: trace.idxes.map(idx=>colors[idx]), \n                colorscale: zTransform?'Picnic':null,\n                colorbar: colorsAndTraces.isContinous?{title:colorBy, len:0.9}:null,\n                size: isArray(size)?trace.idxes.map(idx=>size[idx]):size,\n                opacity: isArray(opacity)?trace.idxes.map(idx=>opacity[idx]):opacity, \n                line: {\n                    width: linewidth==null?null:trace.idxes.map(idx=>linewidth[idx]),\n                    opacity: lineopacity==null?null: trace.idxes.map(idx=>lineopacity[idx]),\n                    color: linecolor==null?null:trace.idxes.map(idx=>linecolor[idx])\n            }},\n            // marker: {color: this.state.colorAttr, size: 8, opacity:0.8},\n            text: trace.idxes.map(idx=>annos[idx]),\n            hoverlabel: {bgcolor: bgcolors==null?null:trace.idxes.map(idx=>bgcolors[idx])},\n            // hoverlabel: {bgcolor: 'rgba(0,0,0,0)'},\n            hoverinfo: 'text',\n            name: trace.name\n        }))\n    }  \n    const plot = {data, frames, config, layout, useResizeHandler, style, onInitialized: updateFigure,\n        onUpdate: updateFigure};\n    // function changeCoords(coords) {\n    //     setXys(coords === null ? [null, null] : [0,1].map(i => coords.map( c => c[i])));\n    // }\n    return plot;\n}","import { useBrushing } from './brushing';\nimport { usePlotting } from './plotting';\n\nexport function useBrushedPlotting(conf, layersData, remoteData) {\n  const { covs, discreteCovs, continuousCovs } = layersData[conf.layer];\n\n  let xys;\n  switch (conf.projection) {\n    case \"umap\":\n      xys = \"UMAP_1\" in covs ? [covs.UMAP_1, covs.UMAP_2] : [covs[\"umap_1\"], covs[\"umap_2\"]];\n      break;\n    case \"tsne\":\n      xys = \"tSNE_1\" in covs ? [covs.tSNE_1, covs.tSNE_2] : [covs[\"tsne_1\"], covs[\"tsne_2\"]];\n      break;\n    default:\n      xys = [null, null];\n  }\n\n  const brushing = useBrushing(layersData[conf.layer]);\n\n  const plot = usePlotting({\n    xys, \n    colorBy: brushing.colorBy, \n    selected: brushing.selected,\n    covs, \n    discreteCovs, \n    continuousCovs, \n    contrast: brushing.contrast, \n    zTransform: brushing.zTransform,\n    remoteData\n  });\n\n  return [plot, brushing];\n}\n","import { useState, useMemo } from 'react';\n\nexport function useBrushing(conf) {\n    const { covs } = conf;\n    const [colorBy, setColorBy] = useState('');\n    const [filter, setFilter] = useState([]);\n    const [contrast, setContrast] = useState(1);\n    const [ zTransform, setZTransform ] = useState(false);\n\n\n    function selectSubpop(v) {\n        setFilter(v);\n    }\n\n    const selected = useMemo(() => {\n        if (filter !== null && filter.length > 0 && covs !== null && (filter[0].value.group in covs)) {\n            return covs[filter[0].value.group].map((_c, i) =>\n                filter.some(({ value: { group, term } }) => covs[group][i] === term)\n            );\n        }\n        return null;\n    }, [filter,covs]);\n    return  {selected, setColorBy, colorBy, filter, setFilter, selectSubpop, contrast, setContrast, zTransform, setZTransform};\n}\n","\nimport React, { useState, useEffect, useMemo } from \"react\";\nimport { FormControl, Grid, Paper, IconButton, Icon } from \"@material-ui/core\";\nimport { ToggleButtonGroup, ToggleButton, Box } from \"@mui/material\";\nimport Plot from \"react-plotly.js\";\nimport HeatmapComponent from \"./ScHeatmap\";\nimport MarkersTableComponent from \"./ScMarkersTable\";\n// import axios from \"axios\";\n// import * as Plotly from \"plotly.js\";\n// import Demo from \"./ScVega\";\n\nimport CircularProgress from \"@mui/material/CircularProgress\";\n\nimport { SearchAndHighlight, useSNHControls } from \"./SearchAndHighlight\";\nimport { useRemoteData } from \"../hooks/remoteData\";\nimport { FeatureTable } from \"./ScFeatureTable\";\nimport { useBrushedPlotting } from \"../hooks/brushedPlotting\";\nimport { PredictiveInput, CreatablePredictiveInput } from \"./PredictiveInput\";\n// import { QueryClient, QueryClientProvider } from \"react-query\";\n// Each viewer contains one or more panels\n// each panel can display a plot of any kind, using the basedata associated with the choice\n// brushing action can be applied to plots on each panel, using either basedata or remote data.\n// At the viewer level, we can choose number of panels, hide or show controls\n// at the panel level, we can choose the layer, projection, and feature to plot.\n// Each panel can independently be associated with a dataset.\n\n// const queryClient = new QueryClient();\nexport function ScPanel(props) {\n  const {\n    classes,\n    settings,\n    panelDataState,\n    panelIdx,\n    openChooseDataset,\n    loadDataPanel,\n    maximized,\n    toggleMaximize,\n  } = props;\n  \n  const datasetTerms = useMemo(\n    () => settings.datasets.map((ds, idx) => ({ value: idx, label: ds.name })),\n    [settings]\n  );\n  \n  const { status, error, data: panelData } = panelDataState;\n  const { data, dataAPI, genesets, name } = panelData;\n  \n  const [showSelectDataset, setShowSelectDataset] = useState(false);\n  \n  const availableProjectionsAllLayers = {};\n  \n  data.layers.forEach((layer) => {\n    const tc = data.layersData[layer.id].covs;\n    let ret = [];\n    if (\"UMAP_1\" in tc || \"umap_1\" in tc) ret.push(\"umap\");\n    if (\"TSNE_1\" in tc || \"tsne_1\" in tc || \"tSNE_1\" in tc) ret.push(\"tsne\");\n    availableProjectionsAllLayers[layer.id] = ret;\n  });\n  \n  function getDefaultClustering(tcs) {\n    let nv=null;\n    if(tcs!=null &&tcs.length > 0) {\n      const tcsDefault = tcs.filter(tc=>tc.toLowerCase().includes(\"default\"));\n      const tcsCurated = tcs.filter(tc=>tc.toLowerCase().includes(\"curated\"));\n      const tcsPrelim = tcs.filter(tc=>tc.toLowerCase().includes(\"prelim\"));\n      const tcsMain = tcs.filter(tc=>tc.toLowerCase().includes(\"main\"));\n  \n      if(tcsDefault.length>0) nv=tcsDefault[0];\n      else if(tcsCurated.length>0) nv=tcsCurated[0];\n      else if(tcsPrelim.length>0) nv=tcsPrelim[0];\n      else if(tcsMain.length>0) nv=tcsMain[0];\n      else if(tcs.length>0) nv=tcs[0];\n    }\n    return {value:nv,label:nv};\n  }\n  \n  const panelDefault = {\n    projection: availableProjectionsAllLayers[data.layers[0].id][0],\n    feature: null,\n    layer: data.layers[0].id,\n    mode: [\"plot\"],\n    modeAssay: data.meta.assays[0],\n    heatmapMode: 'heatmap',\n    clustering: getDefaultClustering(data.layersData[data.layers[0].id].clusterings),\n    selectedHeatmapAssay: null\n  };\n  \n  const [config, updateConfig] = useState(panelDefault);\n  const clusterings = data.layersData[config.layer].clusterings;\n  \n  const legendsOptions=[\n    { name: \"plot\", icon: \"scatter_plot\" }\n  ];\n  \n  if(clusterings != null && Object.keys(clusterings).length > 0) {\n    legendsOptions.push({ name: \"heatmap\", icon: \"grid_view\"})\n  }\n  \n  legendsOptions.push({ name: \"legends\", icon: \"table\" });\n  \n  const [remoteData, loadRemoteData] = useRemoteData({\n    dataAPI,\n    dataConfig: config,\n    covs: data.layersData[config.layer].covs,\n  });\n  \n  const [plot, brushing] = useBrushedPlotting(\n    config,\n    data.layersData,\n    remoteData\n  );\n  \n  const [sNHControls, toggleSNHControls] = useSNHControls();\n  \n  const availableProjections = availableProjectionsAllLayers[config.layer];\n  \n  // const [plotDiv, setPlotDiv] = useState(null);\n  \n  plot.layout.showlegend = maximized;\n  plot.layout.margin.r = maximized ? 0 : 0;\n  \n  function toggleShowWhatEmbedding(nv) {\n    if (nv == null) return;\n    let newConfig = { ...config };\n    newConfig.projection = nv;\n    updateConfig(newConfig);\n  }\n  \n  function toggleLayer(nv) {\n    if (nv == null) return;\n    let newConfig = { ...config };\n    newConfig.layer = nv;\n    newConfig.clustering = getDefaultClustering(data.layersData[nv].clusterings);\n    setClusteringData(null);\n    updateConfig(newConfig);\n  }\n  \n  function toggleZTransform(nv) {\n    if(nv===null) return;\n    console.log('toggling ztransform');\n    console.log(nv);\n    console.log(`setting brushing.zTransform to ${nv}`);\n    brushing.setZTransform(nv);\n\n  }\n\n  function toggleMode(nv) {\n    if (nv == null) return;\n    let newConfig = { ...config };\n    newConfig.mode = nv;\n    updateConfig(newConfig);\n  }\n  \n  function toggleModeAssay(nv) {\n    if (nv == null) return;\n    let newConfig = { ...config };\n    newConfig.modeAssay = nv;\n    updateConfig(newConfig);\n  }\n  \n  function toggleHeatmapMode(nv) {\n    if (nv == null) return;\n    let newConfig = { ...config };\n    newConfig.heatmapMode = nv;\n    updateConfig(newConfig);\n  }\n  \n  function renderSNHControlsToggleIcon() {\n    switch (sNHControls) {\n      case \"none\":\n        return \"fullscreen_exit\";\n      case \"with-select-paint\":\n        return \"fullscreen_exit\";\n      case \"with-select-paint-geneset\":\n        return \"fullscreen\";\n      default:\n        return null;\n    }\n  }\n  \n  function downloadReports() {\n    window.open(`report/${data.zip}`);\n  }\n  \n  function handleSelectedDatasetChange(e, nv) {\n    setShowSelectDataset(false);\n    if (e.value === panelDataState.data.datasetIdx) return;\n    loadDataPanel(e.value, panelIdx);\n  }\n  \n  function handleClusteringChange(nv) {\n    if (nv == null) return;\n    if (nv.value == config.clustering.value) return;\n    let newConfig = { ...config };\n    newConfig.clustering = nv;\n    setClusteringData(null);\n    updateConfig(newConfig);\n  }\n  \n\n  const [clusteringData, setClusteringData] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [usingFullMatrix, setFullMatrix] = useState(true);\n  \n  useEffect( () => {\n    if (config.clustering == null || config.clustering.value === null) return;\n    const url = `${data.url}/${config.layer}/clustering/${config.clustering.value}${usingFullMatrix ? '/true' : ''}`;\n    setIsLoading(true);  \n    // setClusteringData(null);\n    const fetchData = async () => {\n      const clusteringData = await (await fetch(url)).json();\n      setClusteringData(clusteringData);\n      setIsLoading(false);\n    };\n    fetchData();\n  }, [config.clustering]);\n  \n  let heatmapAssayInEffect = config.selectedHeatmapAssay;\n  if(clusteringData) {\n    const keys = Object.keys(clusteringData);\n    if(keys.includes('markers')) \n      heatmapAssayInEffect = null;\n    else if(heatmapAssayInEffect==null || !keys.includes(heatmapAssayInEffect)) {\n      heatmapAssayInEffect = keys.pop();\n    } \n  }\n  // console.log(`heatmapAssayInEffect ${heatmapAssayInEffect}`);\n  \n  function updateSelectedHeatmapAssay(nv) {\n    let newConfig = { ...config, selectedHeatmapAssay: nv };\n    updateConfig(newConfig);\n  }\n  \n  function toggleSelectedHeatmapAssay(nv) {\n    if (nv == null) return;\n    updateSelectedHeatmapAssay(nv);\n  }\n  \n  function activeModes() {\n    return legendsOptions.filter(r => config.mode.includes(r.name)).map(r => r.name);\n  }\n  \n  function DatasetControls() {\n    return showSelectDataset ? (\n      <FormControl className={classes.chooseDatasetControl} variant=\"outlined\">\n        <PredictiveInput\n          classes={classes}\n          options={datasetTerms}\n          value={{\n            value: panelDataState.data.datasetIdx,\n            label: panelDataState.data.name,\n          }}\n          onChange={handleSelectedDatasetChange}\n          defaultMenuIsOpen={true}\n          onMenuClose={() => {\n            setShowSelectDataset(false);\n          }}\n          placeholder=\"Select \"\n        />\n      </FormControl>\n    ) : (\n      <>\n        <IconButton color=\"primary\" onClick={() => setShowSelectDataset(true)}>\n          <Icon>folder</Icon>\n        </IconButton>\n        <span>\n          <i>{name}</i>\n        </span>\n      </>\n    );\n  }\n  \n  \n  function HeatmapContainer() {\n    // const { heatmapMode, clustering, selectedHeatmapAssay, layer } = config;\n    const { heatmapMode, clustering, layer } = config;\n    const isActiveHeatmap = activeModes().includes(\"heatmap\");\n  \n    if (!isActiveHeatmap) return null;\n  \n    const handleToggleHeatmapMode = (_, newValue) => toggleHeatmapMode(newValue);\n    const handleToggleSelectedHeatmapAssay = (_, newValue) => toggleSelectedHeatmapAssay(newValue);\n  \n    const style1 = { margin: \"0px\", top: 0, marginLeft: '100px' };\n    const style2 = { margin: \"0px\", top: 0, marginLeft: '20px' };\n    const style3 = { margin: \"0px\", top: 0, marginLeft: activeModes().includes('plot')|!maximized?'0px':'300px' };\n\n    const isToggleGroupVisible = !isLoading && isActiveHeatmap;\n    const isClusteringDataValid = !isLoading && sNHControls !== 'none' && clusteringData && !Object.keys(clusteringData).includes('markers');\n    \n    return (\n      <Grid item xs={gridItemSize} className={classes.plot} style={{overflowY: 'scroll' }}>\n        {sNHControls !== \"none\"  && (\n          <div className={maximized?classes.floatingControls:classes.fixedControls} style={{ top: 0 }}>\n            <FormControl className={classes.parintControl} style={style3} variant=\"outlined\">\n              <PredictiveInput\n                classes={classes}\n                options={clusterings.map(c => ({ value: c, label: c }))}\n                value={clustering}\n                onChange={handleClusteringChange}\n                placeholder=\"Select\"\n              />\n            </FormControl>\n    \n            {isToggleGroupVisible && (\n              <ToggleButtonGroup style={style1} color=\"primary\" value={heatmapMode} exclusive onChange={handleToggleHeatmapMode}>\n                <ToggleButton key=\"toggleHeatmapMode-plot\" value=\"heatmap\">HEATMAP</ToggleButton>\n                <ToggleButton key=\"toggleHeatmapMode-markers-table\" value=\"markers-table\">MARKERS</ToggleButton>\n              </ToggleButtonGroup>\n            )}\n    \n            {isClusteringDataValid && (\n              // <ToggleButtonGroup style={style2} color=\"primary\" value={selectedHeatmapAssay} exclusive onChange={handleToggleSelectedHeatmapAssay}>\n              <ToggleButtonGroup style={style2} color=\"primary\" value={heatmapAssayInEffect} exclusive onChange={handleToggleSelectedHeatmapAssay}>\n              {Object.keys(clusteringData).map((heatmapAssay, index) => (\n                  <ToggleButton key={`toggleSelectedHeatmapAssay-${index}`} value={heatmapAssay}>\n                    {heatmapAssay}\n                  </ToggleButton>\n                ))}\n              </ToggleButtonGroup>\n            )}\n          </div>\n        )}\n    \n        <div style={{ marginTop: 50, width: \"100%\"}}>\n          {isLoading && (\n            <Box sx={{ display: \"flex\", justifyContent: \"center\" }}>\n              <CircularProgress />\n            </Box>\n          )}\n    \n          {!isLoading && clusteringData && heatmapMode === \"markers-table\" && (\n            <MarkersTableComponent\n              clusteringData={clusteringData}\n              // selectedHeatmapAssay={selectedHeatmapAssay}\n              selectedHeatmapAssay={heatmapAssayInEffect}\n            />\n          )}\n    \n    {!isLoading && clusteringData && heatmapMode === \"heatmap\" && (\n          // {heatmapMode === \"heatmap\" && (\n            <HeatmapComponent\n              data={clusteringData}\n              usingFullMatrix={usingFullMatrix}\n              clustering={clustering.value}\n              layer={layer}\n              // selectedHeatmapAssay={selectedHeatmapAssay}\n              heatmapAssayInEffect={heatmapAssayInEffect}\n              sNHControls={sNHControls}\n            />\n          )}\n        </div>\n      </Grid>\n    );\n  }\n  \n  \n\n\n\n  const isInPlotMode = config.mode.includes(\"plot\");\n  const isInLegendsMode = config.mode.includes(\"legends\");\n  const gridItemSize = 12 / activeModes().length;\n  const isPlotOrHeatmap = isInPlotMode || config.mode.includes(\"heatmap\");\n  const style = { margin: \"5px\" };\n\n\n  function PlotAndLayerControls() {\n    if (sNHControls === \"none\" ) return null;\n  \n    const handleToggleMode = (event, newValue) => toggleMode(newValue);\n    const handleShowWhatEmbedding = (event, newValue) => toggleShowWhatEmbedding(newValue);\n    const handleToggleLayer = (event, newValue) => toggleLayer(newValue);\n    const handleToggleZTransform = (event, newValue) => toggleZTransform(newValue);\n    return (\n      <Grid container className={classes.toggleProjection}>\n        <ToggleButtonGroup style={style} color=\"primary\" value={config.mode} exclusive={!maximized} onChange={handleToggleMode}>\n          {legendsOptions.map(m => (\n            <ToggleButton data-test-id=\"mode-type\" key={`mode_${m.name}`} value={m.name}>\n              <Icon>{m.icon}</Icon>\n            </ToggleButton>\n          ))}\n        </ToggleButtonGroup>\n        {isInPlotMode && maximized && false ? \n          <ToggleButtonGroup style={style} color=\"primary\" value={brushing.zTransform} exclusive onChange={handleToggleZTransform}>\n            {[{value:false,name:\"default\"}, {value:true,name:\"contrast\"}].map(\n              l => <ToggleButton key={`toggleZTransform_${l.name}`} value={l.value}>{l.name}</ToggleButton>)}\n          </ToggleButtonGroup> : null}\n\n  \n        {isInPlotMode && (\n          <ToggleButtonGroup style={style} color=\"primary\" value={config.projection} exclusive onChange={handleShowWhatEmbedding}>\n            {availableProjections.map(p => (\n              <ToggleButton data-test-id=\"projection-type\" key={`toggleProjection${p}`} value={p}>\n                {p}\n              </ToggleButton>\n            ))}\n          </ToggleButtonGroup>\n        )}\n  \n        {isPlotOrHeatmap && (\n          <ToggleButtonGroup style={style} color=\"primary\" value={config.layer} exclusive onChange={handleToggleLayer}>\n            {data.layers.map(l => (\n              <ToggleButton data-test-id=\"layer-type\" key={`layer_${l.id}`} value={l.id}>\n                {l.name}\n              </ToggleButton>\n            ))}\n          </ToggleButtonGroup>\n        )}\n\n\n      </Grid>\n    );\n  }\n  \n  const handleToggleModeAssay = (event, newValue) => toggleModeAssay(newValue);\n  const style1 = { margin: \"0px\", top: 0, marginLeft: '100px' };\n\n\n  return (\n    <Paper className={classes.paper}>\n      <Grid container className={classes.headerPanel} alignItems=\"center\">\n        <DatasetControls />\n      </Grid>\n  \n      {isInPlotMode && (\n        <div className={classes.floatingControls}>\n          <SearchAndHighlight\n            classes={classes}\n            covs={data.layersData[config.layer].covs}\n            features={data.meta.features}\n            continuousCovs={data.layersData[config.layer].continuousCovs}\n            discreteCovs={data.layersData[config.layer].discreteCovs}\n            brushing={brushing}\n            genesets={genesets}\n            remoteData={remoteData}\n            loadRemoteData={loadRemoteData}\n            sNHControls={sNHControls}\n          />\n        </div>\n      )}\n  \n      <Grid container className={classes.plotMain} spacing={0}>\n        {isInPlotMode && (\n          <Grid item xs={gridItemSize} className={classes.plot}>\n            <Plot\n              className={classes.plot}\n              data={plot.data}\n              layout={plot.layout}\n              config={plot.config}\n              useResizeHandler={plot.useResizeHandler}\n              // onInitialized={(fig, div) => setPlotDiv(div)}\n              // onUpdate={() => Plotly.newPlot(plotDiv, plot.data, plot.layout, plot.config)}\n              // onWebGlContextLost={() => Plotly.newPlot(plotDiv, plot.data, plot.layout, plot.config)}\n            />\n          </Grid>\n        )}\n  \n        <PlotAndLayerControls />\n        <HeatmapContainer />\n  \n        {isInLegendsMode && (\n          <Grid item xs={gridItemSize} className={classes.plot} style={{ overflowY: 'scroll' }}>\n            {sNHControls !== \"none\"  && (\n              <div className={maximized?classes.floatingControls:classes.fixedControls}  style={{ top: 0 }}>\n\n                <ToggleButtonGroup style={style1} color=\"primary\" value={config.modeAssay} exclusive onChange={handleToggleModeAssay}>\n                  {data.meta.assays.concat(\"genesets\").map(p => (\n                    <ToggleButton data-test-id=\"assay-type\" key={`toggleModeAssay${p}`} value={p}>\n                      {p}\n                    </ToggleButton>\n                  ))}\n                </ToggleButtonGroup>\n              </div>)}\n            <FeatureTable\n              // className={classes.plot}\n              style={{ overflow: 'scroll' }}\n              features={config.modeAssay === \"genesets\" ? genesets : data.meta.features[config.modeAssay]}\n              assay={config.modeAssay}\n            />\n          </Grid>\n        )}\n      </Grid>\n  \n      <Grid container className={classes.footerPanel} alignItems=\"center\">\n        <div style={{ margin: \"auto\" }}>\n          <IconButton onClick={toggleMaximize} color=\"primary\">\n            <Icon>view_column</Icon>\n          </IconButton>\n          <IconButton onClick={toggleSNHControls} color=\"primary\">\n            <Icon>{renderSNHControlsToggleIcon()}</Icon>\n          </IconButton>\n  \n          {data.zip && (\n            <IconButton style={{ marginLeft: \"20px\" }} onClick={downloadReports} color=\"primary\">\n              <Icon>download</Icon>\n            </IconButton>\n          )}\n        </div>\n      </Grid>\n    </Paper>\n  );\n  \n}\n","import React, { useState } from 'react';\nimport { Grid, withStyles } from '@material-ui/core';\n// import { useAutoFade } from '../hooks/autoFade';\nimport { useDataPanels } from '../hooks/dataPanels';\nimport { ScPanel } from './ScPanel';\n\nconst styles = theme => ({\n  root: {\n      flexGrow: 1,\n      height: '100%',\n      width: '100%'\n  },\n  input: {\n      display: 'flex',\n      padding: 0,\n  },\n  title: {\n      marginLeft: theme.spacing.unit,\n      marginRight: theme.spacing.unit,\n      marginTop: 0,\n      marginBottom: 0,\n      wordWrap: 'break-word'\n  },\n  card: {\n      marginLeft: theme.spacing.unit,\n      marginRight: theme.spacing.unit,\n  },\n  paper: {\n      height: '100%',\n      width: '100%',\n  },\n  textField: {\n      marginLeft: theme.spacing.unit,\n      marginRight: theme.spacing.unit,\n  },\n  floatingControls: {\n      position: 'absolute',\n      zIndex: 10\n  },\n  fixedControls: {\n    zIndex: 10\n  },\n  controlArea: {},\n  center: {\n      position: 'absolute',\n      top: '50%',\n      left: '30%',\n      right: '30%',\n      backgroundColor: 'white',\n      marginLeft: 'auto',\n      marginRight: 'auto',\n      padding: '20px',\n      zIndex: 100\n  },\n  plotMain: {\n      height: 'calc(100vh - 6em)',\n      width: '100%'\n  },\n  plot: {\n      height: '100%',\n      width: 'calc(100% - 5px)'\n  },\n  toggleProjection: {\n      position: 'absolute',\n      width: '30%',\n      bottom: '40px',\n      zIndex: 200\n  },\n  footer: {\n      position: 'absolute',\n      width: '100%',\n      marginBottom: '0px',\n      padding: '0px',\n      bottom: '0px',\n      fontSize: '0.8em',\n      zIndex: 10\n  },\n  headerPanel: {\n      whiteSpace: 'nowrap',\n      margin: '0px',\n      minHeight: '48px',\n      padding: '0px',\n      align: 'left',\n      top: '0px',\n      fontSize: '0.8em',\n      zIndex: 10\n  },\n  footerPanel: {\n      whiteSpace: 'nowrap',\n      marginBottom: '0px',\n      padding: '0px',\n      align: 'center',\n      bottom: '0px',\n      fontSize: '0.8em',\n      zIndex: 10\n  },\n  chooseDatasetControl: {\n      position: 'absolute',\n      top: 1,\n      marginLeft: 1,\n      zIndex: 300\n  },\n  searchControl: {\n      margin: theme.spacing.unit,\n      minWidth: 100,\n      maxWidth: 300\n  },\n  paintControl: {\n      margin: theme.spacing.unit,\n      minWidth: 100,\n      maxWidth: 300\n  },\n  paintGenesetControl: {\n      margin: theme.spacing.unit,\n      minWidth: 100,\n      maxWidth: 300\n  }\n});\n\nfunction ScDataViewer({ classes, settings, initialDatasetIdx }) {\n    const splits = 3;\n    const [dataPanels, loadDataPanel] = useDataPanels({ datasets: settings.datasets, initialDatasetIdx, nPanels: splits });\n    const [maximizedPanelIdx, setMaximizedPanelIdx] = useState(0);\n\n    function toggleMax(nv) {\n        if (nv == null) return;\n        setMaximizedPanelIdx(nv);\n    }\n\n    return (\n        <Grid container className={classes.root} spacing={0}>\n            {maximizedPanelIdx === -1\n                ? Array(splits).fill(0).map((element, idx) =>\n                    <Grid key={`scpanel_${idx}`} item xs={12 / splits}>\n                        {dataPanels[idx].data === null\n                            ? 'Loading'\n                            : <ScPanel\n                                classes={classes}\n                                settings={settings}\n                                panelDataState={dataPanels[idx]}\n                                panelIdx={idx}\n                                loadDataPanel={loadDataPanel}\n                                maximized={false}\n                                toggleMaximize={() => toggleMax(idx)}\n                            />}\n                    </Grid>)\n                : <Grid item xs={12}>\n                    {dataPanels[maximizedPanelIdx].data === null\n                        ? 'Loading'\n                        : <ScPanel\n                            settings={settings}\n                            classes={classes}\n                            panelDataState={dataPanels[maximizedPanelIdx]}\n                            panelIdx={maximizedPanelIdx}\n                            loadDataPanel={loadDataPanel}\n                            maximized={true}\n                            toggleMaximize={() => toggleMax(-1)}\n                        />}\n                </Grid>\n            }\n        </Grid>\n    )\n}\n\nexport default withStyles(styles)(ScDataViewer);","import React, { Fragment, useState, useEffect } from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport Divider from '@material-ui/core/Divider';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Paper from '@material-ui/core/Paper';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport { withStyles } from '@material-ui/core/styles';\nimport Draggable from 'react-draggable';\nimport {\n  Table,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableBody\n} from '@material-ui/core';\n\nfunction PaperComponent(props) {\n  return (\n    <Draggable>\n      <Paper {...props} />\n    </Draggable>\n  );\n}\n\nconst styles = (theme) => ({\n  root: {\n    width: '100%',\n    backgroundColor: theme.palette.background.paper\n  },\n  subtitle: {\n    marginLeft: '10px',\n    backgroundColor: theme.palette.background.accent\n  },\n  tableRow: {\n    '&:hover': {\n      backgroundColor: theme.palette.background.paper\n    },\n    cursor: 'pointer'\n  },\n  buildInfo: {\n    float: 'right',\n    fontStyle: 'italic',\n    fontSize: 'x-small'\n  },\n  stickyHeader: {\n    position: 'sticky',\n    top: 0,\n    backgroundColor: theme.palette.background.paper,\n    zIndex: 1,\n  }\n});\n\nconst DraggableDialog = ({\n  classes,\n  open,\n  onClose,\n  pristine,\n  title,\n  datasets,\n  versions,\n  onGroupClick\n}) => {\n  const [cursor, setCursor] = useState('grab');\n\n  const handleClose = () => {\n    setCursor('grab');\n    onClose(null);\n  };\n\n  // Ensure all datasets have an organ field, even if empty\n  const datasetsWithOrgan = datasets.map(dataset => ({\n    ...dataset,\n    organ: dataset.organ || '',\n  }));\n\n  // Sort datasets with \"multiome\" group at the top\n  const sortedDatasets = datasetsWithOrgan.sort((a, b) => {\n    if (a.name === 'multiome') return -1; // Always prioritize the \"multiome\" group\n    if (b.name === 'multiome') return 1; // Always prioritize the \"multiome\" group\n    if (!a.organ) return 1; // Push null/empty organ to the bottom\n    if (!b.organ) return -1; // Push null/empty organ to the bottom\n    if (a.organ < b.organ) return -1;\n    if (a.organ > b.organ) return 1;\n    return 0;\n  });\n\n  return (\n    <div>\n      <Dialog\n        open={open}\n        onClose={handleClose}\n        PaperComponent={PaperComponent}\n        className={classes.root}\n        disableBackdropClick={pristine}\n        disableEscapeKeyDown={pristine}\n        aria-labelledby=\"draggable-dialog-title\"\n        maxWidth=\"md\"\n      >\n        <DialogTitle id=\"draggable-dialog-title\">{title}</DialogTitle>\n        <DialogContent>\n          <h5 className={classes.subtitle}>\n            {' '}\n            <small>Select data</small>{' '}\n          </h5>\n\n          <Table>\n            <TableHead>\n              <TableRow className={classes.stickyHeader}>\n                <TableCell>dataset</TableCell>\n                <TableCell>organ</TableCell>\n                <TableCell>layers</TableCell>\n                <TableCell>modalities</TableCell>\n                <TableCell>reference</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {sortedDatasets.map(\n                (\n                  {\n                    displayName,\n                    organ,\n                    name,\n                    layers,\n                    modalities,\n                    reference,\n                    isGroup,\n                    datasets: groupDatasets,\n                    expanded\n                  },\n                  index\n                ) => (\n                  <Fragment key={index}>\n                    <TableRow\n                      className={classes.tableRow}\n                      style={{ cursor }}\n                      hover\n                      onClick={() => {\n                        if (isGroup) {\n                          onGroupClick(name); // Toggle group expansion\n                        } else {\n                          setCursor('wait');\n                          onClose(index);\n                        }\n                      }}\n                    >\n                      <TableCell>\n                        {isGroup\n                          ? `${expanded ? '-' : '+'} ${displayName}`\n                          : name}\n                      </TableCell>\n                      <TableCell>{isGroup ? organ : ''}</TableCell> {/* Display organ only for group headers */}\n                      <TableCell>\n                        {isGroup ? '' : layers.length}\n                      </TableCell>\n                      <TableCell>\n                        {isGroup ? '' : modalities.length}\n                      </TableCell>\n                      <TableCell>\n                        {isGroup && !reference\n                          ? ''\n                          : reference !== null\n                          ? (\n                            <a\n                              href={reference}\n                              target=\"_blank\"\n                              rel=\"noreferrer noopener\"\n                            >\n                              {reference}\n                            </a>\n                            )\n                          : ''}\n                      </TableCell>\n                    </TableRow>\n\n                    {isGroup &&\n                      expanded &&\n                      groupDatasets.map((dataset, subIndex) => (\n                        <TableRow\n                          key={`${index}-${subIndex}`}\n                          className={classes.tableRow}\n                          style={{ cursor }}\n                          hover\n                          onClick={() => {\n                            setCursor('wait');\n                            onClose(dataset.originalIndex); // Pass the original dataset index to onClose\n                          }}\n                        >\n                          <TableCell style={{ paddingLeft: '30px' }}>\n                            {dataset.name}\n                          </TableCell>\n                          <TableCell>{''}</TableCell> {/* Hide organ for individual datasets */}\n                          <TableCell>{dataset.layers.length}</TableCell>\n                          <TableCell>\n                            {dataset.modalities.length}\n                          </TableCell>\n                          <TableCell>\n                            {dataset.reference !== null ? (\n                              <a\n                                href={dataset.reference}\n                                target=\"_blank\"\n                                rel=\"noreferrer noopener\"\n                              >\n                                {dataset.reference}\n                              </a>\n                            ) : (\n                              ''\n                            )}\n                          </TableCell>\n                        </TableRow>\n                      ))}\n                  </Fragment>\n                )\n              )}\n            </TableBody>\n          </Table>\n\n          <br />\n          <br />\n          <Divider />\n          <br />\n          <span className={classes.buildInfo}>\n            ISCVA v{versions.version}, &nbsp;&nbsp; revision{' '}\n            {versions.revision}\n            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n            <a href=\"https://chenlab.chpc.utah.edu/about-iscva/\">\n              <i>About</i>\n            </a>\n          </span>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default withStyles(styles)(DraggableDialog);\n","// this file is automatically generated by git.version.js script\nexport const versions = {version: '0.1.0', revision: '06244cd', branch: 'main'};","import React, { useState, useEffect } from 'react';\nimport { withStyles } from '@material-ui/core';\n\nimport ScDataViewer from './components/ScDataViewer';\nimport ChooseData from './ChooseData';\nimport { versions } from './versions';\n\nconst title = 'ISCVA';\nconst settingsURL = '/iscvam/app-settings.json';\n\nconst styles = theme => ({\n  fab: {\n    margin: theme.spacing.unit,\n    position: 'absolute',\n    right: '10px',\n    bottom: '10px',\n    zIndex: 100\n  },\n  fab2: {\n    margin: theme.spacing.unit,\n    position: 'absolute',\n    right: '100px',\n    bottom: '10px',\n    zIndex: 200\n  }\n});\n\nconst groupDatasets = (datasets) => {\n  const grouped = {};\n\n  datasets.forEach((dataset, idx) => {\n    const name = dataset.name || ''; // Access the 'name' property\n    const prefix = name.split('_')[0]; // Group by the prefix before the first underscore\n\n    if (!grouped[prefix]) {\n      grouped[prefix] = [];\n    }\n    grouped[prefix].push({ ...dataset, originalIndex: idx }); // Add the entire dataset object along with the original index\n  });\n\n  return grouped;\n};\n\n// Organ mapping\nconst organMapping = {\n  \"Bladder\": [\"BLCA\"],\n  \"Blood\": [\"AEL\", \"AML\", \"ALL\", \"CLL\", \"PBMC\"],\n  \"Bone\": [\"MM\", \"GCTB\", \"OS\"],\n  \"Brain\": [\"Glioma\", \"MB\"],\n  \"Breast\": [\"BRCA\"],\n  \"Colorectum\": [\"CRC\"],\n  \"Esophagus\": [\"ESCA\"],\n  \"Eye\": [\"RB\", \"UVM\"],\n  \"Head & Neck\": [\"HNSC\"],\n  \"Kidney\": [\"KIRC\", \"KICH\", \"KIPAN\"],\n  \"Liver\": [\"CHOL\", \"LIHC\", \"HB\"],\n  \"Lung\": [\"NSCLC\", \"SCLC\"],\n  \"Lymph node\": [\"NHL\", \"DLBC\"],\n  \"Nervous system\": [\"MPNST\", \"NET\", \"NB\", \"Neurofibroma\"],\n  \"Pancreas\": [\"PAAD\"],\n  \"Pelvic cavity\": [\"CESC\", \"OV\", \"UCEC\"],\n  \"Prostate\": [\"PRAD\"],\n  \"Skin\": [\"BCC\", \"MCC\", \"MF\", \"PCFCL\", \"SCC\", \"SKCM\"],\n  \"Soft tissue\": [\"GIST\", \"SARC\", \"PPB\", \"SS\"],\n  \"Stomach\": [\"STAD\"]\n};\n\n// Reverse mapping to get the organ by gene\nconst geneToOrgan = Object.entries(organMapping).reduce((acc, [organ, genes]) => {\n  genes.forEach(gene => {\n    acc[gene] = organ;\n  });\n  return acc;\n}, {});\n\nconst MainPage = (props) => {\n  const { classes } = props;\n  const [state, setState] = useState({\n    settings: null,\n    dragged: false,\n    openChooseData: true,\n    pristineChooseData: true,\n    initialDatasetIdx: null,\n    groupedDatasets: {},\n    expandedGroups: {}, // To manage which groups are expanded\n  });\n\n  useEffect(() => {\n    fetch(settingsURL)\n      .then(response => response.json())\n      .then(settings => {\n        const groupedDatasets = groupDatasets(settings.datasets);\n        setState(prevState => ({ ...prevState, settings, groupedDatasets }));\n      });\n  }, []);\n\n  const closeChooseData = (initialDatasetIdx) => {\n    setState(prevState => ({\n      ...prevState,\n      openChooseData: false,\n      initialDatasetIdx,\n      pristineChooseData: initialDatasetIdx === null\n    }));\n  };\n\n  const toggleGroupExpansion = (prefix) => {\n    setState(prevState => ({\n      ...prevState,\n      expandedGroups: {\n        ...prevState.expandedGroups,\n        [prefix]: !prevState.expandedGroups[prefix],\n      }\n    }));\n  };\n\n  return (\n    <div className=\"App\">\n      {state.settings !== null && (\n        <ChooseData\n          onClose={closeChooseData}\n          datasets={Object.keys(state.groupedDatasets).map(prefix => ({\n            displayName: `${prefix} (${state.groupedDatasets[prefix].length})`, // Display name with gene and count\n            organ: geneToOrgan[prefix], // Organ information\n            name: prefix, // Original prefix for toggling\n            layers: [],\n            modalities: [],\n            reference: null,\n            isGroup: true, // To differentiate group headers from dataset entries\n            datasets: state.groupedDatasets[prefix], // Store the datasets under this group\n            expanded: state.expandedGroups[prefix] || false, // Whether this group is expanded\n          }))}\n          open={state.openChooseData}\n          pristine={state.pristineChooseData}\n          title={title}\n          versions={versions}\n          onGroupClick={toggleGroupExpansion} // Handle group selection\n        />\n      )}\n      {state.initialDatasetIdx !== null && (\n        <ScDataViewer\n          settings={state.settings}\n          initialDatasetIdx={state.initialDatasetIdx}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default withStyles(styles)(MainPage);\n","import React from 'react';\nimport './App.css';\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport indigo from '@material-ui/core/colors/indigo';\nimport pink from '@material-ui/core/colors/pink';\nimport red from '@material-ui/core/colors/red';\n\nimport MainPage from './MainPage';\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: indigo,\n    secondary: pink,\n    error: red,\n    contrastThreshold: 3,\n    tonalOffset: 0.2,\n  },\n  typography: {\n    useNextVariants: true\n  }\n});\n\nconst App = () => {\n  return (\n    <MuiThemeProvider theme={theme}>\n      <MainPage/>\n    </MuiThemeProvider>\n  );\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'typeface-roboto';\n\n\n// console.log(tf);\n// console.log(tsne);\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n// Create some data\n// const data = tf.randomUniform([2000,10]);\n\n// Initialize the tsne optimizer\n// const data = generateData(10, 2000)\n// const tsneOpt = tsne.tsne(data, {\n//           perplexity: 18,\n//           verbose: true,\n//           knnMode: 'auto',\n//         });\n//  computeEmbedding(data, 2000);\n\n\n\n// Compute a T-SNE embedding, returns a promise.\n// Runs for 1000 iterations by default.\n// tsneOpt.compute(1000).then(() => {\n//   // tsne.coordinate returns a *tensor* with x, y coordinates of\n//   // the embedded data.\n// //   const coordinates = tsneOpt.coordinates();\n// //   coordinates.print();\n// }) ;\n"],"sourceRoot":""}